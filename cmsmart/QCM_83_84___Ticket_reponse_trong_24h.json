{
  "name": "QCM 83 84 - Ticket reponse trong 24h",
  "nodes": [
    {
      "parameters": {},
      "id": "3ed93264-2702-45eb-9b99-3f0abca71327",
      "name": "When clicking ‘Test workflow’",
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        -1200,
        6960
      ]
    },
    {
      "parameters": {
        "fieldToSplitOut": "data",
        "options": {}
      },
      "id": "b3837c87-ec03-44a7-ad23-78b53b7720bd",
      "name": "Item Lists",
      "type": "n8n-nodes-base.itemLists",
      "typeVersion": 3,
      "position": [
        860,
        720
      ]
    },
    {
      "parameters": {
        "url": "https://erp-amz.cloodo.com/v4/tickets",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "cloodoApi",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "limit",
              "value": "100"
            },
            {
              "name": "date_from",
              "value": "2024-01-01"
            },
            {
              "name": "date_to",
              "value": "2025-01-30"
            },
            {
              "name": "sort",
              "value": "desc"
            },
            {
              "name": "status",
              "value": "pending"
            },
            {
              "name": "cursor",
              "value": "={{ $json.meta.next_cursor }}"
            }
          ]
        },
        "options": {}
      },
      "id": "05e4f069-0474-47d9-b3c3-dd8873ae6baf",
      "name": "Ticket Pending",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        560,
        720
      ],
      "credentials": {
        "cloodoApi": {
          "id": "nP7U7wKTbfdSeafq",
          "name": "Cmsmart Worksuite account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $json.meta.next_cursor }}",
              "operation": "isNotEmpty"
            }
          ]
        }
      },
      "id": "70a04267-e485-4af0-8b6a-5761392508ae",
      "name": "IF6",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        760,
        900
      ]
    },
    {
      "parameters": {
        "url": "=https://erp-amz.cloodo.com/v4/tickets/{{ $json.data.id }}/replies",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "cloodoApi",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "limit",
              "value": "10"
            }
          ]
        },
        "options": {}
      },
      "id": "b7d1b481-2723-4079-bc22-deb9b619c4dc",
      "name": "Get replies",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1380,
        720
      ],
      "credentials": {
        "cloodoApi": {
          "id": "nP7U7wKTbfdSeafq",
          "name": "Cmsmart Worksuite account"
        }
      }
    },
    {
      "parameters": {
        "resource": "engagement",
        "ID": "={{ $json.id }}",
        "requestOptions": {}
      },
      "id": "9a42b691-f689-47a4-8bab-837840298036",
      "name": "Get Ticket",
      "type": "@cloodo/n8n-nodes-cloodo-crm.CloodoLeads",
      "typeVersion": 1,
      "position": [
        1120,
        720
      ],
      "credentials": {
        "cloodoApi": {
          "id": "nP7U7wKTbfdSeafq",
          "name": "Cmsmart Worksuite account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "796ab7b7-b19f-4a08-938e-16c2e40a9325",
              "name": "replies",
              "value": "={{ $json.data }}",
              "type": "array"
            },
            {
              "id": "377ffdcb-97b2-4ab7-b211-3376a7437855",
              "name": "ticket",
              "value": "={{ $('Get Ticket').item.json.data }}",
              "type": "object"
            }
          ]
        },
        "options": {}
      },
      "id": "daa3d4d8-b0a6-4708-9ca5-234a3a4426f3",
      "name": "Replies and Ticket",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1620,
        720
      ]
    },
    {
      "parameters": {
        "jsCode": "const currentDate = new Date();  // Ngày hiện tại\nconst daysLimit = 15;  // Số ngày bạn muốn so sánh\nconst filteredItems = [];\n\n// Lặp qua từng item trong $input.all() và kiểm tra update_at\nfor (const item of $input.all()) {\n  const updateDate = new Date(item?.json?.replies[0]?.updated_at);  // Ngày cập nhật của item\n  const diffTime = currentDate - updateDate; // Tính sự khác biệt giữa ngày hiện tại và ngày update_at\n  const diffDays = diffTime / (1000 * 3600 * 24); // Chuyển từ milliseconds sang ngày\n  const idTicket = item?.json?.ticket?.id\n  const idClient = item?.json?.ticket?.requester?.id\n  const clientTicket = item?.json?.ticket?.requester?.name\n  const numberTicket = item?.json?.ticket?.ticket_number\n  const subjectTicket = item?.json?.ticket?.subject\n  const statusTicket = item?.json?.ticket?.status\n  const typeTicket = item?.json?.ticket?.type?.type\n  const projectTicket = item?.json?.ticket?.projects?.name\n  const agentNameTicket = item?.json?.ticket?.agent?.user?.name\n  const agentEmailTicket = item?.json?.ticket?.agent?.user?.email\n  \n  if (diffDays > daysLimit) {\n    item.json.ticket = {idTicket: idTicket,\n                        idClient: idClient,\n                        nameClient: clientTicket,\n                        numberTicket: numberTicket,\n                        subjectTicket: subjectTicket,\n                        statusTicket: statusTicket,\n                        typeTicket: typeTicket,\n                        projectTicket: projectTicket,\n                        agentName: agentNameTicket,\n                        agentEmail: agentEmailTicket\n                       }\n    filteredItems.push(item);  // Thêm item vào danh sách nếu update_at sau 15 ngày\n  }\n}\n\nreturn filteredItems;  // Trả về các item thỏa mãn điều kiện\n"
      },
      "id": "fc17aed1-1eab-4b81-aa6d-c75984061730",
      "name": "Ticket 15 days",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1900,
        720
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "6dc6657f-526c-4633-a42e-591e9f2e964d",
              "leftValue": "={{ $json.replies[0].user.id }}",
              "rightValue": "={{ $json.ticket.idClient }}",
              "operator": {
                "type": "string",
                "operation": "notEquals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "7f2eaff7-6054-4f6a-8589-b919940d33c6",
      "name": "Requester Replies",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        2220,
        720
      ]
    },
    {
      "parameters": {
        "content": "## Trạng thái Agent rep cuối",
        "height": 80,
        "color": 3
      },
      "id": "c40d7e5d-bdd4-4b31-913b-908d30374253",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        2100,
        -60
      ]
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "=https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 1411577358,
          "mode": "list",
          "cachedResultName": "Vy",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=1411577358"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "lastRespone": "Agent",
            "idTicket": "={{ $json.ticket.idTicket }}",
            "numberTicket": "={{ $json.ticket.numberTicket }}",
            "agentName": "={{ $json.ticket.agentName }}",
            "agenEmail": "={{ $json.ticket.agentEmail }}",
            "nameClient": "={{ $json.ticket.nameClient }}",
            "subjectTicket": "={{ $json.ticket.subjectTicket }}",
            "statusTicket": "={{ $json.ticket.statusTicket }}",
            "typeTicket": "={{ $json.ticket.typeTicket }}",
            "projectTicket": "={{ $json.ticket.projectTicket }}"
          },
          "matchingColumns": [
            "idTicket"
          ],
          "schema": [
            {
              "id": "idTicket",
              "displayName": "idTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "numberTicket",
              "displayName": "numberTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agentName",
              "displayName": "agentName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agenEmail",
              "displayName": "agenEmail",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "lastRespone",
              "displayName": "lastRespone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nameClient",
              "displayName": "nameClient",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "subjectTicket",
              "displayName": "subjectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "statusTicket",
              "displayName": "statusTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "typeTicket",
              "displayName": "typeTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "projectTicket",
              "displayName": "projectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ]
        },
        "options": {}
      },
      "id": "192019e5-7a37-45d3-b33b-5d7bead2ef1b",
      "name": "Vy",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        3220,
        -480
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 1298489612,
          "mode": "list",
          "cachedResultName": "Phuong",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=1298489612"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "idTicket": "={{ $json.ticket.idTicket }}",
            "agenEmail": "={{ $json.ticket.agentEmail }}",
            "numberTicket": "={{ $json.ticket.numberTicket }}",
            "agentName": "={{ $json.ticket.agentName }}",
            "lastRespone": "Agent",
            "nameClient": "={{ $json.ticket.nameClient }}",
            "typeTicket": "={{ $json.ticket.typeTicket }}",
            "subjectTicket": "={{ $json.ticket.subjectTicket }}",
            "statusTicket": "={{ $json.ticket.statusTicket }}",
            "projectTicket": "={{ $json.ticket.projectTicket }}"
          },
          "matchingColumns": [
            "idTicket"
          ],
          "schema": [
            {
              "id": "idTicket",
              "displayName": "idTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "numberTicket",
              "displayName": "numberTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agentName",
              "displayName": "agentName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agenEmail",
              "displayName": "agenEmail",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "lastRespone",
              "displayName": "lastRespone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nameClient",
              "displayName": "nameClient",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "subjectTicket",
              "displayName": "subjectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "statusTicket",
              "displayName": "statusTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "typeTicket",
              "displayName": "typeTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "projectTicket",
              "displayName": "projectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ]
        },
        "options": {}
      },
      "id": "1fc3708f-201d-4927-b8d3-b09158062569",
      "name": "Phuong",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        3220,
        -280
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 1289877611,
          "mode": "list",
          "cachedResultName": "Huy",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=1289877611"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "lastRespone": "Agent",
            "idTicket": "={{ $json.ticket.idTicket }}",
            "numberTicket": "={{ $json.ticket.numberTicket }}",
            "agentName": "={{ $json.ticket.agentName }}",
            "agenEmail": "={{ $json.ticket.agentEmail }}",
            "nameClient": "={{ $json.ticket.nameClient }}",
            "subjectTicket": "={{ $json.ticket.subjectTicket }}",
            "statusTicket": "={{ $json.ticket.statusTicket }}",
            "typeTicket": "={{ $json.ticket.typeTicket }}",
            "projectTicket": "={{ $json.ticket.projectTicket }}"
          },
          "matchingColumns": [
            "idTicket"
          ],
          "schema": [
            {
              "id": "idTicket",
              "displayName": "idTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "numberTicket",
              "displayName": "numberTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agentName",
              "displayName": "agentName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agenEmail",
              "displayName": "agenEmail",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "lastRespone",
              "displayName": "lastRespone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nameClient",
              "displayName": "nameClient",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "subjectTicket",
              "displayName": "subjectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "statusTicket",
              "displayName": "statusTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "typeTicket",
              "displayName": "typeTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "projectTicket",
              "displayName": "projectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ]
        },
        "options": {}
      },
      "id": "e9f25af0-4fbd-485c-8d43-cbe4491c04ef",
      "name": "Huy",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        3220,
        -80
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 2073353188,
          "mode": "list",
          "cachedResultName": "Chi",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=2073353188"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "idTicket": "={{ $json.ticket.idTicket }}",
            "numberTicket": "={{ $json.ticket.numberTicket }}",
            "agentName": "={{ $json.ticket.agentName }}",
            "agenEmail": "={{ $json.ticket.agentEmail }}",
            "lastRespone": "Agent",
            "nameClient": "={{ $json.ticket.nameClient }}",
            "subjectTicket": "={{ $json.ticket.subjectTicket }}",
            "statusTicket": "={{ $json.ticket.statusTicket }}",
            "typeTicket": "={{ $json.ticket.typeTicket }}",
            "projectTicket": "={{ $json.ticket.projectTicket }}"
          },
          "matchingColumns": [
            "idTicket"
          ],
          "schema": [
            {
              "id": "idTicket",
              "displayName": "idTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "numberTicket",
              "displayName": "numberTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agentName",
              "displayName": "agentName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agenEmail",
              "displayName": "agenEmail",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "lastRespone",
              "displayName": "lastRespone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nameClient",
              "displayName": "nameClient",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "subjectTicket",
              "displayName": "subjectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "statusTicket",
              "displayName": "statusTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "typeTicket",
              "displayName": "typeTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "projectTicket",
              "displayName": "projectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ]
        },
        "options": {}
      },
      "id": "8199a825-d26b-4043-a434-9ae17fc2b34d",
      "name": "Chi",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        3240,
        120
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 548962283,
          "mode": "list",
          "cachedResultName": "Chau",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=548962283"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "idTicket": "={{ $json.ticket.idTicket }}",
            "numberTicket": "={{ $json.ticket.numberTicket }}",
            "agentName": "={{ $json.ticket.agentName }}",
            "agenEmail": "={{ $json.ticket.agentEmail }}",
            "lastRespone": "Agent",
            "nameClient": "={{ $json.ticket.nameClient }}",
            "subjectTicket": "={{ $json.ticket.subjectTicket }}",
            "statusTicket": "={{ $json.ticket.statusTicket }}",
            "typeTicket": "={{ $json.ticket.typeTicket }}",
            "projectTicket": "={{ $json.ticket.projectTicket }}"
          },
          "matchingColumns": [
            "idTicket"
          ],
          "schema": [
            {
              "id": "idTicket",
              "displayName": "idTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "numberTicket",
              "displayName": "numberTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agentName",
              "displayName": "agentName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agenEmail",
              "displayName": "agenEmail",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "lastRespone",
              "displayName": "lastRespone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nameClient",
              "displayName": "nameClient",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "subjectTicket",
              "displayName": "subjectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "statusTicket",
              "displayName": "statusTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "typeTicket",
              "displayName": "typeTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "projectTicket",
              "displayName": "projectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ]
        },
        "options": {}
      },
      "id": "f511ec38-1786-4dd1-b1fc-555501ad84e8",
      "name": "Chau",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        3240,
        320
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "vy.dl@netbasejsc.com",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Vy"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "2a75c8aa-0ad9-4171-b215-7ddea1d07bd8",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "phuong.nt@netbasejsc.com",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Phuong"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "c01ba01c-39bd-41c7-82c6-cc9a876741d2",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "huy.nhd@netbasejsc.com",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Huy"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "7add08a8-dffe-44d7-b27c-73344547b865",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "chi.hu@netbasejsc.com",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Chi"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "1591f407-008f-43ca-b641-27b4d699617d",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "chau.lt@netbasejsc.com",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Chau"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "b33cb102-6f78-4a4d-9e88-5b2725a64274",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "",
                    "operator": {
                      "type": "string",
                      "operation": "notEmpty",
                      "singleValue": true
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "default"
            }
          ]
        },
        "options": {}
      },
      "id": "eadbea96-b98a-4d3f-9f7f-70829ff8d3cd",
      "name": "Switch",
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        2660,
        40
      ]
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 1419606979,
          "mode": "list",
          "cachedResultName": "Default",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=1419606979"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "idTicket": "={{ $json.ticket.idTicket }}",
            "numberTicket": "={{ $json.ticket.numberTicket }}",
            "agentName": "={{ $json.ticket.agentName }}",
            "agenEmail": "={{ $json.ticket.agentEmail }}",
            "lastRespone": "Agent",
            "nameClient": "={{ $json.ticket.nameClient }}",
            "subjectTicket": "={{ $json.ticket.subjectTicket }}",
            "statusTicket": "={{ $json.ticket.statusTicket }}",
            "projectTicket": "={{ $json.ticket.projectTicket }}",
            "typeTicket": "={{ $json.ticket.typeTicket }}"
          },
          "matchingColumns": [
            "idTicket"
          ],
          "schema": [
            {
              "id": "idTicket",
              "displayName": "idTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "numberTicket",
              "displayName": "numberTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agentName",
              "displayName": "agentName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agenEmail",
              "displayName": "agenEmail",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "lastRespone",
              "displayName": "lastRespone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nameClient",
              "displayName": "nameClient",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "subjectTicket",
              "displayName": "subjectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "statusTicket",
              "displayName": "statusTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "typeTicket",
              "displayName": "typeTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "projectTicket",
              "displayName": "projectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ]
        },
        "options": {}
      },
      "id": "d582fa42-0982-49ef-a232-9b56ca338ccf",
      "name": "Default",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        3260,
        520
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "content": "## Trạng thái Client rep cuối",
        "height": 80,
        "color": 3
      },
      "id": "978d7a95-7a9c-4bea-8c2e-c771eab0b2b6",
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        2580,
        1140
      ]
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 1411577358,
          "mode": "list",
          "cachedResultName": "Vy",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=1411577358"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "idTicket": "={{ $json.ticket.idTicket }}",
            "numberTicket": "={{ $json.ticket.numberTicket }}",
            "agentName": "={{ $json.ticket.agentName }}",
            "agenEmail": "={{ $json.ticket.agentEmail }}",
            "nameClient": "={{ $json.ticket.nameClient }}",
            "subjectTicket": "={{ $json.ticket.subjectTicket }}",
            "statusTicket": "={{ $json.ticket.statusTicket }}",
            "typeTicket": "={{ $json.ticket.typeTicket }}",
            "projectTicket": "={{ $json.ticket.projectTicket }}",
            "lastRespone": "Client"
          },
          "matchingColumns": [
            "idTicket"
          ],
          "schema": [
            {
              "id": "idTicket",
              "displayName": "idTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "numberTicket",
              "displayName": "numberTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agentName",
              "displayName": "agentName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agenEmail",
              "displayName": "agenEmail",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "lastRespone",
              "displayName": "lastRespone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nameClient",
              "displayName": "nameClient",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "subjectTicket",
              "displayName": "subjectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "statusTicket",
              "displayName": "statusTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "typeTicket",
              "displayName": "typeTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "projectTicket",
              "displayName": "projectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ]
        },
        "options": {}
      },
      "id": "9e6b4651-7425-442f-80af-6b1633e97df6",
      "name": "Vy1",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        3240,
        840
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 1298489612,
          "mode": "list",
          "cachedResultName": "Phuong",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=1298489612"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "idTicket": "={{ $json.ticket.idTicket }}",
            "agenEmail": "={{ $json.ticket.agentEmail }}",
            "numberTicket": "={{ $json.ticket.numberTicket }}",
            "agentName": "={{ $json.ticket.agentName }}",
            "lastRespone": "Client",
            "nameClient": "={{ $json.ticket.nameClient }}",
            "typeTicket": "={{ $json.ticket.typeTicket }}",
            "subjectTicket": "={{ $json.ticket.subjectTicket }}",
            "statusTicket": "={{ $json.ticket.statusTicket }}",
            "projectTicket": "={{ $json.ticket.projectTicket }}"
          },
          "matchingColumns": [
            "idTicket"
          ],
          "schema": [
            {
              "id": "idTicket",
              "displayName": "idTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "numberTicket",
              "displayName": "numberTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agentName",
              "displayName": "agentName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agenEmail",
              "displayName": "agenEmail",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "lastRespone",
              "displayName": "lastRespone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nameClient",
              "displayName": "nameClient",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "subjectTicket",
              "displayName": "subjectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "statusTicket",
              "displayName": "statusTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "typeTicket",
              "displayName": "typeTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "projectTicket",
              "displayName": "projectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ]
        },
        "options": {}
      },
      "id": "0ebd71ab-6fe5-4a2c-aa66-423fdaac2e46",
      "name": "Phuong1",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        3240,
        1040
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 1289877611,
          "mode": "list",
          "cachedResultName": "Huy",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=1289877611"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "lastRespone": "Client",
            "idTicket": "={{ $json.ticket.idTicket }}",
            "numberTicket": "={{ $json.ticket.numberTicket }}",
            "agentName": "={{ $json.ticket.agentName }}",
            "agenEmail": "={{ $json.ticket.agentEmail }}",
            "nameClient": "={{ $json.ticket.nameClient }}",
            "subjectTicket": "={{ $json.ticket.subjectTicket }}",
            "statusTicket": "={{ $json.ticket.statusTicket }}",
            "typeTicket": "={{ $json.ticket.typeTicket }}",
            "projectTicket": "={{ $json.ticket.projectTicket }}"
          },
          "matchingColumns": [
            "idTicket"
          ],
          "schema": [
            {
              "id": "idTicket",
              "displayName": "idTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "numberTicket",
              "displayName": "numberTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agentName",
              "displayName": "agentName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agenEmail",
              "displayName": "agenEmail",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "lastRespone",
              "displayName": "lastRespone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nameClient",
              "displayName": "nameClient",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "subjectTicket",
              "displayName": "subjectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "statusTicket",
              "displayName": "statusTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "typeTicket",
              "displayName": "typeTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "projectTicket",
              "displayName": "projectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ]
        },
        "options": {}
      },
      "id": "ffaf6f4c-3d2f-459e-a933-252e3f363781",
      "name": "Huy1",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        3240,
        1240
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 2073353188,
          "mode": "list",
          "cachedResultName": "Chi",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=2073353188"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "idTicket": "={{ $json.ticket.idTicket }}",
            "numberTicket": "={{ $json.ticket.numberTicket }}",
            "agentName": "={{ $json.ticket.agentName }}",
            "agenEmail": "={{ $json.ticket.agentEmail }}",
            "lastRespone": "Client",
            "nameClient": "={{ $json.ticket.nameClient }}",
            "subjectTicket": "={{ $json.ticket.subjectTicket }}",
            "statusTicket": "={{ $json.ticket.statusTicket }}",
            "typeTicket": "={{ $json.ticket.typeTicket }}",
            "projectTicket": "={{ $json.ticket.projectTicket }}"
          },
          "matchingColumns": [
            "idTicket"
          ],
          "schema": [
            {
              "id": "idTicket",
              "displayName": "idTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "numberTicket",
              "displayName": "numberTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agentName",
              "displayName": "agentName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agenEmail",
              "displayName": "agenEmail",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "lastRespone",
              "displayName": "lastRespone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nameClient",
              "displayName": "nameClient",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "subjectTicket",
              "displayName": "subjectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "statusTicket",
              "displayName": "statusTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "typeTicket",
              "displayName": "typeTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "projectTicket",
              "displayName": "projectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ]
        },
        "options": {}
      },
      "id": "49e8daf8-8bdf-4a6e-8937-3f5156f34672",
      "name": "Chi1",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        3240,
        1440
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 548962283,
          "mode": "list",
          "cachedResultName": "Chau",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=548962283"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "idTicket": "={{ $json.ticket.idTicket }}",
            "numberTicket": "={{ $json.ticket.numberTicket }}",
            "agentName": "={{ $json.ticket.agentName }}",
            "agenEmail": "={{ $json.ticket.agentEmail }}",
            "lastRespone": "Client",
            "nameClient": "={{ $json.ticket.nameClient }}",
            "subjectTicket": "={{ $json.ticket.subjectTicket }}",
            "statusTicket": "={{ $json.ticket.statusTicket }}",
            "typeTicket": "={{ $json.ticket.typeTicket }}",
            "projectTicket": "={{ $json.ticket.projectTicket }}"
          },
          "matchingColumns": [
            "idTicket"
          ],
          "schema": [
            {
              "id": "idTicket",
              "displayName": "idTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "numberTicket",
              "displayName": "numberTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agentName",
              "displayName": "agentName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agenEmail",
              "displayName": "agenEmail",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "lastRespone",
              "displayName": "lastRespone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nameClient",
              "displayName": "nameClient",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "subjectTicket",
              "displayName": "subjectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "statusTicket",
              "displayName": "statusTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "typeTicket",
              "displayName": "typeTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "projectTicket",
              "displayName": "projectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ]
        },
        "options": {}
      },
      "id": "3ee56f25-b1aa-4325-bd41-7fa96fe090ab",
      "name": "Chau1",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        3240,
        1640
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "vy.dl@netbasejsc.com",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Vy"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "2a75c8aa-0ad9-4171-b215-7ddea1d07bd8",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "phuong.nt@netbasejsc.com",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Phuong"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "c01ba01c-39bd-41c7-82c6-cc9a876741d2",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "huy.nhd@netbasejsc.com",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Huy"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "7add08a8-dffe-44d7-b27c-73344547b865",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "chi.hu@netbasejsc.com",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Chi"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "1591f407-008f-43ca-b641-27b4d699617d",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "chau.lt@netbasejsc.com",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Chau"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "b33cb102-6f78-4a4d-9e88-5b2725a64274",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "",
                    "operator": {
                      "type": "string",
                      "operation": "notEmpty",
                      "singleValue": true
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "default"
            }
          ]
        },
        "options": {}
      },
      "id": "b89100dc-716a-43f2-aca9-1a589db48089",
      "name": "Switch1",
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        2680,
        1360
      ]
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 1419606979,
          "mode": "list",
          "cachedResultName": "Default",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=1419606979"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "idTicket": "={{ $json.ticket.idTicket }}",
            "numberTicket": "={{ $json.ticket.numberTicket }}",
            "agentName": "={{ $json.ticket.agentName }}",
            "agenEmail": "={{ $json.ticket.agentEmail }}",
            "lastRespone": "Client",
            "nameClient": "={{ $json.ticket.nameClient }}",
            "subjectTicket": "={{ $json.ticket.subjectTicket }}",
            "statusTicket": "={{ $json.ticket.statusTicket }}",
            "projectTicket": "={{ $json.ticket.projectTicket }}",
            "typeTicket": "={{ $json.ticket.typeTicket }}"
          },
          "matchingColumns": [
            "idTicket"
          ],
          "schema": [
            {
              "id": "idTicket",
              "displayName": "idTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "numberTicket",
              "displayName": "numberTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agentName",
              "displayName": "agentName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agenEmail",
              "displayName": "agenEmail",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "lastRespone",
              "displayName": "lastRespone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nameClient",
              "displayName": "nameClient",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "subjectTicket",
              "displayName": "subjectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "statusTicket",
              "displayName": "statusTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "typeTicket",
              "displayName": "typeTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "projectTicket",
              "displayName": "projectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ]
        },
        "options": {}
      },
      "id": "90038fe6-ae45-4e30-9476-df8141ce798d",
      "name": "Default1",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        3240,
        1840
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 1419606979,
          "mode": "list",
          "cachedResultName": "Default",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=1419606979"
        },
        "options": {}
      },
      "id": "a9d73040-1bf8-4621-91ff-a198df928792",
      "name": "Default2",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        2420,
        -1160
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const strings = [\n  \"61fd7c82-41d1-4cd6-b63d-85b927bb7dff\",\n  \"e4eead4b-0a3c-4a42-88aa-90586f30bafd\",\n  \"b26c8a1a-2603-4d11-a92c-effccf6217db\"\n];\n\nlet index = $runIndex % strings.length;\nfor (const item of $input.all()) {\n  item.json.myNewField = strings[index];\n  index = (index + 1) % strings.length;\n}\nreturn $input.all();\n"
      },
      "id": "efa39129-1488-4087-b8c0-cea6714ba5dd",
      "name": "Code",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2720,
        -1160
      ]
    },
    {
      "parameters": {
        "resource": "engagement",
        "operation": "update",
        "ID": "={{ $json.idTicket }}",
        "additionalFields": {
          "agentId": "={{ $json.myNewField }}"
        },
        "requestOptions": {}
      },
      "id": "bf424513-5c8a-43ac-b228-3b6aad67dd48",
      "name": "Cloodo CRM",
      "type": "@cloodo/n8n-nodes-cloodo-crm.CloodoLeads",
      "typeVersion": 1,
      "position": [
        3000,
        -1160
      ],
      "credentials": {
        "cloodoApi": {
          "id": "nP7U7wKTbfdSeafq",
          "name": "Cmsmart Worksuite account"
        }
      }
    },
    {
      "parameters": {
        "aggregate": "aggregateAllItemData",
        "options": {}
      },
      "id": "725215c5-3c8d-4103-9925-c34628d8e1c5",
      "name": "Aggregate2",
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        5520,
        1080
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.cloodo.com/mautic.php",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {}
          ]
        },
        "sendBody": true,
        "contentType": "multipart-form-data",
        "bodyParameters": {
          "parameters": [
            {
              "name": "email",
              "value": "={{ $json.data[0].agenEmail }}"
            },
            {
              "name": "uname",
              "value": "={{ $json.data[0].agentName }}"
            },
            {
              "name": "subject",
              "value": "=Closed Ticket Client No Replies"
            },
            {
              "name": "send_mail",
              "value": "cmsmart"
            },
            {
              "name": "email_id",
              "value": "109"
            },
            {
              "name": "content",
              "value": "=<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Ticket Closure Reminder</title>\n</head>\n\n<body style=\"font-family: Arial, sans-serif; color: #333; line-height: 1.6; margin: 0;\">\n    <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"background-color: #fff;\">\n        <!-- Content -->\n        <tr>\n            <td style=\"font-size: 14px; color: black\">\n                <p>Dear {{ $json.data[0].agentName }},</p>\n\n                <p>Here is a friendly reminder about closing tickets:</p>\n\n                <ul>\n                    <li>Tickets must be closed within 15 days of the customer not responding.</li>\n                    <li>If the ticket is not closed after 24 hours, points will be deducted from the CmsMart Admin account.</li>\n                </ul>\n\n                <p>Please ensure that all tickets are properly managed and closed within the specified time frame.</p>\n\n                <p>Thank you for your attention to this matter.</p>\n                <p>Here are the links to the tickets you need to close:</p>\n\n                <table width=\"100%\" cellpadding=\"5\" cellspacing=\"0\" style=\"border-collapse: collapse;\">\n                    <tr>\n                        <th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Ticket ID</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Subject</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Client</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Status</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Type</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Project</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Agent</th>\n                      \n                    </tr>\n\n               {{ $json[\"data\"].map(item => `\n                <tr>\n                    <td style=\"border-bottom: 1px solid #ddd; padding: 8px;\"><a href=\"https://worksuite.cloodo.com/apps/tickets/all-tickets/${item.idTicket}\" style=\"color: #007bff; text-decoration: none;\">Ticket${item.numberTicket}</a></td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.subjectTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.nameClient}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.statusTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.typeTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.projectTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.agentName}</td>\n                </tr>\n                `).join('') }}\n                \n\n                </table>\n\n                <p>Best regards,</p>\n                <p>Cms Admin</p>\n            </td>\n        </tr>\n    </table>\n</body>\n\n</html>\n"
            }
          ]
        },
        "options": {}
      },
      "id": "b4e8e941-ebde-4ed6-9622-69a806b531b9",
      "name": "Send mail closed ticket1",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        6500,
        700
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "a652141b-108c-48b9-801a-56a259585aaa",
              "leftValue": "={{ $json.lastRespone }}",
              "rightValue": "Agent",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "557f92f4-6838-40f6-8f29-019c928abff8",
      "name": "Check Agent Reply1",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        5100,
        1300
      ]
    },
    {
      "parameters": {
        "aggregate": "aggregateAllItemData",
        "options": {}
      },
      "id": "da3eec36-58a7-4f47-90b6-bec6b3a9468d",
      "name": "Aggregate3",
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        5540,
        1340
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.cloodo.com/mautic.php",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {}
          ]
        },
        "sendBody": true,
        "contentType": "multipart-form-data",
        "bodyParameters": {
          "parameters": [
            {
              "name": "email",
              "value": "={{ $json.data[0].agenEmail }}"
            },
            {
              "name": "uname",
              "value": "={{ $json.data[0].agentName }}"
            },
            {
              "name": "subject",
              "value": "=Respond to tickets when customers respond"
            },
            {
              "name": "send_mail",
              "value": "cmsmart"
            },
            {
              "name": "email_id",
              "value": "109"
            },
            {
              "name": "content",
              "value": "=<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Ticket Closure Reminder</title>\n</head>\n\n<body style=\"font-family: Arial, sans-serif; color: #333; line-height: 1.6; margin: 0;\">\n    <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"background-color: #fff;\">\n        <!-- Content -->\n        <tr>\n            <td style=\"font-size: 14px; color: black\">\n                <p>Dear {{ $json.data[0].agentName }},</p>\n<p>I hope this message finds you well.</p>\n<p>This is a friendly reminder to please ensure that all customer tickets are responded to in a timely manner. Once a customer responds, it is important to follow up within 24 hours. Failure to do so will result in points being deducted from the CmsMart Admin system.</p>\n\n<p>Key points to remember:</p>\n\n<ul>\n<li>Ensure timely responses to customer feedback.</li>\n<li>Reply within 24 hours to avoid penalties.</li>\n<li>Points will be deducted from the CmsMart Admin for slow responses.</li>\n</ul>\n\n<p>We appreciate your cooperation and concern for this issue.</p>\n\n<p>Here is the ticket you need to respond to:</p>\n\n                <table width=\"100%\" cellpadding=\"5\" cellspacing=\"0\" style=\"border-collapse: collapse;\">\n                    <tr>\n                        <th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Ticket ID</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Subject</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Client</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Status</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Type</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Project</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Agent</th>\n                      \n                    </tr>\n\n               {{ $json[\"data\"].map(item => `\n                <tr>\n                    <td style=\"border-bottom: 1px solid #ddd; padding: 8px;\"><a href=\"https://worksuite.cloodo.com/apps/tickets/all-tickets/${item.idTicket}\" style=\"color: #007bff; text-decoration: none;\">Ticket${item.numberTicket}</a></td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.subjectTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.nameClient}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.statusTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.typeTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.projectTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.agentName}</td>\n                </tr>\n                `).join('') }}\n                </table>\n\n                <p>Best regards,</p>\n                <p>Cms Admin</p>\n            </td>\n        </tr>\n    </table>\n</body>\n\n</html>\n"
            }
          ]
        },
        "options": {}
      },
      "id": "a454e1d0-7f76-443b-a29b-26e0b0581d8b",
      "name": "Send mail Reply Ticket1",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        6380,
        1260
      ]
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 1298489612,
          "mode": "list",
          "cachedResultName": "Phuong",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=1298489612"
        },
        "options": {}
      },
      "id": "adaf7971-3298-470d-8778-7e6f9ca06276",
      "name": "Phuong2",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        4800,
        1300
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "aggregate": "aggregateAllItemData",
        "options": {}
      },
      "id": "d204c443-7f92-46f5-be5e-e1061708c04d",
      "name": "Aggregate4",
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        5520,
        -120
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.cloodo.com/mautic.php",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {}
          ]
        },
        "sendBody": true,
        "contentType": "multipart-form-data",
        "bodyParameters": {
          "parameters": [
            {
              "name": "email",
              "value": "={{ $json.data[0].agenEmail }}"
            },
            {
              "name": "uname",
              "value": "={{ $json.data[0].agentName }}"
            },
            {
              "name": "subject",
              "value": "=Closed Ticket Client No Replies"
            },
            {
              "name": "send_mail",
              "value": "cmsmart"
            },
            {
              "name": "email_id",
              "value": "109"
            },
            {
              "name": "content",
              "value": "=<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Ticket Closure Reminder</title>\n</head>\n\n<body style=\"font-family: Arial, sans-serif; color: #333; line-height: 1.6; margin: 0;\">\n    <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"background-color: #fff;\">\n        <!-- Content -->\n        <tr>\n            <td style=\"font-size: 14px; color: black\">\n                <p>Dear {{ $json.data[0].agentName }},</p>\n\n                <p>Here is a friendly reminder about closing tickets:</p>\n\n                <ul>\n                    <li>Tickets must be closed within 15 days of the customer not responding.</li>\n                    <li>If the ticket is not closed after 24 hours, points will be deducted from the CmsMart Admin account.</li>\n                </ul>\n\n                <p>Please ensure that all tickets are properly managed and closed within the specified time frame.</p>\n\n                <p>Thank you for your attention to this matter.</p>\n                <p>Here are the links to the tickets you need to close:</p>\n\n                <table width=\"100%\" cellpadding=\"5\" cellspacing=\"0\" style=\"border-collapse: collapse;\">\n                    <tr>\n                        <th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Ticket ID</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Subject</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Client</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Status</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Type</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Project</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Agent</th>\n                      \n                    </tr>\n\n               {{ $json[\"data\"].map(item => `\n                <tr>\n                    <td style=\"border-bottom: 1px solid #ddd; padding: 8px;\"><a href=\"https://worksuite.cloodo.com/apps/tickets/all-tickets/${item.idTicket}\" style=\"color: #007bff; text-decoration: none;\">Ticket${item.numberTicket}</a></td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.subjectTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.nameClient}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.statusTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.typeTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.projectTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.agentName}</td>\n                </tr>\n                `).join('') }}\n                \n\n                </table>\n\n                <p>Best regards,</p>\n                <p>Cms Admin</p>\n            </td>\n        </tr>\n    </table>\n</body>\n\n</html>\n"
            }
          ]
        },
        "options": {}
      },
      "id": "94fd1c77-355f-4edd-abfb-1c7a6f1ad0b6",
      "name": "Send mail closed ticket2",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        6540,
        -300
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "a652141b-108c-48b9-801a-56a259585aaa",
              "leftValue": "={{ $json.lastRespone }}",
              "rightValue": "Agent",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "158a93a7-e594-48bc-bf6c-3ec501cd6ce8",
      "name": "Check Agent Reply2",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        5040,
        60
      ]
    },
    {
      "parameters": {
        "aggregate": "aggregateAllItemData",
        "options": {}
      },
      "id": "90b9bf18-efff-49b8-9a0a-45325cf0df28",
      "name": "Aggregate5",
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        5520,
        180
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.cloodo.com/mautic.php",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {}
          ]
        },
        "sendBody": true,
        "contentType": "multipart-form-data",
        "bodyParameters": {
          "parameters": [
            {
              "name": "email",
              "value": "={{ $json.data[0].agenEmail }}"
            },
            {
              "name": "uname",
              "value": "={{ $json.data[0].agentName }}"
            },
            {
              "name": "subject",
              "value": "=Respond to tickets when customers respond"
            },
            {
              "name": "send_mail",
              "value": "cmsmart"
            },
            {
              "name": "email_id",
              "value": "109"
            },
            {
              "name": "content",
              "value": "=<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Ticket Closure Reminder</title>\n</head>\n\n<body style=\"font-family: Arial, sans-serif; color: #333; line-height: 1.6; margin: 0;\">\n    <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"background-color: #fff;\">\n        <!-- Content -->\n        <tr>\n            <td style=\"font-size: 14px; color: black\">\n                <p>Dear {{ $json.data[0].agentName }},</p>\n<p>I hope this message finds you well.</p>\n<p>This is a friendly reminder to please ensure that all customer tickets are responded to in a timely manner. Once a customer responds, it is important to follow up within 24 hours. Failure to do so will result in points being deducted from the CmsMart Admin system.</p>\n\n<p>Key points to remember:</p>\n\n<ul>\n<li>Ensure timely responses to customer feedback.</li>\n<li>Reply within 24 hours to avoid penalties.</li>\n<li>Points will be deducted from the CmsMart Admin for slow responses.</li>\n</ul>\n\n<p>We appreciate your cooperation and concern for this issue.</p>\n\n<p>Here is the ticket you need to respond to:</p>\n\n                <table width=\"100%\" cellpadding=\"5\" cellspacing=\"0\" style=\"border-collapse: collapse;\">\n                    <tr>\n                        <th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Ticket ID</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Subject</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Client</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Status</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Type</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Project</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Agent</th>\n                      \n                    </tr>\n\n               {{ $json[\"data\"].map(item => `\n                <tr>\n                    <td style=\"border-bottom: 1px solid #ddd; padding: 8px;\"><a href=\"https://worksuite.cloodo.com/apps/tickets/all-tickets/${item.idTicket}\" style=\"color: #007bff; text-decoration: none;\">Ticket${item.numberTicket}</a></td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.subjectTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.nameClient}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.statusTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.typeTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.projectTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.agentName}</td>\n                </tr>\n                `).join('') }}\n                </table>\n\n                <p>Best regards,</p>\n                <p>Cms Admin</p>\n            </td>\n        </tr>\n    </table>\n</body>\n\n</html>\n"
            }
          ]
        },
        "options": {}
      },
      "id": "b320f35f-4e16-44ab-a098-d99b48ba7901",
      "name": "Send mail Reply Ticket2",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        6560,
        160
      ]
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 1289877611,
          "mode": "list",
          "cachedResultName": "Huy",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=1289877611"
        },
        "options": {}
      },
      "id": "5e471658-a083-4acd-837d-92be08ec0f36",
      "name": "Huy2",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        4740,
        60
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "aggregate": "aggregateAllItemData",
        "options": {}
      },
      "id": "d37a9a2e-89bc-4ef8-ae0f-762ed49c6183",
      "name": "Aggregate6",
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        5680,
        2020
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.cloodo.com/mautic.php",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {}
          ]
        },
        "sendBody": true,
        "contentType": "multipart-form-data",
        "bodyParameters": {
          "parameters": [
            {
              "name": "email",
              "value": "={{ $json.data[0].agenEmail }}"
            },
            {
              "name": "uname",
              "value": "={{ $json.data[0].agentName }}"
            },
            {
              "name": "subject",
              "value": "=Closed Ticket Client No Replies"
            },
            {
              "name": "send_mail",
              "value": "cmsmart"
            },
            {
              "name": "email_id",
              "value": "111"
            },
            {
              "name": "content",
              "value": "=<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Ticket Closure Reminder</title>\n</head>\n\n<body style=\"font-family: Arial, sans-serif; color: #333; line-height: 1.6; margin: 0;\">\n    <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"background-color: #fff;\">\n        <!-- Content -->\n        <tr>\n            <td style=\"font-size: 14px; color: black\">\n                <p>Dear {{ $json.data[0].agentName }},</p>\n\n                <p>Here is a friendly reminder about closing tickets:</p>\n\n                <ul>\n                    <li>Tickets must be closed within 15 days of the customer not responding.</li>\n                    <li>If the ticket is not closed after 24 hours, points will be deducted from the CmsMart Admin account.</li>\n                </ul>\n\n                <p>Please ensure that all tickets are properly managed and closed within the specified time frame.</p>\n\n                <p>Thank you for your attention to this matter.</p>\n                <p>Here are the links to the tickets you need to close:</p>\n\n                <table width=\"100%\" cellpadding=\"5\" cellspacing=\"0\" style=\"border-collapse: collapse;\">\n                    <tr>\n                        <th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Ticket ID</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Subject</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Client</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Status</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Type</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Project</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Agent</th>\n                      \n                    </tr>\n\n               {{ $json[\"data\"].map(item => `\n                <tr>\n                    <td style=\"border-bottom: 1px solid #ddd; padding: 8px;\"><a href=\"https://worksuite.cloodo.com/apps/tickets/all-tickets/${item.idTicket}\" style=\"color: #007bff; text-decoration: none;\">Ticket${item.numberTicket}</a></td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.subjectTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.nameClient}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.statusTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.typeTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.projectTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.agentName}</td>\n                </tr>\n                `).join('') }}\n                \n\n                </table>\n\n                <p>Best regards,</p>\n                <p>Cms Admin</p>\n            </td>\n        </tr>\n    </table>\n</body>\n\n</html>\n"
            }
          ]
        },
        "options": {}
      },
      "id": "4d040ffd-87ee-446f-a0b6-8832e9f7684a",
      "name": "Send mail closed ticket3",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        6500,
        1820
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "a652141b-108c-48b9-801a-56a259585aaa",
              "leftValue": "={{ $json.lastRespone }}",
              "rightValue": "Agent",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "4ccdfdfa-8fb9-486a-a63f-1cb549a7f593",
      "name": "Check Agent Reply3",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        5080,
        2300
      ]
    },
    {
      "parameters": {
        "aggregate": "aggregateAllItemData",
        "options": {}
      },
      "id": "65318f81-868a-4021-9a21-393c6ad8e773",
      "name": "Aggregate7",
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        5560,
        2320
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.cloodo.com/mautic.php",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {}
          ]
        },
        "sendBody": true,
        "contentType": "multipart-form-data",
        "bodyParameters": {
          "parameters": [
            {
              "name": "email",
              "value": "={{ $json.data[0].agenEmail }}"
            },
            {
              "name": "uname",
              "value": "={{ $json.data[0].agentName }}"
            },
            {
              "name": "subject",
              "value": "=Respond to tickets when customers respond"
            },
            {
              "name": "send_mail",
              "value": "cmsmart"
            },
            {
              "name": "email_id",
              "value": "109"
            },
            {
              "name": "content",
              "value": "=<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Ticket Closure Reminder</title>\n</head>\n\n<body style=\"font-family: Arial, sans-serif; color: #333; line-height: 1.6; margin: 0;\">\n    <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"background-color: #fff;\">\n        <!-- Content -->\n        <tr>\n            <td style=\"font-size: 14px; color: black\">\n                <p>Dear {{ $json.data[0].agentName }},</p>\n<p>I hope this message finds you well.</p>\n<p>This is a friendly reminder to please ensure that all customer tickets are responded to in a timely manner. Once a customer responds, it is important to follow up within 24 hours. Failure to do so will result in points being deducted from the CmsMart Admin system.</p>\n\n<p>Key points to remember:</p>\n\n<ul>\n<li>Ensure timely responses to customer feedback.</li>\n<li>Reply within 24 hours to avoid penalties.</li>\n<li>Points will be deducted from the CmsMart Admin for slow responses.</li>\n</ul>\n\n<p>We appreciate your cooperation and concern for this issue.</p>\n\n<p>Here is the ticket you need to respond to:</p>\n\n                <table width=\"100%\" cellpadding=\"5\" cellspacing=\"0\" style=\"border-collapse: collapse;\">\n                    <tr>\n                        <th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Ticket ID</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Subject</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Client</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Status</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Type</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Project</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Agent</th>\n                      \n                    </tr>\n\n               {{ $json[\"data\"].map(item => `\n                <tr>\n                    <td style=\"border-bottom: 1px solid #ddd; padding: 8px;\"><a href=\"https://worksuite.cloodo.com/apps/tickets/all-tickets/${item.idTicket}\" style=\"color: #007bff; text-decoration: none;\">Ticket${item.numberTicket}</a></td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.subjectTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.nameClient}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.statusTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.typeTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.projectTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.agentName}</td>\n                </tr>\n                `).join('') }}\n                </table>\n\n                <p>Best regards,</p>\n                <p>Cms Admin</p>\n            </td>\n        </tr>\n    </table>\n</body>\n\n</html>\n"
            }
          ]
        },
        "options": {}
      },
      "id": "9312a3d1-ac68-4106-8b1a-b0a088a492fa",
      "name": "Send mail Reply Ticket3",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        6460,
        2280
      ]
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 2073353188,
          "mode": "list",
          "cachedResultName": "Chi",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=2073353188"
        },
        "options": {}
      },
      "id": "b36a9a7e-c30d-4285-bdd5-7d707c01d014",
      "name": "Chi2",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        4780,
        2300
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "aggregate": "aggregateAllItemData",
        "options": {}
      },
      "id": "af6d61c8-ab9b-4d7a-81b6-37339ecffc09",
      "name": "Aggregate8",
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        5640,
        3080
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.cloodo.com/mautic.php",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {}
          ]
        },
        "sendBody": true,
        "contentType": "multipart-form-data",
        "bodyParameters": {
          "parameters": [
            {
              "name": "email",
              "value": "={{ $json.data[0].agenEmail }}"
            },
            {
              "name": "uname",
              "value": "={{ $json.data[0].agentName }}"
            },
            {
              "name": "subject",
              "value": "=Closed Ticket Client No Replies"
            },
            {
              "name": "send_mail",
              "value": "cmsmart"
            },
            {
              "name": "email_id",
              "value": "109"
            },
            {
              "name": "content",
              "value": "=<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Ticket Closure Reminder</title>\n</head>\n\n<body style=\"font-family: Arial, sans-serif; color: #333; line-height: 1.6; margin: 0;\">\n    <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"background-color: #fff;\">\n        <!-- Content -->\n        <tr>\n            <td style=\"font-size: 14px; color: black\">\n                <p>Dear {{ $json.data[0].agentName }},</p>\n\n                <p>Here is a friendly reminder about closing tickets:</p>\n\n                <ul>\n                    <li>Tickets must be closed within 15 days of the customer not responding.</li>\n                    <li>If the ticket is not closed after 24 hours, points will be deducted from the CmsMart Admin account.</li>\n                </ul>\n\n                <p>Please ensure that all tickets are properly managed and closed within the specified time frame.</p>\n\n                <p>Thank you for your attention to this matter.</p>\n                <p>Here are the links to the tickets you need to close:</p>\n\n                <table width=\"100%\" cellpadding=\"5\" cellspacing=\"0\" style=\"border-collapse: collapse;\">\n                    <tr>\n                        <th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Ticket ID</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Subject</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Client</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Status</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Type</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Project</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Agent</th>\n                      \n                    </tr>\n\n               {{ $json[\"data\"].map(item => `\n                <tr>\n                    <td style=\"border-bottom: 1px solid #ddd; padding: 8px;\"><a href=\"https://worksuite.cloodo.com/apps/tickets/all-tickets/${item.idTicket}\" style=\"color: #007bff; text-decoration: none;\">Ticket${item.numberTicket}</a></td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.subjectTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.nameClient}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.statusTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.typeTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.projectTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.agentName}</td>\n                </tr>\n                `).join('') }}\n                \n\n                </table>\n\n                <p>Best regards,</p>\n                <p>Cms Admin</p>\n            </td>\n        </tr>\n    </table>\n</body>\n\n</html>\n"
            }
          ]
        },
        "options": {}
      },
      "id": "8741e64e-bbd1-4c3c-97ba-58b4ee2d3fe8",
      "name": "Send mail closed ticket4",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        6460,
        2840
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "a652141b-108c-48b9-801a-56a259585aaa",
              "leftValue": "={{ $json.lastRespone }}",
              "rightValue": "Agent",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "10ee0a67-4207-4fa3-b28d-280bc85e344e",
      "name": "Check Agent Reply4",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        5120,
        3340
      ]
    },
    {
      "parameters": {
        "aggregate": "aggregateAllItemData",
        "options": {}
      },
      "id": "0257218a-09e8-43db-b107-42314b37d80a",
      "name": "Aggregate9",
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        5680,
        3380
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.cloodo.com/mautic.php",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {}
          ]
        },
        "sendBody": true,
        "contentType": "multipart-form-data",
        "bodyParameters": {
          "parameters": [
            {
              "name": "email",
              "value": "={{ $json.data[0].agenEmail }}"
            },
            {
              "name": "uname",
              "value": "={{ $json.data[0].agentName }}"
            },
            {
              "name": "subject",
              "value": "=Respond to tickets when customers respond"
            },
            {
              "name": "send_mail",
              "value": "cmsmart"
            },
            {
              "name": "email_id",
              "value": "109"
            },
            {
              "name": "content",
              "value": "=<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Ticket Closure Reminder</title>\n</head>\n\n<body style=\"font-family: Arial, sans-serif; color: #333; line-height: 1.6; margin: 0;\">\n    <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"background-color: #fff;\">\n        <!-- Content -->\n        <tr>\n            <td style=\"font-size: 14px; color: black\">\n                <p>Dear {{ $json.data[0].agentName }},</p>\n<p>I hope this message finds you well.</p>\n<p>This is a friendly reminder to please ensure that all customer tickets are responded to in a timely manner. Once a customer responds, it is important to follow up within 24 hours. Failure to do so will result in points being deducted from the CmsMart Admin system.</p>\n\n<p>Key points to remember:</p>\n\n<ul>\n<li>Ensure timely responses to customer feedback.</li>\n<li>Reply within 24 hours to avoid penalties.</li>\n<li>Points will be deducted from the CmsMart Admin for slow responses.</li>\n</ul>\n\n<p>We appreciate your cooperation and concern for this issue.</p>\n\n<p>Here is the ticket you need to respond to:</p>\n\n                <table width=\"100%\" cellpadding=\"5\" cellspacing=\"0\" style=\"border-collapse: collapse;\">\n                    <tr>\n                        <th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Ticket ID</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Subject</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Client</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Status</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Type</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Project</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Agent</th>\n                      \n                    </tr>\n\n               {{ $json[\"data\"].map(item => `\n                <tr>\n                    <td style=\"border-bottom: 1px solid #ddd; padding: 8px;\"><a href=\"https://worksuite.cloodo.com/apps/tickets/all-tickets/${item.idTicket}\" style=\"color: #007bff; text-decoration: none;\">Ticket${item.numberTicket}</a></td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.subjectTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.nameClient}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.statusTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.typeTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.projectTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.agentName}</td>\n                </tr>\n                `).join('') }}\n                </table>\n\n                <p>Best regards,</p>\n                <p>Cms Admin</p>\n            </td>\n        </tr>\n    </table>\n</body>\n\n</html>\n"
            }
          ]
        },
        "options": {}
      },
      "id": "115ec530-e170-407e-931f-8f19e3bfa840",
      "name": "Send mail Reply Ticket4",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        6460,
        3260
      ]
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 548962283,
          "mode": "list",
          "cachedResultName": "Chau",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=548962283"
        },
        "options": {}
      },
      "id": "55568a65-79b5-4ed3-8e38-364f19dc7138",
      "name": "Chau2",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        4820,
        3340
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "fieldToSplitOut": "data",
        "options": {}
      },
      "id": "a7d15917-bf5d-4f69-bd0a-41bd42435a58",
      "name": "Item Lists1",
      "type": "n8n-nodes-base.itemLists",
      "typeVersion": 3,
      "position": [
        760,
        1460
      ]
    },
    {
      "parameters": {
        "url": "https://erp-amz.cloodo.com/v4/tickets",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "cloodoApi",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "limit",
              "value": "100"
            },
            {
              "name": "date_from",
              "value": "2024-01-01"
            },
            {
              "name": "date_to",
              "value": "2025-01-30"
            },
            {
              "name": "sort",
              "value": "desc"
            },
            {
              "name": "status",
              "value": "pending"
            },
            {
              "name": "cursor",
              "value": "={{ $json.meta.next_cursor }}"
            }
          ]
        },
        "options": {}
      },
      "id": "09083440-a35b-41cb-8543-3509b2e2fe12",
      "name": "Ticket Pending1",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        460,
        1460
      ],
      "credentials": {
        "cloodoApi": {
          "id": "nP7U7wKTbfdSeafq",
          "name": "Cmsmart Worksuite account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $json.meta.next_cursor }}",
              "operation": "isNotEmpty"
            }
          ]
        }
      },
      "id": "db0d2019-df63-44b0-88ad-460c1461e399",
      "name": "IF",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        660,
        1640
      ]
    },
    {
      "parameters": {
        "url": "=https://erp-amz.cloodo.com/v4/tickets/{{ $json.data.id }}/replies",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "cloodoApi",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "limit",
              "value": "10"
            }
          ]
        },
        "options": {}
      },
      "id": "bd4181d9-974d-4d18-85f2-ace1656f45c2",
      "name": "Get replies1",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1280,
        1460
      ],
      "credentials": {
        "cloodoApi": {
          "id": "nP7U7wKTbfdSeafq",
          "name": "Cmsmart Worksuite account"
        }
      }
    },
    {
      "parameters": {
        "resource": "engagement",
        "ID": "={{ $json.id }}",
        "requestOptions": {}
      },
      "id": "31faecb2-7a62-4836-9a0d-7f5e242ebed8",
      "name": "Get Ticket1",
      "type": "@cloodo/n8n-nodes-cloodo-crm.CloodoLeads",
      "typeVersion": 1,
      "position": [
        1020,
        1460
      ],
      "credentials": {
        "cloodoApi": {
          "id": "nP7U7wKTbfdSeafq",
          "name": "Cmsmart Worksuite account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "796ab7b7-b19f-4a08-938e-16c2e40a9325",
              "name": "replies",
              "value": "={{ $json.data }}",
              "type": "array"
            },
            {
              "id": "377ffdcb-97b2-4ab7-b211-3376a7437855",
              "name": "ticket",
              "value": "={{ $('Get Ticket1').item.json.data }}",
              "type": "object"
            }
          ]
        },
        "options": {}
      },
      "id": "5dac1e1d-fdb2-4cdd-8597-3042e2628663",
      "name": "Replies and Ticket1",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1580,
        1460
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "6dc6657f-526c-4633-a42e-591e9f2e964d",
              "leftValue": "={{ $json.replies[0].user.id }}",
              "rightValue": "={{ $json.ticket.idClient }}",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "c09d6b3f-0db5-4514-be90-3ff08c961d7e",
      "name": "Requester Replies1",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        2180,
        1460
      ]
    },
    {
      "parameters": {
        "jsCode": "const currentDate = new Date();  // Ngày hiện tại\nconst daysLimit = 24;  // Số ngày bạn muốn so sánh\nconst filteredItems = [];\n\n// Lặp qua từng item trong $input.all() và kiểm tra update_at\nfor (const item of $input.all()) {\n  const updateDate = new Date(item?.json?.replies[0]?.updated_at);  // Ngày cập nhật của item\n  const diffTime = currentDate - updateDate; // Tính sự khác biệt giữa ngày hiện tại và ngày update_at\n  const diffDays = diffTime / (1000 * 3600); // Chuyển từ milliseconds sang ngày\n  const idTicket = item?.json?.ticket?.id\n  const idClient = item?.json?.ticket?.requester?.id\n  const clientTicket = item?.json?.ticket?.requester?.name\n  const numberTicket = item?.json?.ticket?.ticket_number\n  const subjectTicket = item?.json?.ticket?.subject\n  const statusTicket = item?.json?.ticket?.status\n  const typeTicket = item?.json?.ticket?.type?.type\n  const projectTicket = item?.json?.ticket?.projects?.name\n  const agentNameTicket = item?.json?.ticket?.agent?.user?.name\n  const agentEmailTicket = item?.json?.ticket?.agent?.user?.email\n  \n  if (diffDays > daysLimit) {\n    item.json.ticket = {idTicket: idTicket,\n                        idClient: idClient,\n                        nameClient: clientTicket,\n                        numberTicket: numberTicket,\n                        subjectTicket: subjectTicket,\n                        statusTicket: statusTicket,\n                        typeTicket: typeTicket,\n                        projectTicket: projectTicket,\n                        agentName: agentNameTicket,\n                        agentEmail: agentEmailTicket\n                       }\n    filteredItems.push(item);  // Thêm item vào danh sách nếu update_at sau 15 ngày\n  }\n}\n\nreturn filteredItems;  // Trả về các item thỏa mãn điều kiện\n"
      },
      "id": "3b3a9252-f759-41c5-a5be-e769628fe311",
      "name": "Ticket 24h",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1900,
        1460
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.cloodo.com/mautic.php",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {}
          ]
        },
        "sendBody": true,
        "contentType": "multipart-form-data",
        "bodyParameters": {
          "parameters": [
            {
              "name": "email",
              "value": "=huy.nq@netbasejsc.com"
            },
            {
              "name": "uname",
              "value": "={{ $json.data[0].agentName }}"
            },
            {
              "name": "subject",
              "value": "=Respond to tickets when customers respond"
            },
            {
              "name": "send_mail",
              "value": "cmsmart"
            },
            {
              "name": "email_id",
              "value": "111"
            },
            {
              "name": "content",
              "value": "=<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Ticket Closure Reminder</title>\n</head>\n\n<body style=\"font-family: Arial, sans-serif; color: #333; line-height: 1.6; margin: 0;\">\n    <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"background-color: #fff;\">\n        <!-- Content -->\n        <tr>\n            <td style=\"font-size: 14px; color: black\">\n                <p>Dear {{ $json.data[0].agentName }},</p>\n<p>I hope this message finds you well.</p>\n<p>This is a friendly reminder to please ensure that all customer tickets are responded to in a timely manner. Once a customer responds, it is important to follow up within 24 hours. Failure to do so will result in points being deducted from the CmsMart Admin system.</p>\n\n<p>Key points to remember:</p>\n\n<ul>\n<li>Ensure timely responses to customer feedback.</li>\n<li>Reply within 24 hours to avoid penalties.</li>\n<li>Points will be deducted from the CmsMart Admin for slow responses.</li>\n</ul>\n\n<p>We appreciate your cooperation and concern for this issue.</p>\n\n<p>Here is the ticket you need to respond to:</p>\n\n                <table width=\"100%\" cellpadding=\"5\" cellspacing=\"0\" style=\"border-collapse: collapse;\">\n                    <tr>\n                        <th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Ticket ID</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Subject</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Client</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Status</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Type</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Project</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Agent</th>\n                      \n                    </tr>\n\n               {{ $json[\"data\"].map(item => `\n                <tr>\n                    <td style=\"border-bottom: 1px solid #ddd; padding: 8px;\"><a href=\"https://worksuite.cloodo.com/apps/tickets/all-tickets/${item.idTicket}\" style=\"color: #007bff; text-decoration: none;\">Ticket${item.numberTicket}</a></td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.subjectTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.nameClient}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.statusTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.typeTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.projectTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.agentName}</td>\n                </tr>\n                `).join('') }}\n                </table>\n\n                <p>Best regards,</p>\n                <p>Cms Admin</p>\n            </td>\n        </tr>\n    </table>\n</body>\n\n</html>\n"
            }
          ]
        },
        "options": {}
      },
      "id": "edf6e226-0818-4cb0-a9f7-28ecf29a364e",
      "name": "Send mail Reply Ticket5",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        6400,
        1480
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.cloodo.com/mautic.php",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {}
          ]
        },
        "sendBody": true,
        "contentType": "multipart-form-data",
        "bodyParameters": {
          "parameters": [
            {
              "name": "email",
              "value": "=huy.nq@netbasejsc.com"
            },
            {
              "name": "uname",
              "value": "={{ $json.data[0].agentName }}"
            },
            {
              "name": "subject",
              "value": "=Respond to tickets when customers respond"
            },
            {
              "name": "send_mail",
              "value": "cmsmart"
            },
            {
              "name": "email_id",
              "value": "111"
            },
            {
              "name": "content",
              "value": "=<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Ticket Closure Reminder</title>\n</head>\n\n<body style=\"font-family: Arial, sans-serif; color: #333; line-height: 1.6; margin: 0;\">\n    <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"background-color: #fff;\">\n        <!-- Content -->\n        <tr>\n            <td style=\"font-size: 14px; color: black\">\n                <p>Dear {{ $json.data[0].agentName }},</p>\n<p>I hope this message finds you well.</p>\n<p>This is a friendly reminder to please ensure that all customer tickets are responded to in a timely manner. Once a customer responds, it is important to follow up within 24 hours. Failure to do so will result in points being deducted from the CmsMart Admin system.</p>\n\n<p>Key points to remember:</p>\n\n<ul>\n<li>Ensure timely responses to customer feedback.</li>\n<li>Reply within 24 hours to avoid penalties.</li>\n<li>Points will be deducted from the CmsMart Admin for slow responses.</li>\n</ul>\n\n<p>We appreciate your cooperation and concern for this issue.</p>\n\n<p>Here is the ticket you need to respond to:</p>\n\n                <table width=\"100%\" cellpadding=\"5\" cellspacing=\"0\" style=\"border-collapse: collapse;\">\n                    <tr>\n                        <th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Ticket ID</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Subject</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Client</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Status</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Type</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Project</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Agent</th>\n                      \n                    </tr>\n\n               {{ $json[\"data\"].map(item => `\n                <tr>\n                    <td style=\"border-bottom: 1px solid #ddd; padding: 8px;\"><a href=\"https://worksuite.cloodo.com/apps/tickets/all-tickets/${item.idTicket}\" style=\"color: #007bff; text-decoration: none;\">Ticket${item.numberTicket}</a></td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.subjectTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.nameClient}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.statusTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.typeTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.projectTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.agentName}</td>\n                </tr>\n                `).join('') }}\n                </table>\n\n                <p>Best regards,</p>\n                <p>Cms Admin</p>\n            </td>\n        </tr>\n    </table>\n</body>\n\n</html>\n"
            }
          ]
        },
        "options": {}
      },
      "id": "13c49734-e987-41be-9d61-aea00cf99f63",
      "name": "Send mail Reply Ticket7",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        6520,
        380
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.cloodo.com/mautic.php",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {}
          ]
        },
        "sendBody": true,
        "contentType": "multipart-form-data",
        "bodyParameters": {
          "parameters": [
            {
              "name": "email",
              "value": "=huy.pn@netbasejsc.com"
            },
            {
              "name": "uname",
              "value": "={{ $json.data[0].agentName }}"
            },
            {
              "name": "subject",
              "value": "=Respond to tickets when customers respond"
            },
            {
              "name": "send_mail",
              "value": "cmsmart"
            },
            {
              "name": "email_id",
              "value": "111"
            },
            {
              "name": "content",
              "value": "=<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Ticket Closure Reminder</title>\n</head>\n\n<body style=\"font-family: Arial, sans-serif; color: #333; line-height: 1.6; margin: 0;\">\n    <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"background-color: #fff;\">\n        <!-- Content -->\n        <tr>\n            <td style=\"font-size: 14px; color: black\">\n                <p>Dear {{ $json.data[0].agentName }},</p>\n<p>I hope this message finds you well.</p>\n<p>This is a friendly reminder to please ensure that all customer tickets are responded to in a timely manner. Once a customer responds, it is important to follow up within 24 hours. Failure to do so will result in points being deducted from the CmsMart Admin system.</p>\n\n<p>Key points to remember:</p>\n\n<ul>\n<li>Ensure timely responses to customer feedback.</li>\n<li>Reply within 24 hours to avoid penalties.</li>\n<li>Points will be deducted from the CmsMart Admin for slow responses.</li>\n</ul>\n\n<p>We appreciate your cooperation and concern for this issue.</p>\n\n<p>Here is the ticket you need to respond to:</p>\n\n                <table width=\"100%\" cellpadding=\"5\" cellspacing=\"0\" style=\"border-collapse: collapse;\">\n                    <tr>\n                        <th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Ticket ID</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Subject</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Client</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Status</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Type</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Project</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Agent</th>\n                      \n                    </tr>\n\n               {{ $json[\"data\"].map(item => `\n                <tr>\n                    <td style=\"border-bottom: 1px solid #ddd; padding: 8px;\"><a href=\"https://worksuite.cloodo.com/apps/tickets/all-tickets/${item.idTicket}\" style=\"color: #007bff; text-decoration: none;\">Ticket${item.numberTicket}</a></td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.subjectTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.nameClient}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.statusTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.typeTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.projectTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.agentName}</td>\n                </tr>\n                `).join('') }}\n                </table>\n\n                <p>Best regards,</p>\n                <p>Cms Admin</p>\n            </td>\n        </tr>\n    </table>\n</body>\n\n</html>\n"
            }
          ]
        },
        "options": {}
      },
      "id": "e68f3a99-48c2-4e31-8ba8-350585cd7bc0",
      "name": "Send mail Reply Ticket8",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        6460,
        2520
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.cloodo.com/mautic.php",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {}
          ]
        },
        "sendBody": true,
        "contentType": "multipart-form-data",
        "bodyParameters": {
          "parameters": [
            {
              "name": "email",
              "value": "=nguyenduccanh1523@gmail.com"
            },
            {
              "name": "uname",
              "value": "={{ $json.data[0].agentName }}"
            },
            {
              "name": "subject",
              "value": "=Respond to tickets when customers respond"
            },
            {
              "name": "send_mail",
              "value": "cmsmart"
            },
            {
              "name": "email_id",
              "value": "111"
            },
            {
              "name": "content",
              "value": "=<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Ticket Closure Reminder</title>\n</head>\n\n<body style=\"font-family: Arial, sans-serif; color: #333; line-height: 1.6; margin: 0;\">\n    <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"background-color: #fff;\">\n        <!-- Content -->\n        <tr>\n            <td style=\"font-size: 14px; color: black\">\n                <p>Dear {{ $json.data[0].agentName }},</p>\n<p>I hope this message finds you well.</p>\n<p>This is a friendly reminder to please ensure that all customer tickets are responded to in a timely manner. Once a customer responds, it is important to follow up within 24 hours. Failure to do so will result in points being deducted from the CmsMart Admin system.</p>\n\n<p>Key points to remember:</p>\n\n<ul>\n<li>Ensure timely responses to customer feedback.</li>\n<li>Reply within 24 hours to avoid penalties.</li>\n<li>Points will be deducted from the CmsMart Admin for slow responses.</li>\n</ul>\n\n<p>We appreciate your cooperation and concern for this issue.</p>\n\n<p>Here is the ticket you need to respond to:</p>\n\n                <table width=\"100%\" cellpadding=\"5\" cellspacing=\"0\" style=\"border-collapse: collapse;\">\n                    <tr>\n                        <th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Ticket ID</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Subject</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Client</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Status</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Type</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Project</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Agent</th>\n                      \n                    </tr>\n\n               {{ $json[\"data\"].map(item => `\n                <tr>\n                    <td style=\"border-bottom: 1px solid #ddd; padding: 8px;\"><a href=\"https://worksuite.cloodo.com/apps/tickets/all-tickets/${item.idTicket}\" style=\"color: #007bff; text-decoration: none;\">Ticket${item.numberTicket}</a></td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.subjectTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.nameClient}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.statusTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.typeTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.projectTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.agentName}</td>\n                </tr>\n                `).join('') }}\n                </table>\n\n                <p>Best regards,</p>\n                <p>Cms Admin</p>\n            </td>\n        </tr>\n    </table>\n</body>\n\n</html>\n"
            }
          ]
        },
        "options": {}
      },
      "id": "14174bd5-579d-4839-b955-923677848cb8",
      "name": "Send mail Reply Ticket9",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        6480,
        3480
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.cloodo.com/mautic.php",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {}
          ]
        },
        "sendBody": true,
        "contentType": "multipart-form-data",
        "bodyParameters": {
          "parameters": [
            {
              "name": "email",
              "value": "=huy.nq@netbasejsc.com"
            },
            {
              "name": "uname",
              "value": "={{ $json.data[0].agentName }}"
            },
            {
              "name": "subject",
              "value": "=Closed Ticket Client No Replies"
            },
            {
              "name": "send_mail",
              "value": "cmsmart"
            },
            {
              "name": "email_id",
              "value": "111"
            },
            {
              "name": "content",
              "value": "=<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Ticket Closure Reminder</title>\n</head>\n\n<body style=\"font-family: Arial, sans-serif; color: #333; line-height: 1.6; margin: 0;\">\n    <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"background-color: #fff;\">\n        <!-- Content -->\n        <tr>\n            <td style=\"font-size: 14px; color: black\">\n                <p>Dear {{ $json.data[0].agentName }},</p>\n\n                <p>Here is a friendly reminder about closing tickets:</p>\n\n                <ul>\n                    <li>Tickets must be closed within 15 days of the customer not responding.</li>\n                    <li>If the ticket is not closed after 24 hours, points will be deducted from the CmsMart Admin account.</li>\n                </ul>\n\n                <p>Please ensure that all tickets are properly managed and closed within the specified time frame.</p>\n\n                <p>Thank you for your attention to this matter.</p>\n                <p>Here are the links to the tickets you need to close:</p>\n\n                <table width=\"100%\" cellpadding=\"5\" cellspacing=\"0\" style=\"border-collapse: collapse;\">\n                    <tr>\n                        <th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Ticket ID</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Subject</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Client</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Status</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Type</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Project</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Agent</th>\n                      \n                    </tr>\n\n               {{ $json[\"data\"].map(item => `\n                <tr>\n                    <td style=\"border-bottom: 1px solid #ddd; padding: 8px;\"><a href=\"https://worksuite.cloodo.com/apps/tickets/all-tickets/${item.idTicket}\" style=\"color: #007bff; text-decoration: none;\">Ticket${item.numberTicket}</a></td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.subjectTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.nameClient}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.statusTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.typeTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.projectTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.agentName}</td>\n                </tr>\n                `).join('') }}\n                \n\n                </table>\n\n                <p>Best regards,</p>\n                <p>Cms Admin</p>\n            </td>\n        </tr>\n    </table>\n</body>\n\n</html>\n"
            }
          ]
        },
        "options": {}
      },
      "id": "6903afa5-34b0-4c8e-bdb7-8785a598ef3c",
      "name": "Send mail closed ticket5",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        6460,
        3060
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.cloodo.com/mautic.php",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {}
          ]
        },
        "sendBody": true,
        "contentType": "multipart-form-data",
        "bodyParameters": {
          "parameters": [
            {
              "name": "email",
              "value": "=huy.nq@netbasejsc.com"
            },
            {
              "name": "uname",
              "value": "={{ $json.data[0].agentName }}"
            },
            {
              "name": "subject",
              "value": "=Closed Ticket Client No Replies"
            },
            {
              "name": "send_mail",
              "value": "cmsmart"
            },
            {
              "name": "email_id",
              "value": "111"
            },
            {
              "name": "content",
              "value": "=<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Ticket Closure Reminder</title>\n</head>\n\n<body style=\"font-family: Arial, sans-serif; color: #333; line-height: 1.6; margin: 0;\">\n    <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"background-color: #fff;\">\n        <!-- Content -->\n        <tr>\n            <td style=\"font-size: 14px; color: black\">\n                <p>Dear {{ $json.data[0].agentName }},</p>\n\n                <p>Here is a friendly reminder about closing tickets:</p>\n\n                <ul>\n                    <li>Tickets must be closed within 15 days of the customer not responding.</li>\n                    <li>If the ticket is not closed after 24 hours, points will be deducted from the CmsMart Admin account.</li>\n                </ul>\n\n                <p>Please ensure that all tickets are properly managed and closed within the specified time frame.</p>\n\n                <p>Thank you for your attention to this matter.</p>\n                <p>Here are the links to the tickets you need to close:</p>\n\n                <table width=\"100%\" cellpadding=\"5\" cellspacing=\"0\" style=\"border-collapse: collapse;\">\n                    <tr>\n                        <th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Ticket ID</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Subject</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Client</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Status</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Type</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Project</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Agent</th>\n                      \n                    </tr>\n\n               {{ $json[\"data\"].map(item => `\n                <tr>\n                    <td style=\"border-bottom: 1px solid #ddd; padding: 8px;\"><a href=\"https://worksuite.cloodo.com/apps/tickets/all-tickets/${item.idTicket}\" style=\"color: #007bff; text-decoration: none;\">Ticket${item.numberTicket}</a></td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.subjectTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.nameClient}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.statusTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.typeTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.projectTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.agentName}</td>\n                </tr>\n                `).join('') }}\n                \n\n                </table>\n\n                <p>Best regards,</p>\n                <p>Cms Admin</p>\n            </td>\n        </tr>\n    </table>\n</body>\n\n</html>\n"
            }
          ]
        },
        "options": {}
      },
      "id": "5aec8363-5dcd-49cf-b66d-c6a51df6ad21",
      "name": "Send mail closed ticket6",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        6480,
        2040
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.cloodo.com/mautic.php",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {}
          ]
        },
        "sendBody": true,
        "contentType": "multipart-form-data",
        "bodyParameters": {
          "parameters": [
            {
              "name": "email",
              "value": "=huy.nq@netbasejsc.com"
            },
            {
              "name": "uname",
              "value": "={{ $json.data[0].agentName }}"
            },
            {
              "name": "subject",
              "value": "=Closed Ticket Client No Replies"
            },
            {
              "name": "send_mail",
              "value": "cmsmart"
            },
            {
              "name": "email_id",
              "value": "111"
            },
            {
              "name": "content",
              "value": "=<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Ticket Closure Reminder</title>\n</head>\n\n<body style=\"font-family: Arial, sans-serif; color: #333; line-height: 1.6; margin: 0;\">\n    <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"background-color: #fff;\">\n        <!-- Content -->\n        <tr>\n            <td style=\"font-size: 14px; color: black\">\n                <p>Dear {{ $json.data[0].agentName }},</p>\n\n                <p>Here is a friendly reminder about closing tickets:</p>\n\n                <ul>\n                    <li>Tickets must be closed within 15 days of the customer not responding.</li>\n                    <li>If the ticket is not closed after 24 hours, points will be deducted from the CmsMart Admin account.</li>\n                </ul>\n\n                <p>Please ensure that all tickets are properly managed and closed within the specified time frame.</p>\n\n                <p>Thank you for your attention to this matter.</p>\n                <p>Here are the links to the tickets you need to close:</p>\n\n                <table width=\"100%\" cellpadding=\"5\" cellspacing=\"0\" style=\"border-collapse: collapse;\">\n                    <tr>\n                        <th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Ticket ID</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Subject</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Client</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Status</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Type</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Project</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Agent</th>\n                      \n                    </tr>\n\n               {{ $json[\"data\"].map(item => `\n                <tr>\n                    <td style=\"border-bottom: 1px solid #ddd; padding: 8px;\"><a href=\"https://worksuite.cloodo.com/apps/tickets/all-tickets/${item.idTicket}\" style=\"color: #007bff; text-decoration: none;\">Ticket${item.numberTicket}</a></td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.subjectTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.nameClient}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.statusTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.typeTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.projectTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.agentName}</td>\n                </tr>\n                `).join('') }}\n                \n\n                </table>\n\n                <p>Best regards,</p>\n                <p>Cms Admin</p>\n            </td>\n        </tr>\n    </table>\n</body>\n\n</html>\n"
            }
          ]
        },
        "options": {}
      },
      "id": "e5405f34-53ae-4d14-ac95-6c75ee31ef7d",
      "name": "Send mail closed ticket7",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        6580,
        -60
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.cloodo.com/mautic.php",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {}
          ]
        },
        "sendBody": true,
        "contentType": "multipart-form-data",
        "bodyParameters": {
          "parameters": [
            {
              "name": "email",
              "value": "=nguyenduccanh1523@gmail.com"
            },
            {
              "name": "uname",
              "value": "={{ $json.data[0].agentName }}"
            },
            {
              "name": "subject",
              "value": "=Closed Ticket Client No Replies"
            },
            {
              "name": "send_mail",
              "value": "cmsmart"
            },
            {
              "name": "email_id",
              "value": "111"
            },
            {
              "name": "content",
              "value": "=<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Ticket Closure Reminder</title>\n</head>\n\n<body style=\"font-family: Arial, sans-serif; color: #333; line-height: 1.6; margin: 0;\">\n    <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"background-color: #fff;\">\n        <!-- Content -->\n        <tr>\n            <td style=\"font-size: 14px; color: black\">\n                <p>Dear {{ $json.data[0].agentName }},</p>\n\n                <p>Here is a friendly reminder about closing tickets:</p>\n\n                <ul>\n                    <li>Tickets must be closed within 15 days of the customer not responding.</li>\n                    <li>If the ticket is not closed after 24 hours, points will be deducted from the CmsMart Admin account.</li>\n                </ul>\n\n                <p>Please ensure that all tickets are properly managed and closed within the specified time frame.</p>\n\n                <p>Thank you for your attention to this matter.</p>\n                <p>Here are the links to the tickets you need to close:</p>\n\n                <table width=\"100%\" cellpadding=\"5\" cellspacing=\"0\" style=\"border-collapse: collapse;\">\n                    <tr>\n                        <th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Ticket ID</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Subject</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Client</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Status</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Type</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Project</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Agent</th>\n                      \n                    </tr>\n\n               {{ $json[\"data\"].map(item => `\n                <tr>\n                    <td style=\"border-bottom: 1px solid #ddd; padding: 8px;\"><a href=\"https://worksuite.cloodo.com/apps/tickets/all-tickets/${item.idTicket}\" style=\"color: #007bff; text-decoration: none;\">Ticket${item.numberTicket}</a></td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.subjectTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.nameClient}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.statusTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.typeTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.projectTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.agentName}</td>\n                </tr>\n                `).join('') }}\n                \n\n                </table>\n\n                <p>Best regards,</p>\n                <p>Cms Admin</p>\n            </td>\n        </tr>\n    </table>\n</body>\n\n</html>\n"
            }
          ]
        },
        "options": {}
      },
      "id": "fa581c7b-d999-430e-805b-657591374803",
      "name": "Send mail closed ticket8",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        6500,
        900
      ]
    },
    {
      "parameters": {
        "content": "## pa@netbasejsc.com",
        "height": 80,
        "width": 249.8830118585031,
        "color": 3
      },
      "id": "a97d9b57-1278-4d53-af5d-f4476dcce33f",
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        6944,
        1360
      ]
    },
    {
      "parameters": {
        "content": "## pa@netbasejsc.com",
        "height": 80,
        "width": 273.9151081861918,
        "color": 3
      },
      "id": "bab3bf03-2541-4473-b61d-38a6d769392b",
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        6900,
        900
      ]
    },
    {
      "parameters": {
        "content": "## pa@netbasejsc.com",
        "height": 80,
        "width": 273.9151081861918,
        "color": 3
      },
      "id": "f4532736-011c-44b1-b902-fb3210e65d0d",
      "name": "Sticky Note6",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        7000,
        1160
      ]
    },
    {
      "parameters": {
        "content": "## pa@netbasejsc.com",
        "height": 80,
        "width": 273.9151081861918,
        "color": 3
      },
      "id": "24611708-ad95-4786-8e93-3b8946a529db",
      "name": "Sticky Note7",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        7080,
        1600
      ]
    },
    {
      "parameters": {
        "content": "## pa@netbasejsc.com",
        "height": 80,
        "width": 273.9151081861918,
        "color": 3
      },
      "id": "b680604f-4151-41c6-a036-d43133bc468d",
      "name": "Sticky Note8",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        7080,
        2080
      ]
    },
    {
      "parameters": {
        "content": "## pa@netbasejsc.com",
        "height": 80,
        "width": 273.9151081861918,
        "color": 3
      },
      "id": "3d28ad17-afa3-4022-868e-aca95e33c041",
      "name": "Sticky Note9",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        7060,
        2520
      ]
    },
    {
      "parameters": {
        "content": "## pa@netbasejsc.com",
        "height": 80,
        "width": 273.9151081861918,
        "color": 3
      },
      "id": "7dac70e8-d0e3-46be-9d38-8c486a7a7de1",
      "name": "Sticky Note10",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        7040,
        3060
      ]
    },
    {
      "parameters": {
        "content": "## pa@netbasejsc.com",
        "height": 80,
        "width": 273.9151081861918,
        "color": 3
      },
      "id": "d8fe1a33-cc55-4804-982f-960ad714fc1d",
      "name": "Sticky Note11",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        7000,
        3520
      ]
    },
    {
      "parameters": {
        "fieldToSplitOut": "data",
        "options": {}
      },
      "id": "fee86ad8-8f96-4c5f-8621-bcc5b5e03945",
      "name": "Item Lists2",
      "type": "n8n-nodes-base.itemLists",
      "typeVersion": 3,
      "position": [
        1040,
        3500
      ]
    },
    {
      "parameters": {
        "url": "https://erp-amz.cloodo.com/v4/tickets",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "cloodoApi",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "limit",
              "value": "100"
            },
            {
              "name": "date_from",
              "value": "2024-01-01"
            },
            {
              "name": "date_to",
              "value": "2025-01-30"
            },
            {
              "name": "sort",
              "value": "desc"
            },
            {
              "name": "status",
              "value": "open"
            },
            {
              "name": "cursor",
              "value": "={{ $json.meta.next_cursor }}"
            }
          ]
        },
        "options": {}
      },
      "id": "375e0ba9-b040-4b7c-b882-b31bbfc0ed02",
      "name": "Ticket Pending2",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        740,
        3500
      ],
      "credentials": {
        "cloodoApi": {
          "id": "nP7U7wKTbfdSeafq",
          "name": "Cmsmart Worksuite account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $json.meta.next_cursor }}",
              "operation": "isNotEmpty"
            }
          ]
        }
      },
      "id": "cd587e79-bc00-45b8-a25f-ea75ea405ba6",
      "name": "IF7",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        940,
        3680
      ]
    },
    {
      "parameters": {
        "url": "=https://erp-amz.cloodo.com/v4/tickets/{{ $json.data.id }}/replies",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "cloodoApi",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "limit",
              "value": "10"
            }
          ]
        },
        "options": {}
      },
      "id": "72db15cf-35c3-48a2-b980-343c5612dea1",
      "name": "Get replies2",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1560,
        3500
      ],
      "credentials": {
        "cloodoApi": {
          "id": "nP7U7wKTbfdSeafq",
          "name": "Cmsmart Worksuite account"
        }
      }
    },
    {
      "parameters": {
        "resource": "engagement",
        "ID": "={{ $json.id }}",
        "requestOptions": {}
      },
      "id": "cfe18b04-1743-4955-aba4-77ce48c66245",
      "name": "Get Ticket2",
      "type": "@cloodo/n8n-nodes-cloodo-crm.CloodoLeads",
      "typeVersion": 1,
      "position": [
        1300,
        3500
      ],
      "credentials": {
        "cloodoApi": {
          "id": "nP7U7wKTbfdSeafq",
          "name": "Cmsmart Worksuite account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "796ab7b7-b19f-4a08-938e-16c2e40a9325",
              "name": "replies",
              "value": "={{ $json.data }}",
              "type": "array"
            },
            {
              "id": "377ffdcb-97b2-4ab7-b211-3376a7437855",
              "name": "ticket",
              "value": "={{ $('Get Ticket2').item.json.data }}",
              "type": "object"
            }
          ]
        },
        "options": {}
      },
      "id": "e4c25acd-d99e-4930-b865-196434ec38fb",
      "name": "Replies and Ticket2",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1800,
        3500
      ]
    },
    {
      "parameters": {
        "jsCode": "const currentDate = new Date();  // Ngày hiện tại\nconst daysLimit = 15;  // Số ngày bạn muốn so sánh\nconst filteredItems = [];\n\n// Lặp qua từng item trong $input.all() và kiểm tra update_at\nfor (const item of $input.all()) {\n  const updateDate = new Date(item?.json?.replies[0]?.updated_at);  // Ngày cập nhật của item\n  const diffTime = currentDate - updateDate; // Tính sự khác biệt giữa ngày hiện tại và ngày update_at\n  const diffDays = diffTime / (1000 * 3600 * 24); // Chuyển từ milliseconds sang ngày\n  const idTicket = item?.json?.ticket?.id\n  const idClient = item?.json?.ticket?.requester?.id\n  const clientTicket = item?.json?.ticket?.requester?.name\n  const numberTicket = item?.json?.ticket?.ticket_number\n  const subjectTicket = item?.json?.ticket?.subject\n  const statusTicket = item?.json?.ticket?.status\n  const typeTicket = item?.json?.ticket?.type?.type\n  const projectTicket = item?.json?.ticket?.projects?.name\n  const agentNameTicket = item?.json?.ticket?.agent?.user?.name\n  const agentEmailTicket = item?.json?.ticket?.agent?.user?.email\n  \n  if (diffDays > daysLimit) {\n    item.json.ticket = {idTicket: idTicket,\n                        idClient: idClient,\n                        nameClient: clientTicket,\n                        numberTicket: numberTicket,\n                        subjectTicket: subjectTicket,\n                        statusTicket: statusTicket,\n                        typeTicket: typeTicket,\n                        projectTicket: projectTicket,\n                        agentName: agentNameTicket,\n                        agentEmail: agentEmailTicket\n                       }\n    filteredItems.push(item);  // Thêm item vào danh sách nếu update_at sau 15 ngày\n  }\n}\n\nreturn filteredItems;  // Trả về các item thỏa mãn điều kiện\n"
      },
      "id": "aeb639ec-49ea-46bd-82d8-9afd2bf1b7b8",
      "name": "Ticket 15 days1",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2080,
        3500
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "6dc6657f-526c-4633-a42e-591e9f2e964d",
              "leftValue": "={{ $json.replies[0].user.id }}",
              "rightValue": "={{ $json.ticket.idClient }}",
              "operator": {
                "type": "string",
                "operation": "notEquals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "0e7dfc7d-94e1-4d5d-95e8-c16dcded4853",
      "name": "Requester Replies2",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        2400,
        3500
      ]
    },
    {
      "parameters": {
        "content": "## Trạng thái Agent rep cuối",
        "height": 80,
        "color": 3
      },
      "id": "100f3789-8b61-42a5-bc5b-bed08a16f1cd",
      "name": "Sticky Note12",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        2280,
        2720
      ]
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "=https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 1411577358,
          "mode": "list",
          "cachedResultName": "Vy",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=1411577358"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "lastRespone": "Agent",
            "idTicket": "={{ $json.ticket.idTicket }}",
            "numberTicket": "={{ $json.ticket.numberTicket }}",
            "agentName": "={{ $json.ticket.agentName }}",
            "agenEmail": "={{ $json.ticket.agentEmail }}",
            "nameClient": "={{ $json.ticket.nameClient }}",
            "subjectTicket": "={{ $json.ticket.subjectTicket }}",
            "statusTicket": "={{ $json.ticket.statusTicket }}",
            "typeTicket": "={{ $json.ticket.typeTicket }}",
            "projectTicket": "={{ $json.ticket.projectTicket }}"
          },
          "matchingColumns": [
            "idTicket"
          ],
          "schema": [
            {
              "id": "idTicket",
              "displayName": "idTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "numberTicket",
              "displayName": "numberTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agentName",
              "displayName": "agentName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agenEmail",
              "displayName": "agenEmail",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "lastRespone",
              "displayName": "lastRespone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nameClient",
              "displayName": "nameClient",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "subjectTicket",
              "displayName": "subjectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "statusTicket",
              "displayName": "statusTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "typeTicket",
              "displayName": "typeTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "projectTicket",
              "displayName": "projectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ]
        },
        "options": {}
      },
      "id": "2c019ae0-5e4c-47e1-abad-bee397a234d4",
      "name": "Vy2",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        3400,
        2300
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 1298489612,
          "mode": "list",
          "cachedResultName": "Phuong",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=1298489612"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "idTicket": "={{ $json.ticket.idTicket }}",
            "agenEmail": "={{ $json.ticket.agentEmail }}",
            "numberTicket": "={{ $json.ticket.numberTicket }}",
            "agentName": "={{ $json.ticket.agentName }}",
            "lastRespone": "Agent",
            "nameClient": "={{ $json.ticket.nameClient }}",
            "typeTicket": "={{ $json.ticket.typeTicket }}",
            "subjectTicket": "={{ $json.ticket.subjectTicket }}",
            "statusTicket": "={{ $json.ticket.statusTicket }}",
            "projectTicket": "={{ $json.ticket.projectTicket }}"
          },
          "matchingColumns": [
            "idTicket"
          ],
          "schema": [
            {
              "id": "idTicket",
              "displayName": "idTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "numberTicket",
              "displayName": "numberTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agentName",
              "displayName": "agentName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agenEmail",
              "displayName": "agenEmail",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "lastRespone",
              "displayName": "lastRespone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nameClient",
              "displayName": "nameClient",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "subjectTicket",
              "displayName": "subjectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "statusTicket",
              "displayName": "statusTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "typeTicket",
              "displayName": "typeTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "projectTicket",
              "displayName": "projectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ]
        },
        "options": {}
      },
      "id": "1af1402b-c3ea-4678-ba6c-ac73a24ac1cb",
      "name": "Phuong3",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        3400,
        2500
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 1289877611,
          "mode": "list",
          "cachedResultName": "Huy",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=1289877611"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "lastRespone": "Agent",
            "idTicket": "={{ $json.ticket.idTicket }}",
            "numberTicket": "={{ $json.ticket.numberTicket }}",
            "agentName": "={{ $json.ticket.agentName }}",
            "agenEmail": "={{ $json.ticket.agentEmail }}",
            "nameClient": "={{ $json.ticket.nameClient }}",
            "subjectTicket": "={{ $json.ticket.subjectTicket }}",
            "statusTicket": "={{ $json.ticket.statusTicket }}",
            "typeTicket": "={{ $json.ticket.typeTicket }}",
            "projectTicket": "={{ $json.ticket.projectTicket }}"
          },
          "matchingColumns": [
            "idTicket"
          ],
          "schema": [
            {
              "id": "idTicket",
              "displayName": "idTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "numberTicket",
              "displayName": "numberTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agentName",
              "displayName": "agentName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agenEmail",
              "displayName": "agenEmail",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "lastRespone",
              "displayName": "lastRespone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nameClient",
              "displayName": "nameClient",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "subjectTicket",
              "displayName": "subjectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "statusTicket",
              "displayName": "statusTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "typeTicket",
              "displayName": "typeTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "projectTicket",
              "displayName": "projectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ]
        },
        "options": {}
      },
      "id": "7028c014-a670-4ee0-a2b0-e3a69303cd9a",
      "name": "Huy3",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        3400,
        2700
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 2073353188,
          "mode": "list",
          "cachedResultName": "Chi",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=2073353188"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "idTicket": "={{ $json.ticket.idTicket }}",
            "numberTicket": "={{ $json.ticket.numberTicket }}",
            "agentName": "={{ $json.ticket.agentName }}",
            "agenEmail": "={{ $json.ticket.agentEmail }}",
            "lastRespone": "Agent",
            "nameClient": "={{ $json.ticket.nameClient }}",
            "subjectTicket": "={{ $json.ticket.subjectTicket }}",
            "statusTicket": "={{ $json.ticket.statusTicket }}",
            "typeTicket": "={{ $json.ticket.typeTicket }}",
            "projectTicket": "={{ $json.ticket.projectTicket }}"
          },
          "matchingColumns": [
            "idTicket"
          ],
          "schema": [
            {
              "id": "idTicket",
              "displayName": "idTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "numberTicket",
              "displayName": "numberTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agentName",
              "displayName": "agentName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agenEmail",
              "displayName": "agenEmail",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "lastRespone",
              "displayName": "lastRespone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nameClient",
              "displayName": "nameClient",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "subjectTicket",
              "displayName": "subjectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "statusTicket",
              "displayName": "statusTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "typeTicket",
              "displayName": "typeTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "projectTicket",
              "displayName": "projectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ]
        },
        "options": {}
      },
      "id": "245f2db9-6216-4b79-bd8e-9f13a78f99b3",
      "name": "Chi3",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        3420,
        2900
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 548962283,
          "mode": "list",
          "cachedResultName": "Chau",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=548962283"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "idTicket": "={{ $json.ticket.idTicket }}",
            "numberTicket": "={{ $json.ticket.numberTicket }}",
            "agentName": "={{ $json.ticket.agentName }}",
            "agenEmail": "={{ $json.ticket.agentEmail }}",
            "lastRespone": "Agent",
            "nameClient": "={{ $json.ticket.nameClient }}",
            "subjectTicket": "={{ $json.ticket.subjectTicket }}",
            "statusTicket": "={{ $json.ticket.statusTicket }}",
            "typeTicket": "={{ $json.ticket.typeTicket }}",
            "projectTicket": "={{ $json.ticket.projectTicket }}"
          },
          "matchingColumns": [
            "idTicket"
          ],
          "schema": [
            {
              "id": "idTicket",
              "displayName": "idTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "numberTicket",
              "displayName": "numberTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agentName",
              "displayName": "agentName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agenEmail",
              "displayName": "agenEmail",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "lastRespone",
              "displayName": "lastRespone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nameClient",
              "displayName": "nameClient",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "subjectTicket",
              "displayName": "subjectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "statusTicket",
              "displayName": "statusTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "typeTicket",
              "displayName": "typeTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "projectTicket",
              "displayName": "projectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ]
        },
        "options": {}
      },
      "id": "c070a573-1554-4ec0-bb34-389a47661252",
      "name": "Chau3",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        3420,
        3100
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "vy.dl@netbasejsc.com",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Vy"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "2a75c8aa-0ad9-4171-b215-7ddea1d07bd8",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "phuong.nt@netbasejsc.com",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Phuong"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "c01ba01c-39bd-41c7-82c6-cc9a876741d2",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "huy.nhd@netbasejsc.com",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Huy"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "7add08a8-dffe-44d7-b27c-73344547b865",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "chi.hu@netbasejsc.com",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Chi"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "1591f407-008f-43ca-b641-27b4d699617d",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "chau.lt@netbasejsc.com",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Chau"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "b33cb102-6f78-4a4d-9e88-5b2725a64274",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "",
                    "operator": {
                      "type": "string",
                      "operation": "notEmpty",
                      "singleValue": true
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "default"
            }
          ]
        },
        "options": {}
      },
      "id": "9280effe-b016-4afc-9bb8-5f5fe27ae9dc",
      "name": "Switch2",
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        2840,
        2820
      ]
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 1419606979,
          "mode": "list",
          "cachedResultName": "Default",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=1419606979"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "idTicket": "={{ $json.ticket.idTicket }}",
            "numberTicket": "={{ $json.ticket.numberTicket }}",
            "agentName": "={{ $json.ticket.agentName }}",
            "agenEmail": "={{ $json.ticket.agentEmail }}",
            "lastRespone": "Agent",
            "nameClient": "={{ $json.ticket.nameClient }}",
            "subjectTicket": "={{ $json.ticket.subjectTicket }}",
            "statusTicket": "={{ $json.ticket.statusTicket }}",
            "projectTicket": "={{ $json.ticket.projectTicket }}",
            "typeTicket": "={{ $json.ticket.typeTicket }}"
          },
          "matchingColumns": [
            "idTicket"
          ],
          "schema": [
            {
              "id": "idTicket",
              "displayName": "idTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "numberTicket",
              "displayName": "numberTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agentName",
              "displayName": "agentName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agenEmail",
              "displayName": "agenEmail",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "lastRespone",
              "displayName": "lastRespone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nameClient",
              "displayName": "nameClient",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "subjectTicket",
              "displayName": "subjectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "statusTicket",
              "displayName": "statusTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "typeTicket",
              "displayName": "typeTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "projectTicket",
              "displayName": "projectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ]
        },
        "options": {}
      },
      "id": "e73969fd-c80c-4455-988c-f76e644e222f",
      "name": "Default3",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        3440,
        3300
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "content": "## Trạng thái Client rep cuối",
        "height": 80,
        "color": 3
      },
      "id": "d69b0411-51f6-43af-8a1b-6cb26d4cc6ea",
      "name": "Sticky Note13",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        2760,
        3920
      ]
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 1411577358,
          "mode": "list",
          "cachedResultName": "Vy",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=1411577358"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "idTicket": "={{ $json.ticket.idTicket }}",
            "numberTicket": "={{ $json.ticket.numberTicket }}",
            "agentName": "={{ $json.ticket.agentName }}",
            "agenEmail": "={{ $json.ticket.agentEmail }}",
            "nameClient": "={{ $json.ticket.nameClient }}",
            "subjectTicket": "={{ $json.ticket.subjectTicket }}",
            "statusTicket": "={{ $json.ticket.statusTicket }}",
            "typeTicket": "={{ $json.ticket.typeTicket }}",
            "projectTicket": "={{ $json.ticket.projectTicket }}",
            "lastRespone": "Client"
          },
          "matchingColumns": [
            "idTicket"
          ],
          "schema": [
            {
              "id": "idTicket",
              "displayName": "idTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "numberTicket",
              "displayName": "numberTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agentName",
              "displayName": "agentName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agenEmail",
              "displayName": "agenEmail",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "lastRespone",
              "displayName": "lastRespone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nameClient",
              "displayName": "nameClient",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "subjectTicket",
              "displayName": "subjectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "statusTicket",
              "displayName": "statusTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "typeTicket",
              "displayName": "typeTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "projectTicket",
              "displayName": "projectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ]
        },
        "options": {}
      },
      "id": "21247683-13b4-4e78-bfc5-195d7f09dcc5",
      "name": "Vy3",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        3420,
        3620
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 1298489612,
          "mode": "list",
          "cachedResultName": "Phuong",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=1298489612"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "idTicket": "={{ $json.ticket.idTicket }}",
            "agenEmail": "={{ $json.ticket.agentEmail }}",
            "numberTicket": "={{ $json.ticket.numberTicket }}",
            "agentName": "={{ $json.ticket.agentName }}",
            "lastRespone": "Client",
            "nameClient": "={{ $json.ticket.nameClient }}",
            "typeTicket": "={{ $json.ticket.typeTicket }}",
            "subjectTicket": "={{ $json.ticket.subjectTicket }}",
            "statusTicket": "={{ $json.ticket.statusTicket }}",
            "projectTicket": "={{ $json.ticket.projectTicket }}"
          },
          "matchingColumns": [
            "idTicket"
          ],
          "schema": [
            {
              "id": "idTicket",
              "displayName": "idTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "numberTicket",
              "displayName": "numberTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agentName",
              "displayName": "agentName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agenEmail",
              "displayName": "agenEmail",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "lastRespone",
              "displayName": "lastRespone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nameClient",
              "displayName": "nameClient",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "subjectTicket",
              "displayName": "subjectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "statusTicket",
              "displayName": "statusTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "typeTicket",
              "displayName": "typeTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "projectTicket",
              "displayName": "projectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ]
        },
        "options": {}
      },
      "id": "25bbfb08-9c08-499d-86cb-58ed25b9b543",
      "name": "Phuong4",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        3420,
        3820
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 1289877611,
          "mode": "list",
          "cachedResultName": "Huy",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=1289877611"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "lastRespone": "Client",
            "idTicket": "={{ $json.ticket.idTicket }}",
            "numberTicket": "={{ $json.ticket.numberTicket }}",
            "agentName": "={{ $json.ticket.agentName }}",
            "agenEmail": "={{ $json.ticket.agentEmail }}",
            "nameClient": "={{ $json.ticket.nameClient }}",
            "subjectTicket": "={{ $json.ticket.subjectTicket }}",
            "statusTicket": "={{ $json.ticket.statusTicket }}",
            "typeTicket": "={{ $json.ticket.typeTicket }}",
            "projectTicket": "={{ $json.ticket.projectTicket }}"
          },
          "matchingColumns": [
            "idTicket"
          ],
          "schema": [
            {
              "id": "idTicket",
              "displayName": "idTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "numberTicket",
              "displayName": "numberTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agentName",
              "displayName": "agentName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agenEmail",
              "displayName": "agenEmail",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "lastRespone",
              "displayName": "lastRespone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nameClient",
              "displayName": "nameClient",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "subjectTicket",
              "displayName": "subjectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "statusTicket",
              "displayName": "statusTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "typeTicket",
              "displayName": "typeTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "projectTicket",
              "displayName": "projectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ]
        },
        "options": {}
      },
      "id": "e6d2e19a-dfe4-43b3-9f54-49f58a693c9f",
      "name": "Huy4",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        3420,
        4020
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 2073353188,
          "mode": "list",
          "cachedResultName": "Chi",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=2073353188"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "idTicket": "={{ $json.ticket.idTicket }}",
            "numberTicket": "={{ $json.ticket.numberTicket }}",
            "agentName": "={{ $json.ticket.agentName }}",
            "agenEmail": "={{ $json.ticket.agentEmail }}",
            "lastRespone": "Client",
            "nameClient": "={{ $json.ticket.nameClient }}",
            "subjectTicket": "={{ $json.ticket.subjectTicket }}",
            "statusTicket": "={{ $json.ticket.statusTicket }}",
            "typeTicket": "={{ $json.ticket.typeTicket }}",
            "projectTicket": "={{ $json.ticket.projectTicket }}"
          },
          "matchingColumns": [
            "idTicket"
          ],
          "schema": [
            {
              "id": "idTicket",
              "displayName": "idTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "numberTicket",
              "displayName": "numberTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agentName",
              "displayName": "agentName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agenEmail",
              "displayName": "agenEmail",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "lastRespone",
              "displayName": "lastRespone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nameClient",
              "displayName": "nameClient",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "subjectTicket",
              "displayName": "subjectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "statusTicket",
              "displayName": "statusTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "typeTicket",
              "displayName": "typeTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "projectTicket",
              "displayName": "projectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ]
        },
        "options": {}
      },
      "id": "7b4bc184-76f3-4cd2-9d11-c55a060a2946",
      "name": "Chi4",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        3420,
        4220
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 548962283,
          "mode": "list",
          "cachedResultName": "Chau",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=548962283"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "idTicket": "={{ $json.ticket.idTicket }}",
            "numberTicket": "={{ $json.ticket.numberTicket }}",
            "agentName": "={{ $json.ticket.agentName }}",
            "agenEmail": "={{ $json.ticket.agentEmail }}",
            "lastRespone": "Client",
            "nameClient": "={{ $json.ticket.nameClient }}",
            "subjectTicket": "={{ $json.ticket.subjectTicket }}",
            "statusTicket": "={{ $json.ticket.statusTicket }}",
            "typeTicket": "={{ $json.ticket.typeTicket }}",
            "projectTicket": "={{ $json.ticket.projectTicket }}"
          },
          "matchingColumns": [
            "idTicket"
          ],
          "schema": [
            {
              "id": "idTicket",
              "displayName": "idTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "numberTicket",
              "displayName": "numberTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agentName",
              "displayName": "agentName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agenEmail",
              "displayName": "agenEmail",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "lastRespone",
              "displayName": "lastRespone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nameClient",
              "displayName": "nameClient",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "subjectTicket",
              "displayName": "subjectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "statusTicket",
              "displayName": "statusTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "typeTicket",
              "displayName": "typeTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "projectTicket",
              "displayName": "projectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ]
        },
        "options": {}
      },
      "id": "e813c95a-1775-4045-b245-49e636901fb0",
      "name": "Chau4",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        3420,
        4420
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 1419606979,
          "mode": "list",
          "cachedResultName": "Default",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=1419606979"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "idTicket": "={{ $json.ticket.idTicket }}",
            "numberTicket": "={{ $json.ticket.numberTicket }}",
            "agentName": "={{ $json.ticket.agentName }}",
            "agenEmail": "={{ $json.ticket.agentEmail }}",
            "lastRespone": "Client",
            "nameClient": "={{ $json.ticket.nameClient }}",
            "subjectTicket": "={{ $json.ticket.subjectTicket }}",
            "statusTicket": "={{ $json.ticket.statusTicket }}",
            "projectTicket": "={{ $json.ticket.projectTicket }}",
            "typeTicket": "={{ $json.ticket.typeTicket }}"
          },
          "matchingColumns": [
            "idTicket"
          ],
          "schema": [
            {
              "id": "idTicket",
              "displayName": "idTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "numberTicket",
              "displayName": "numberTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agentName",
              "displayName": "agentName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agenEmail",
              "displayName": "agenEmail",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "lastRespone",
              "displayName": "lastRespone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nameClient",
              "displayName": "nameClient",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "subjectTicket",
              "displayName": "subjectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "statusTicket",
              "displayName": "statusTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "typeTicket",
              "displayName": "typeTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "projectTicket",
              "displayName": "projectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ]
        },
        "options": {}
      },
      "id": "6bbcd423-4119-4b58-a137-9e2186fbfded",
      "name": "Default4",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        3420,
        4620
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "fieldToSplitOut": "data",
        "options": {}
      },
      "id": "1449a7ad-1eb8-4944-b0b0-f358cf895705",
      "name": "Item Lists3",
      "type": "n8n-nodes-base.itemLists",
      "typeVersion": 3,
      "position": [
        940,
        4240
      ]
    },
    {
      "parameters": {
        "url": "https://erp-amz.cloodo.com/v4/tickets",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "cloodoApi",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "limit",
              "value": "100"
            },
            {
              "name": "date_from",
              "value": "2024-01-01"
            },
            {
              "name": "date_to",
              "value": "2025-01-30"
            },
            {
              "name": "sort",
              "value": "desc"
            },
            {
              "name": "status",
              "value": "open"
            },
            {
              "name": "cursor",
              "value": "={{ $json.meta.next_cursor }}"
            }
          ]
        },
        "options": {}
      },
      "id": "46e15819-b4a2-4950-aded-81110bdf594f",
      "name": "Ticket Pending3",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        640,
        4240
      ],
      "credentials": {
        "cloodoApi": {
          "id": "nP7U7wKTbfdSeafq",
          "name": "Cmsmart Worksuite account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $json.meta.next_cursor }}",
              "operation": "isNotEmpty"
            }
          ]
        }
      },
      "id": "95203a86-ecf8-4770-b79d-4dc79b19bb86",
      "name": "IF1",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        840,
        4420
      ]
    },
    {
      "parameters": {
        "url": "=https://erp-amz.cloodo.com/v4/tickets/{{ $json.data.id }}/replies",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "cloodoApi",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "limit",
              "value": "10"
            }
          ]
        },
        "options": {}
      },
      "id": "fc1b7d8c-7b2d-40f3-b5a7-99dadbf3dad7",
      "name": "Get replies3",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1460,
        4240
      ],
      "credentials": {
        "cloodoApi": {
          "id": "nP7U7wKTbfdSeafq",
          "name": "Cmsmart Worksuite account"
        }
      }
    },
    {
      "parameters": {
        "resource": "engagement",
        "ID": "={{ $json.id }}",
        "requestOptions": {}
      },
      "id": "7934520d-6a80-4a28-8830-f63222ab915e",
      "name": "Get Ticket3",
      "type": "@cloodo/n8n-nodes-cloodo-crm.CloodoLeads",
      "typeVersion": 1,
      "position": [
        1200,
        4240
      ],
      "credentials": {
        "cloodoApi": {
          "id": "nP7U7wKTbfdSeafq",
          "name": "Cmsmart Worksuite account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "796ab7b7-b19f-4a08-938e-16c2e40a9325",
              "name": "replies",
              "value": "={{ $json.data }}",
              "type": "array"
            },
            {
              "id": "377ffdcb-97b2-4ab7-b211-3376a7437855",
              "name": "ticket",
              "value": "={{ $('Get Ticket3').item.json.data }}",
              "type": "object"
            }
          ]
        },
        "options": {}
      },
      "id": "7f123c6d-4d73-4d1b-a289-fd7d4b2501c1",
      "name": "Replies and Ticket3",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1760,
        4240
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "6dc6657f-526c-4633-a42e-591e9f2e964d",
              "leftValue": "={{ $json.replies[0].user.id }}",
              "rightValue": "={{ $json.ticket.idClient }}",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "e6df4223-7fee-4d42-8912-b234834959da",
      "name": "Requester Replies3",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        2360,
        4240
      ]
    },
    {
      "parameters": {
        "jsCode": "const currentDate = new Date();  // Ngày hiện tại\nconst daysLimit = 24;  // Số ngày bạn muốn so sánh\nconst filteredItems = [];\n\n// Lặp qua từng item trong $input.all() và kiểm tra update_at\nfor (const item of $input.all()) {\n  const updateDate = new Date(item?.json?.replies[0]?.updated_at);  // Ngày cập nhật của item\n  const diffTime = currentDate - updateDate; // Tính sự khác biệt giữa ngày hiện tại và ngày update_at\n  const diffDays = diffTime / (1000 * 3600); // Chuyển từ milliseconds sang ngày\n  const idTicket = item?.json?.ticket?.id\n  const idClient = item?.json?.ticket?.requester?.id\n  const clientTicket = item?.json?.ticket?.requester?.name\n  const numberTicket = item?.json?.ticket?.ticket_number\n  const subjectTicket = item?.json?.ticket?.subject\n  const statusTicket = item?.json?.ticket?.status\n  const typeTicket = item?.json?.ticket?.type?.type\n  const projectTicket = item?.json?.ticket?.projects?.name\n  const agentNameTicket = item?.json?.ticket?.agent?.user?.name\n  const agentEmailTicket = item?.json?.ticket?.agent?.user?.email\n  \n  if (diffDays > daysLimit) {\n    item.json.ticket = {idTicket: idTicket,\n                        idClient: idClient,\n                        nameClient: clientTicket,\n                        numberTicket: numberTicket,\n                        subjectTicket: subjectTicket,\n                        statusTicket: statusTicket,\n                        typeTicket: typeTicket,\n                        projectTicket: projectTicket,\n                        agentName: agentNameTicket,\n                        agentEmail: agentEmailTicket\n                       }\n    filteredItems.push(item);  // Thêm item vào danh sách nếu update_at sau 15 ngày\n  }\n}\n\nreturn filteredItems;  // Trả về các item thỏa mãn điều kiện\n"
      },
      "id": "7e32519e-8537-409e-b4c7-e46471f975d6",
      "name": "Ticket 24h1",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2080,
        4240
      ]
    },
    {
      "parameters": {
        "fieldToSplitOut": "data",
        "options": {}
      },
      "id": "1e4613fc-e807-4a2c-ae97-d50b37c02c7b",
      "name": "Item Lists4",
      "type": "n8n-nodes-base.itemLists",
      "typeVersion": 3,
      "position": [
        780,
        5640
      ]
    },
    {
      "parameters": {
        "url": "https://erp-amz.cloodo.com/v4/tickets",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "cloodoApi",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "limit",
              "value": "100"
            },
            {
              "name": "date_from",
              "value": "2025-01-01"
            },
            {
              "name": "date_to",
              "value": "={{ $now.toDateTime() }}"
            },
            {
              "name": "sort",
              "value": "desc"
            },
            {
              "name": "status",
              "value": "pending"
            },
            {
              "name": "cursor",
              "value": "={{ $json.meta.next_cursor }}"
            }
          ]
        },
        "options": {}
      },
      "id": "7ceaecb9-36e4-4c11-8f14-fe05bcb6e95f",
      "name": "Ticket Pending4",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        480,
        5640
      ],
      "credentials": {
        "cloodoApi": {
          "id": "nP7U7wKTbfdSeafq",
          "name": "Cmsmart Worksuite account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $json.meta.next_cursor }}",
              "operation": "isNotEmpty"
            }
          ]
        }
      },
      "id": "9cdaa552-3a42-43e4-abe7-1f0419c4b405",
      "name": "IF8",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        680,
        5820
      ]
    },
    {
      "parameters": {
        "url": "=https://erp-amz.cloodo.com/v4/tickets/{{ $json.data.id }}/replies",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "cloodoApi",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "limit",
              "value": "10"
            }
          ]
        },
        "options": {}
      },
      "id": "175aa7d0-a864-472f-a6c8-d33536d0636f",
      "name": "Get replies4",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1300,
        5640
      ],
      "credentials": {
        "cloodoApi": {
          "id": "nP7U7wKTbfdSeafq",
          "name": "Cmsmart Worksuite account"
        }
      }
    },
    {
      "parameters": {
        "resource": "engagement",
        "ID": "={{ $json.id }}",
        "requestOptions": {}
      },
      "id": "5dd2ee53-23c5-4db1-9c5b-80ddcf146a5f",
      "name": "Get Ticket4",
      "type": "@cloodo/n8n-nodes-cloodo-crm.CloodoLeads",
      "typeVersion": 1,
      "position": [
        1040,
        5640
      ],
      "credentials": {
        "cloodoApi": {
          "id": "nP7U7wKTbfdSeafq",
          "name": "Cmsmart Worksuite account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "796ab7b7-b19f-4a08-938e-16c2e40a9325",
              "name": "replies",
              "value": "={{ $json.data }}",
              "type": "array"
            },
            {
              "id": "377ffdcb-97b2-4ab7-b211-3376a7437855",
              "name": "ticket",
              "value": "={{ $('Get Ticket4').item.json.data }}",
              "type": "object"
            }
          ]
        },
        "options": {}
      },
      "id": "7ede3467-8f2e-47c0-a9d8-7de535ee333f",
      "name": "Replies and Ticket4",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1540,
        5640
      ]
    },
    {
      "parameters": {
        "fieldToSplitOut": "data",
        "options": {}
      },
      "id": "40d919c7-299a-4a40-8505-3e65729a1e90",
      "name": "Item Lists5",
      "type": "n8n-nodes-base.itemLists",
      "typeVersion": 3,
      "position": [
        760,
        6520
      ]
    },
    {
      "parameters": {
        "url": "https://erp-amz.cloodo.com/v4/tickets",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "cloodoApi",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "limit",
              "value": "100"
            },
            {
              "name": "date_from",
              "value": "2025-01-01"
            },
            {
              "name": "date_to",
              "value": "={{ $now.toDateTime() }}"
            },
            {
              "name": "sort",
              "value": "desc"
            },
            {
              "name": "status",
              "value": "pending"
            },
            {
              "name": "cursor",
              "value": "={{ $json.meta.next_cursor }}"
            }
          ]
        },
        "options": {}
      },
      "id": "bf975231-bd67-4e4a-9735-88cb0489b83b",
      "name": "Ticket Pending5",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        500,
        6520
      ],
      "credentials": {
        "cloodoApi": {
          "id": "nP7U7wKTbfdSeafq",
          "name": "Cmsmart Worksuite account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $json.meta.next_cursor }}",
              "operation": "isNotEmpty"
            }
          ]
        }
      },
      "id": "33e3f8e8-efa2-40e9-bac2-edf686aa678d",
      "name": "IF2",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        700,
        6700
      ]
    },
    {
      "parameters": {
        "url": "=https://erp-amz.cloodo.com/v4/tickets/{{ $json.data.id }}/replies",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "cloodoApi",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "limit",
              "value": "10"
            }
          ]
        },
        "options": {}
      },
      "id": "57de30f9-49ef-4db2-ae9a-96998d466a32",
      "name": "Get replies5",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1260,
        6520
      ],
      "credentials": {
        "cloodoApi": {
          "id": "nP7U7wKTbfdSeafq",
          "name": "Cmsmart Worksuite account"
        }
      }
    },
    {
      "parameters": {
        "resource": "engagement",
        "ID": "={{ $json.id }}",
        "requestOptions": {}
      },
      "id": "3da29af4-a766-4d5e-a5fb-85133e195e8d",
      "name": "Get Ticket5",
      "type": "@cloodo/n8n-nodes-cloodo-crm.CloodoLeads",
      "typeVersion": 1,
      "position": [
        1020,
        6520
      ],
      "credentials": {
        "cloodoApi": {
          "id": "nP7U7wKTbfdSeafq",
          "name": "Cmsmart Worksuite account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "796ab7b7-b19f-4a08-938e-16c2e40a9325",
              "name": "replies",
              "value": "={{ $json.data }}",
              "type": "array"
            },
            {
              "id": "377ffdcb-97b2-4ab7-b211-3376a7437855",
              "name": "ticket",
              "value": "={{ $('Get Ticket5').item.json.data }}",
              "type": "object"
            }
          ]
        },
        "options": {}
      },
      "id": "2a3d7bed-280d-492a-b063-23e1d2b56277",
      "name": "Replies and Ticket5",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1520,
        6520
      ]
    },
    {
      "parameters": {
        "jsCode": "const currentDate = new Date();  // Ngày hiện tại\nconst daysLimit = 24;  // Số ngày bạn muốn so sánh\nconst filteredItems = [];\n\n// Lặp qua từng item trong $input.all() và kiểm tra update_at\nfor (const item of $input.all()) {\n  const updateDate = new Date(item?.json?.replies[0]?.updated_at);  // Ngày cập nhật của item\n  const diffTime = currentDate - updateDate; // Tính sự khác biệt giữa ngày hiện tại và ngày update_at\n  const diffDays = diffTime / (1000 * 3600); // Chuyển từ milliseconds sang ngày\n  const idTicket = item?.json?.ticket?.id\n  const idClient = item?.json?.ticket?.requester?.id\n  const clientTicket = item?.json?.ticket?.requester?.name\n  const numberTicket = item?.json?.ticket?.ticket_number\n  const subjectTicket = item?.json?.ticket?.subject\n  const statusTicket = item?.json?.ticket?.status\n  const typeTicket = item?.json?.ticket?.type?.type\n  const projectTicket = item?.json?.ticket?.projects?.name\n  const agentNameTicket = item?.json?.ticket?.agent?.user?.name\n  const agentEmailTicket = item?.json?.ticket?.agent?.user?.email\n  \n  if (diffDays > daysLimit) {\n    item.json.ticket = {idTicket: idTicket,\n                        idClient: idClient,\n                        nameClient: clientTicket,\n                        numberTicket: numberTicket,\n                        subjectTicket: subjectTicket,\n                        statusTicket: statusTicket,\n                        typeTicket: typeTicket,\n                        projectTicket: projectTicket,\n                        agentName: agentNameTicket,\n                        agentEmail: agentEmailTicket\n                       }\n    filteredItems.push(item);  // Thêm item vào danh sách nếu update_at sau 15 ngày\n  }\n}\n\nreturn filteredItems;  // Trả về các item thỏa mãn điều kiện\n"
      },
      "id": "0d732970-3053-468e-9f9f-85a3f48b9cf4",
      "name": "Ticket 24h2",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1760,
        6520
      ]
    },
    {
      "parameters": {
        "fieldToSplitOut": "data",
        "options": {}
      },
      "id": "6cfd26b9-2235-4185-bbeb-48a0e9faf669",
      "name": "Item Lists6",
      "type": "n8n-nodes-base.itemLists",
      "typeVersion": 3,
      "position": [
        580,
        7520
      ]
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $json.meta.next_cursor }}",
              "operation": "isNotEmpty"
            }
          ]
        }
      },
      "id": "5e79b461-340f-4198-a9c8-702cabd96815",
      "name": "IF9",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        420,
        7840
      ]
    },
    {
      "parameters": {
        "url": "=https://erp-amz.cloodo.com/v4/tickets/{{ $json.data.id }}/replies",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "cloodoApi",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "limit",
              "value": "10"
            }
          ]
        },
        "options": {}
      },
      "id": "18ab209f-00ba-4088-ac70-96735e622682",
      "name": "Get replies6",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1340,
        7500
      ],
      "credentials": {
        "cloodoApi": {
          "id": "nP7U7wKTbfdSeafq",
          "name": "Cmsmart Worksuite account"
        }
      }
    },
    {
      "parameters": {
        "resource": "engagement",
        "ID": "={{ $json.id }}",
        "requestOptions": {}
      },
      "id": "857fb503-0356-4819-887e-fb9093d42161",
      "name": "Get Ticket6",
      "type": "@cloodo/n8n-nodes-cloodo-crm.CloodoLeads",
      "typeVersion": 1,
      "position": [
        820,
        7520
      ],
      "executeOnce": false,
      "credentials": {
        "cloodoApi": {
          "id": "nP7U7wKTbfdSeafq",
          "name": "Cmsmart Worksuite account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "796ab7b7-b19f-4a08-938e-16c2e40a9325",
              "name": "replies",
              "value": "={{ $json.data }}",
              "type": "array"
            },
            {
              "id": "377ffdcb-97b2-4ab7-b211-3376a7437855",
              "name": "ticket",
              "value": "={{ $('Get Ticket6').item.json.data }}",
              "type": "object"
            }
          ]
        },
        "options": {}
      },
      "id": "8bf3130f-53b8-4757-9cd8-42f73a21199b",
      "name": "Replies and Ticket6",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1580,
        7500
      ]
    },
    {
      "parameters": {
        "fieldToSplitOut": "data",
        "options": {}
      },
      "id": "ae3317a5-01fb-4e8f-bf09-2590a93bb236",
      "name": "Item Lists7",
      "type": "n8n-nodes-base.itemLists",
      "typeVersion": 3,
      "position": [
        560,
        8980
      ]
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $json.meta.next_cursor }}",
              "operation": "isNotEmpty"
            }
          ]
        }
      },
      "id": "74ab07c8-4c80-48dd-9142-7a89129a04ea",
      "name": "IF3",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        400,
        9300
      ]
    },
    {
      "parameters": {
        "url": "=https://erp-amz.cloodo.com/v4/tickets/{{ $json.data.id }}/replies",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "cloodoApi",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "limit",
              "value": "10"
            }
          ]
        },
        "options": {}
      },
      "id": "2d7bf9c1-dae8-4df0-9208-ae80f048278c",
      "name": "Get replies7",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1360,
        8960
      ],
      "credentials": {
        "cloodoApi": {
          "id": "nP7U7wKTbfdSeafq",
          "name": "Cmsmart Worksuite account"
        }
      }
    },
    {
      "parameters": {
        "resource": "engagement",
        "ID": "={{ $json.id }}",
        "requestOptions": {}
      },
      "id": "2b70ebed-f0d4-42b4-bc40-ac5600c6c8eb",
      "name": "Get Ticket7",
      "type": "@cloodo/n8n-nodes-cloodo-crm.CloodoLeads",
      "typeVersion": 1,
      "position": [
        820,
        8980
      ],
      "executeOnce": true,
      "credentials": {
        "cloodoApi": {
          "id": "nP7U7wKTbfdSeafq",
          "name": "Cmsmart Worksuite account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "796ab7b7-b19f-4a08-938e-16c2e40a9325",
              "name": "replies",
              "value": "={{ $json.data }}",
              "type": "array"
            },
            {
              "id": "377ffdcb-97b2-4ab7-b211-3376a7437855",
              "name": "ticket",
              "value": "={{ $('Get Ticket7').item.json.data }}",
              "type": "object"
            }
          ]
        },
        "options": {}
      },
      "id": "822d0dd1-18bc-4a18-afac-29ca608b26fa",
      "name": "Replies and Ticket7",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1580,
        8960
      ]
    },
    {
      "parameters": {
        "jsCode": "const currentDate = new Date();  // Ngày hiện tại\nconst daysLimit = 24;  // Số ngày bạn muốn so sánh\nconst filteredItems = [];\n\n// Lặp qua từng item trong $input.all() và kiểm tra update_at\nfor (const item of $input.all()) {\n  const updateDate = new Date(item?.json?.replies[0]?.created_at);  // Ngày cập nhật của item\n  const diffTime = currentDate - updateDate; // Tính sự khác biệt giữa ngày hiện tại và ngày update_at\n  const diffDays = diffTime / (1000 * 3600); // Chuyển từ milliseconds sang ngày\n  const idTicket = item?.json?.ticket?.id\n  const idClient = item?.json?.ticket?.requester?.id\n  const clientTicket = item?.json?.ticket?.requester?.name\n  const numberTicket = item?.json?.ticket?.ticket_number\n  const subjectTicket = item?.json?.ticket?.subject\n  const statusTicket = item?.json?.ticket?.status\n  const typeTicket = item?.json?.ticket?.type?.type\n  const projectTicket = item?.json?.ticket?.projects?.name\n  const agentNameTicket = item?.json?.ticket?.agent?.user?.name\n  const agentEmailTicket = item?.json?.ticket?.agent?.user?.email\n  \n  if (diffDays > daysLimit) {\n    item.json.ticket = {idTicket: idTicket,\n                        idClient: idClient,\n                        nameClient: clientTicket,\n                        numberTicket: numberTicket,\n                        subjectTicket: subjectTicket,\n                        statusTicket: statusTicket,\n                        typeTicket: typeTicket,\n                        projectTicket: projectTicket,\n                        agentName: agentNameTicket,\n                        agentEmail: agentEmailTicket\n                       }\n    filteredItems.push(item);  // Thêm item vào danh sách nếu update_at sau 15 ngày\n  }\n}\n\nreturn filteredItems;  // Trả về các item thỏa mãn điều kiện\n"
      },
      "id": "fd07ac8b-63b8-4245-a68d-fece5ceaccec",
      "name": "Ticket 24h3",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1800,
        8960
      ]
    },
    {
      "parameters": {
        "operation": "minus",
        "user_id": "={{ $('Ticket 8h1').item.json.replies[0].user.id }}",
        "points": 1,
        "note": "=QCM 83-84: {{ $('Ticket 8h1').item.json.ticket.agentName }} - 3 points Ticket no closed or Ticket no reply Client: https://worksuite.cloodo.com/apps/tickets/all-tickets/{{ $('Ticket 8h1').item.json.ticket.idTicket }}"
      },
      "id": "ef2ba642-3170-4edb-87bd-6bc23d3371d6",
      "name": "Cloodo Point",
      "type": "@cloodo/n8n-nodes-cloodo-point.cloodoPoint",
      "typeVersion": 1,
      "position": [
        3700,
        4980
      ],
      "credentials": {
        "cloodoApi2": {
          "id": "82nsSr6jMyGAQbyu",
          "name": "Cmsmart Point API Key"
        }
      }
    },
    {
      "parameters": {
        "operation": "search",
        "keyword": "=QCM 83-84: {{ $('Ticket 8h1').item.json.ticket.agentName }} - 5 points Ticket no closed or Ticket no reply Client: https://worksuite.cloodo.com/apps/tickets/all-tickets/{{ $('Ticket 8h1').item.json.ticket.idTicket }}",
        "max_limit_record": 50
      },
      "id": "34844ce5-c66a-45c7-835f-37f13fd554f1",
      "name": "Cloodo Point1",
      "type": "@cloodo/n8n-nodes-cloodo-point.cloodoPoint",
      "typeVersion": 1,
      "position": [
        3240,
        4980
      ],
      "credentials": {
        "cloodoApi2": {
          "id": "82nsSr6jMyGAQbyu",
          "name": "Cmsmart Point API Key"
        }
      }
    },
    {
      "parameters": {
        "operation": "minus",
        "user_id": "={{ $('Ticket 24h2').item.json.replies[0].user.id }}",
        "points": 5,
        "note": "=QCM 83-84: {{ $('Ticket 24h2').item.json.ticket.agentName }} - 3 points Ticket no closed or Ticket no reply Client: https://worksuite.cloodo.com/apps/tickets/all-tickets/{{ $('Ticket 24h2').item.json.ticket.idTicket }}"
      },
      "id": "20623780-325b-4f09-8c47-b09598374dfb",
      "name": "Cloodo Point2",
      "type": "@cloodo/n8n-nodes-cloodo-point.cloodoPoint",
      "typeVersion": 1,
      "position": [
        3680,
        5160
      ],
      "credentials": {
        "cloodoApi2": {
          "id": "82nsSr6jMyGAQbyu",
          "name": "Cmsmart Point API Key"
        }
      }
    },
    {
      "parameters": {
        "operation": "search",
        "keyword": "=QCM 83-84: {{ $('Ticket 24h2').item.json.ticket.agentName }} - 5 points Ticket no closed or Ticket no reply Client: https://worksuite.cloodo.com/apps/tickets/all-tickets/{{ $('Ticket 24h2').item.json.ticket.idTicket }}",
        "max_limit_record": 50
      },
      "id": "50f67249-d7a7-4e82-a3d6-5824e661e3e8",
      "name": "Cloodo Point3",
      "type": "@cloodo/n8n-nodes-cloodo-point.cloodoPoint",
      "typeVersion": 1,
      "position": [
        3280,
        5180
      ],
      "credentials": {
        "cloodoApi2": {
          "id": "82nsSr6jMyGAQbyu",
          "name": "Cmsmart Point API Key"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "number": [
            {
              "value1": "={{ $json.total_records }}",
              "operation": "equal"
            }
          ]
        }
      },
      "id": "6e25dccd-7731-49f0-a149-4a5a85a66c41",
      "name": "IF not found1",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        3460,
        5180
      ]
    },
    {
      "parameters": {
        "operation": "minus",
        "user_id": "={{ $('Ticket 8h').item.json.replies[0].user.id }}",
        "points": "={{ $('Cloodo Point5')?.item?.json?.data.length > 0 ? Math.min(...$('Cloodo Point5')?.item?.json?.data?.map(item => item?.point)?.map(Number)) * -1 + 5 : 5  }}",
        "note": "=QCM 83-84: {{ $('Ticket 8h').item.json.ticket.agentName }} -{{ $('Cloodo Point5')?.item?.json?.data.length > 0 ? Math.min(...$('Cloodo Point5')?.item?.json?.data?.map(item => item?.point)?.map(Number)) * -1 + 5 : 5  }} points Ticket no closed or Ticket no reply Client: https://worksuite.cloodo.com/apps/tickets/all-tickets/{{ $('Ticket 8h').item.json.ticket.idTicket }}"
      },
      "id": "46199e97-5bd4-42bb-9646-a012f23b1d80",
      "name": "Cloodo Point4",
      "type": "@cloodo/n8n-nodes-cloodo-point.cloodoPoint",
      "typeVersion": 1,
      "position": [
        3300,
        7500
      ],
      "credentials": {
        "cloodoApi2": {
          "id": "82nsSr6jMyGAQbyu",
          "name": "Cmsmart Point API Key"
        }
      }
    },
    {
      "parameters": {
        "operation": "search",
        "keyword": "=https://worksuite.cloodo.com/apps/tickets/all-tickets/{{ $('Ticket 8h').item.json.ticket.idTicket }}",
        "max_limit_record": 50,
        "status_record": -1
      },
      "id": "1936e5bb-781e-4d6c-8d65-5466ea9cc405",
      "name": "Cloodo Point5",
      "type": "@cloodo/n8n-nodes-cloodo-point.cloodoPoint",
      "typeVersion": 1,
      "position": [
        2780,
        7500
      ],
      "credentials": {
        "cloodoApi2": {
          "id": "82nsSr6jMyGAQbyu",
          "name": "Cmsmart Point API Key"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "number": [
            {
              "value1": "={{ $json.total_records }}",
              "operation": "equal"
            }
          ]
        }
      },
      "id": "f1725f73-07c9-48e3-93af-afb66ea37aa7",
      "name": "IF not found2",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        -1500,
        8160
      ]
    },
    {
      "parameters": {
        "operation": "minus",
        "user_id": "={{ $('Ticket 24h3').item.json.replies[0].user.id }}",
        "points": "={{ Math.min(...$('Cloodo Point7').item.json.data?.map(item => item?.point).map(Number)) * -1 }}",
        "note": "=QCM 83-84: {{ $('Ticket 24h3').item.json.ticket.agentName }} -{{ Math.min(...$('Cloodo Point7').item.json.data?.map(item => item?.point).map(Number)) * -1 }} points Ticket no closed or Ticket no reply Client: https://worksuite.cloodo.com/apps/tickets/all-tickets/{{ $('Ticket 24h3').item.json.ticket.idTicket }}"
      },
      "id": "55b6894e-d20a-4dd9-b828-4e0e8b0590fa",
      "name": "Cloodo Point6",
      "type": "@cloodo/n8n-nodes-cloodo-point.cloodoPoint",
      "typeVersion": 1,
      "position": [
        3120,
        8860
      ],
      "credentials": {
        "cloodoApi2": {
          "id": "82nsSr6jMyGAQbyu",
          "name": "Cmsmart Point API Key"
        }
      }
    },
    {
      "parameters": {
        "operation": "search",
        "keyword": "=https://worksuite.cloodo.com/apps/tickets/all-tickets/{{ $('Ticket 24h3').item.json.ticket.idTicket }}",
        "max_limit_record": 50,
        "status_record": 0
      },
      "id": "7f643211-da32-4af5-b53a-911172757400",
      "name": "Cloodo Point7",
      "type": "@cloodo/n8n-nodes-cloodo-point.cloodoPoint",
      "typeVersion": 1,
      "position": [
        2820,
        8860
      ],
      "credentials": {
        "cloodoApi2": {
          "id": "82nsSr6jMyGAQbyu",
          "name": "Cmsmart Point API Key"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.cloodo.com/mautic.php",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {}
          ]
        },
        "sendBody": true,
        "contentType": "multipart-form-data",
        "bodyParameters": {
          "parameters": [
            {
              "name": "email",
              "value": "={{ $('Ticket 8h').item.json.ticket.agentEmail }}"
            },
            {
              "name": "uname",
              "value": "={{ $('Ticket 8h').item.json.ticket.agentName }}"
            },
            {
              "name": "subject",
              "value": "=Respond to tickets when customers respond"
            },
            {
              "name": "send_mail",
              "value": "cmsmart"
            },
            {
              "name": "email_id",
              "value": "111"
            },
            {
              "name": "content",
              "value": "=<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Ticket Closure Reminder</title>\n</head>\n\n<body style=\"font-family: Arial, sans-serif; color: #333; line-height: 1.6; margin: 0;\">\n    <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"background-color: #fff;\">\n        <!-- Content -->\n        <tr>\n            <td style=\"font-size: 14px; color: black\">\n                <p>Dear {{ $('Ticket 8h').item.json.ticket.agentName }},</p>\n<p>I hope this message finds you well.</p>\n<p>This is a friendly reminder to please ensure that all customer tickets are responded to in a timely manner. Once a customer responds, it is important to follow up within 24 hours. Failure to do so will result in points being deducted from the CmsMart Admin system.</p>\n\n<p>Key points to remember:</p>\n\n<ul>\n<li>Ensure timely responses to customer feedback.</li>\n<li>Reply within 24 hours to avoid penalties.</li>\n<li>Points will be deducted from the CmsMart Admin for slow responses.</li>\n</ul>\n\n<p>We appreciate your cooperation and concern for this issue.</p>\n\n<p>Here is the ticket you need to respond to:</p>\n\n                <table width=\"100%\" cellpadding=\"5\" cellspacing=\"0\" style=\"border-collapse: collapse;\">\n                    <tr>\n                        <th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Ticket ID</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Subject</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Client</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Status</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Type</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Project</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Agent</th>\n                      \n                    </tr>\n\n                <tr>\n                    <td style=\"border-bottom: 1px solid #ddd; padding: 8px;\"><a href=\"https://worksuite.cloodo.com/apps/tickets/all-tickets/{{ $('Ticket 8h').item.json.ticket.idTicket }}\" style=\"color: #007bff; text-decoration: none;\">Ticket </a></td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">{{ $('Ticket 8h').item.json.ticket.subjectTicket }}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">{{ $('Ticket 8h').item.json.ticket.nameClient }}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">{{ $('Ticket 8h').item.json.ticket.statusTicket }}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">{{ $('Ticket 8h').item.json.ticket.typeTicket }}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">{{ $('Ticket 8h').item.json.ticket.projectTicket }}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">{{ $('Ticket 8h').item.json.ticket.agentName }}</td>\n                </tr>\n                </table>\n\n                <p>Best regards,</p>\n                <p>Cms Admin</p>\n            </td>\n        </tr>\n    </table>\n</body>\n\n</html>\n"
            }
          ]
        },
        "options": {}
      },
      "id": "59c6eb2e-a4fa-42ca-8a18-d9ee6b2eb96a",
      "name": "Send mail Reply Ticket10",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        3040,
        7500
      ]
    },
    {
      "parameters": {
        "jsCode": "const currentDate = new Date();  // Ngày hiện tại\nconst daysLimit = 8;  // Số ngày bạn muốn so sánh\nconst filteredItems = [];\n\n// Lặp qua từng item trong $input.all() và kiểm tra update_at\nfor (const item of $input.all()) {\n  const updateDate = new Date(item?.json?.replies[0]?.created_at);  // Ngày cập nhật của item\n  const diffTime = currentDate - updateDate; // Tính sự khác biệt giữa ngày hiện tại và ngày update_at\n  const diffDays = diffTime / (1000 * 3600); // Chuyển từ milliseconds sang ngày\n  const idTicket = item?.json?.ticket?.id\n  const idClient = item?.json?.ticket?.requester?.id\n  const clientTicket = item?.json?.ticket?.requester?.name\n  const numberTicket = item?.json?.ticket?.ticket_number\n  const subjectTicket = item?.json?.ticket?.subject\n  const statusTicket = item?.json?.ticket?.status\n  const typeTicket = item?.json?.ticket?.type?.type\n  const projectTicket = item?.json?.ticket?.projects?.name\n  const agentNameTicket = item?.json?.ticket?.agent?.user?.name\n  const agentEmailTicket = item?.json?.ticket?.agent?.user?.email\n  \n  if (diffDays > daysLimit) {\n    item.json.ticket = {idTicket: idTicket,\n                        idClient: idClient,\n                        nameClient: clientTicket,\n                        numberTicket: numberTicket,\n                        subjectTicket: subjectTicket,\n                        statusTicket: statusTicket,\n                        typeTicket: typeTicket,\n                        projectTicket: projectTicket,\n                        agentName: agentNameTicket,\n                        agentEmail: agentEmailTicket\n                       }\n    filteredItems.push(item);  // Thêm item vào danh sách nếu update_at sau 15 ngày\n  }\n}\n\nreturn filteredItems;  // Trả về các item thỏa mãn điều kiện\n"
      },
      "id": "9be8e008-0f82-472b-9a58-2325ebff634a",
      "name": "Ticket 8h",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1820,
        7500
      ],
      "executeOnce": true
    },
    {
      "parameters": {
        "operation": "delete",
        "point_id": 71575
      },
      "id": "204f2d7e-ed25-4427-88ce-5161e18b8092",
      "name": "Cloodo Point8",
      "type": "@cloodo/n8n-nodes-cloodo-point.cloodoPoint",
      "typeVersion": 1,
      "position": [
        1600,
        7120
      ],
      "credentials": {
        "cloodoApi2": {
          "id": "82nsSr6jMyGAQbyu",
          "name": "Cmsmart Point API Key"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "number": [
            {
              "value1": "={{ $json.total_records }}",
              "operation": "equal"
            }
          ]
        }
      },
      "id": "63635e57-769e-4058-8cb1-4699e32dfb6c",
      "name": "IF not found3",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        2480,
        7880
      ]
    },
    {
      "parameters": {
        "url": "https://erp-amz.cloodo.com/v4/tickets",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "cloodoApi",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "limit",
              "value": "100"
            },
            {
              "name": "date_from",
              "value": "2025-01-01"
            },
            {
              "name": "date_to",
              "value": "={{ $now.toDateTime() }}"
            },
            {
              "name": "sort",
              "value": "desc"
            },
            {
              "name": "status",
              "value": "open"
            },
            {
              "name": "cursor",
              "value": "={{ $json.meta.next_cursor }}"
            }
          ]
        },
        "options": {}
      },
      "id": "311973c7-3088-423f-93eb-fc1f38d28b58",
      "name": "Ticket Open",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        260,
        8980
      ],
      "credentials": {
        "cloodoApi": {
          "id": "nP7U7wKTbfdSeafq",
          "name": "Cmsmart Worksuite account"
        }
      }
    },
    {
      "parameters": {
        "url": "https://erp-amz.cloodo.com/v4/tickets",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "cloodoApi",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "limit",
              "value": "100"
            },
            {
              "name": "date_from",
              "value": "2025-01-01"
            },
            {
              "name": "date_to",
              "value": "={{ $now.toDateTime() }}"
            },
            {
              "name": "sort",
              "value": "desc"
            },
            {
              "name": "status",
              "value": "open"
            },
            {
              "name": "cursor",
              "value": "={{ $json.meta.next_cursor }}"
            }
          ]
        },
        "options": {}
      },
      "id": "286751fc-e0f4-4d5f-b3c6-fb83205186cd",
      "name": "Ticket Open1",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        280,
        7520
      ],
      "credentials": {
        "cloodoApi": {
          "id": "nP7U7wKTbfdSeafq",
          "name": "Cmsmart Worksuite account"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "id": "1fada74d-d135-4d4a-8f52-c35e90c73138",
      "name": "Loop Over Items",
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        2460,
        7480
      ]
    },
    {
      "parameters": {
        "options": {}
      },
      "id": "5281c4a7-7ff7-4c90-af6d-22ab5f84b0fd",
      "name": "Loop Over Items1",
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        2560,
        8840
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "9ab35c59-58f9-43a8-8026-b499641ff4cd",
              "leftValue": "={{ $json.data.requester.email }}",
              "rightValue": "={{ $json.data.create_by.email }}",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "dfdea424-b2bf-433a-807e-16bceec84362",
      "name": "Check client send",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1040,
        7520
      ]
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "vy.dl@netbasejsc.com",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Vy"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "2a75c8aa-0ad9-4171-b215-7ddea1d07bd8",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "phuong.nt@netbasejsc.com",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Phuong"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "c01ba01c-39bd-41c7-82c6-cc9a876741d2",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "huy.nhd@netbasejsc.com",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Huy"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "7add08a8-dffe-44d7-b27c-73344547b865",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "chi.hu@netbasejsc.com",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Chi"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "1591f407-008f-43ca-b641-27b4d699617d",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "chau.lt@netbasejsc.com",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Chau"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "b33cb102-6f78-4a4d-9e88-5b2725a64274",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "",
                    "operator": {
                      "type": "string",
                      "operation": "notEmpty",
                      "singleValue": true
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "default"
            }
          ]
        },
        "options": {}
      },
      "id": "80f11fe8-c603-4acb-9de5-7e7715561194",
      "name": "Switch3",
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        2860,
        4140
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "6dc6657f-526c-4633-a42e-591e9f2e964d",
              "leftValue": "={{ $json.replies[0].user.id }}",
              "rightValue": "={{ $json.ticket.idClient }}",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "8133449b-cc51-4082-96fa-3034a166f7f7",
      "name": "Requester Replies4",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        2060,
        7500
      ]
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "2a75c8aa-0ad9-4171-b215-7ddea1d07bd8",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "phuong.nt@netbasejsc.com",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Phuong"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "c01ba01c-39bd-41c7-82c6-cc9a876741d2",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "huy.nhd@netbasejsc.com",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Huy"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "7add08a8-dffe-44d7-b27c-73344547b865",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "chi.hu@netbasejsc.com",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Chi"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "1591f407-008f-43ca-b641-27b4d699617d",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "chau.lt@netbasejsc.com",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Chau"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "b33cb102-6f78-4a4d-9e88-5b2725a64274",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "",
                    "operator": {
                      "type": "string",
                      "operation": "notEmpty",
                      "singleValue": true
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "default"
            }
          ]
        },
        "options": {}
      },
      "id": "fca2cff1-5ad7-4f7a-bd55-cfc78a0ef6bb",
      "name": "Switch4",
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        4080,
        6920
      ]
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 1298489612,
          "mode": "list",
          "cachedResultName": "Phuong",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=1298489612"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "idTicket": "={{ $json.ticket.idTicket }}",
            "agenEmail": "={{ $json.ticket.agentEmail }}",
            "numberTicket": "={{ $json.ticket.numberTicket }}",
            "agentName": "={{ $json.ticket.agentName }}",
            "lastRespone": "Client",
            "nameClient": "={{ $json.ticket.nameClient }}",
            "typeTicket": "={{ $json.ticket.typeTicket }}",
            "subjectTicket": "={{ $json.ticket.subjectTicket }}",
            "statusTicket": "={{ $json.ticket.statusTicket }}",
            "projectTicket": "={{ $json.ticket.projectTicket }}"
          },
          "matchingColumns": [
            "idTicket"
          ],
          "schema": [
            {
              "id": "idTicket",
              "displayName": "idTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "numberTicket",
              "displayName": "numberTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agentName",
              "displayName": "agentName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agenEmail",
              "displayName": "agenEmail",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "lastRespone",
              "displayName": "lastRespone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nameClient",
              "displayName": "nameClient",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "subjectTicket",
              "displayName": "subjectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "statusTicket",
              "displayName": "statusTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "typeTicket",
              "displayName": "typeTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "projectTicket",
              "displayName": "projectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ]
        },
        "options": {}
      },
      "id": "8c3cbe90-4d9a-4a59-800c-0691e492df0a",
      "name": "Phuong5",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        4400,
        6740
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 2073353188,
          "mode": "list",
          "cachedResultName": "Chi",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=2073353188"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "idTicket": "={{ $json.ticket.idTicket }}",
            "numberTicket": "={{ $json.ticket.numberTicket }}",
            "agentName": "={{ $json.ticket.agentName }}",
            "agenEmail": "={{ $json.ticket.agentEmail }}",
            "lastRespone": "Client",
            "nameClient": "={{ $json.ticket.nameClient }}",
            "subjectTicket": "={{ $json.ticket.subjectTicket }}",
            "statusTicket": "={{ $json.ticket.statusTicket }}",
            "typeTicket": "={{ $json.ticket.typeTicket }}",
            "projectTicket": "={{ $json.ticket.projectTicket }}"
          },
          "matchingColumns": [
            "idTicket"
          ],
          "schema": [
            {
              "id": "idTicket",
              "displayName": "idTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "numberTicket",
              "displayName": "numberTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agentName",
              "displayName": "agentName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agenEmail",
              "displayName": "agenEmail",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "lastRespone",
              "displayName": "lastRespone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nameClient",
              "displayName": "nameClient",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "subjectTicket",
              "displayName": "subjectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "statusTicket",
              "displayName": "statusTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "typeTicket",
              "displayName": "typeTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "projectTicket",
              "displayName": "projectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ]
        },
        "options": {}
      },
      "id": "1e1910f6-3343-470e-9456-683fb32695b0",
      "name": "Chi5",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        4440,
        6960
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 548962283,
          "mode": "list",
          "cachedResultName": "Chau",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=548962283"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "idTicket": "={{ $json.ticket.idTicket }}",
            "numberTicket": "={{ $json.ticket.numberTicket }}",
            "agentName": "={{ $json.ticket.agentName }}",
            "agenEmail": "={{ $json.ticket.agentEmail }}",
            "lastRespone": "Client",
            "nameClient": "={{ $json.ticket.nameClient }}",
            "subjectTicket": "={{ $json.ticket.subjectTicket }}",
            "statusTicket": "={{ $json.ticket.statusTicket }}",
            "typeTicket": "={{ $json.ticket.typeTicket }}",
            "projectTicket": "={{ $json.ticket.projectTicket }}"
          },
          "matchingColumns": [
            "idTicket"
          ],
          "schema": [
            {
              "id": "idTicket",
              "displayName": "idTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "numberTicket",
              "displayName": "numberTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agentName",
              "displayName": "agentName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agenEmail",
              "displayName": "agenEmail",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "lastRespone",
              "displayName": "lastRespone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nameClient",
              "displayName": "nameClient",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "subjectTicket",
              "displayName": "subjectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "statusTicket",
              "displayName": "statusTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "typeTicket",
              "displayName": "typeTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "projectTicket",
              "displayName": "projectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ]
        },
        "options": {}
      },
      "id": "03576651-3c8e-4c3f-a312-473df15f981d",
      "name": "Chau5",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        4420,
        7160
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "9ab35c59-58f9-43a8-8026-b499641ff4cd",
              "leftValue": "={{ $json.data.requester.email }}",
              "rightValue": "={{ $json.data.create_by.email }}",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "6ad68853-4f01-4a27-b893-e87dbe312b0e",
      "name": "Check client send1",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1080,
        8980
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "6dc6657f-526c-4633-a42e-591e9f2e964d",
              "leftValue": "={{ $json.replies[0].user.id }}",
              "rightValue": "={{ $json.ticket.idClient }}",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "8b3f1962-962a-4399-97a1-260df1f40b6b",
      "name": "Requester Replies5",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        2060,
        8960
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "6dc6657f-526c-4633-a42e-591e9f2e964d",
              "leftValue": "={{ $json.replies[0].user.id }}",
              "rightValue": "={{ $json.ticket.idClient }}",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "c31acbd8-0516-42e0-b09b-77b403e49424",
      "name": "Requester Replies6",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        2040,
        5640
      ]
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "2a75c8aa-0ad9-4171-b215-7ddea1d07bd8",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "phuong.nt@netbasejsc.com",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Phuong"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "c01ba01c-39bd-41c7-82c6-cc9a876741d2",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "huy.nhd@netbasejsc.com",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Huy"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "7add08a8-dffe-44d7-b27c-73344547b865",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "chi.hu@netbasejsc.com",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Chi"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "1591f407-008f-43ca-b641-27b4d699617d",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "chau.lt@netbasejsc.com",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Chau"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "b33cb102-6f78-4a4d-9e88-5b2725a64274",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "",
                    "operator": {
                      "type": "string",
                      "operation": "notEmpty",
                      "singleValue": true
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "default"
            }
          ]
        },
        "options": {}
      },
      "id": "ef865d4a-3798-48e6-82dd-352d2aed5207",
      "name": "Switch5",
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        3920,
        5060
      ]
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 1298489612,
          "mode": "list",
          "cachedResultName": "Phuong",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=1298489612"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "idTicket": "={{ $json.ticket.idTicket }}",
            "agenEmail": "={{ $json.ticket.agentEmail }}",
            "numberTicket": "={{ $json.ticket.numberTicket }}",
            "agentName": "={{ $json.ticket.agentName }}",
            "lastRespone": "Client",
            "nameClient": "={{ $json.ticket.nameClient }}",
            "typeTicket": "={{ $json.ticket.typeTicket }}",
            "subjectTicket": "={{ $json.ticket.subjectTicket }}",
            "statusTicket": "={{ $json.ticket.statusTicket }}",
            "projectTicket": "={{ $json.ticket.projectTicket }}"
          },
          "matchingColumns": [
            "idTicket"
          ],
          "schema": [
            {
              "id": "idTicket",
              "displayName": "idTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "numberTicket",
              "displayName": "numberTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agentName",
              "displayName": "agentName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agenEmail",
              "displayName": "agenEmail",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "lastRespone",
              "displayName": "lastRespone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nameClient",
              "displayName": "nameClient",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "subjectTicket",
              "displayName": "subjectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "statusTicket",
              "displayName": "statusTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "typeTicket",
              "displayName": "typeTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "projectTicket",
              "displayName": "projectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ]
        },
        "options": {}
      },
      "id": "150043cf-b59b-46a1-8a4f-586360e58157",
      "name": "Phuong6",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        4240,
        4880
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 2073353188,
          "mode": "list",
          "cachedResultName": "Chi",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=2073353188"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "idTicket": "={{ $json.ticket.idTicket }}",
            "numberTicket": "={{ $json.ticket.numberTicket }}",
            "agentName": "={{ $json.ticket.agentName }}",
            "agenEmail": "={{ $json.ticket.agentEmail }}",
            "lastRespone": "Client",
            "nameClient": "={{ $json.ticket.nameClient }}",
            "subjectTicket": "={{ $json.ticket.subjectTicket }}",
            "statusTicket": "={{ $json.ticket.statusTicket }}",
            "typeTicket": "={{ $json.ticket.typeTicket }}",
            "projectTicket": "={{ $json.ticket.projectTicket }}"
          },
          "matchingColumns": [
            "idTicket"
          ],
          "schema": [
            {
              "id": "idTicket",
              "displayName": "idTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "numberTicket",
              "displayName": "numberTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agentName",
              "displayName": "agentName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agenEmail",
              "displayName": "agenEmail",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "lastRespone",
              "displayName": "lastRespone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nameClient",
              "displayName": "nameClient",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "subjectTicket",
              "displayName": "subjectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "statusTicket",
              "displayName": "statusTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "typeTicket",
              "displayName": "typeTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "projectTicket",
              "displayName": "projectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ]
        },
        "options": {}
      },
      "id": "b465f466-aec6-41ea-8914-8bf65ab32db4",
      "name": "Chi6",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        4280,
        5100
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 548962283,
          "mode": "list",
          "cachedResultName": "Chau",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=548962283"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "idTicket": "={{ $json.ticket.idTicket }}",
            "numberTicket": "={{ $json.ticket.numberTicket }}",
            "agentName": "={{ $json.ticket.agentName }}",
            "agenEmail": "={{ $json.ticket.agentEmail }}",
            "lastRespone": "Client",
            "nameClient": "={{ $json.ticket.nameClient }}",
            "subjectTicket": "={{ $json.ticket.subjectTicket }}",
            "statusTicket": "={{ $json.ticket.statusTicket }}",
            "typeTicket": "={{ $json.ticket.typeTicket }}",
            "projectTicket": "={{ $json.ticket.projectTicket }}"
          },
          "matchingColumns": [
            "idTicket"
          ],
          "schema": [
            {
              "id": "idTicket",
              "displayName": "idTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "numberTicket",
              "displayName": "numberTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agentName",
              "displayName": "agentName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agenEmail",
              "displayName": "agenEmail",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "lastRespone",
              "displayName": "lastRespone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nameClient",
              "displayName": "nameClient",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "subjectTicket",
              "displayName": "subjectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "statusTicket",
              "displayName": "statusTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "typeTicket",
              "displayName": "typeTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "projectTicket",
              "displayName": "projectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ]
        },
        "options": {}
      },
      "id": "df750726-e131-4212-a765-7e063b72e090",
      "name": "Chau6",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        4260,
        5300
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 1298489612,
          "mode": "list",
          "cachedResultName": "Phuong",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=1298489612"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "idTicket": "={{ $json.ticket.idTicket }}",
            "agenEmail": "={{ $json.ticket.agentEmail }}",
            "numberTicket": "={{ $json.ticket.numberTicket }}",
            "agentName": "={{ $json.ticket.agentName }}",
            "nameClient": "={{ $json.ticket.nameClient }}",
            "typeTicket": "={{ $json.ticket.typeTicket }}",
            "subjectTicket": "={{ $json.ticket.subjectTicket }}",
            "statusTicket": "={{ $json.ticket.statusTicket }}",
            "projectTicket": "={{ $json.ticket.projectTicket }}",
            "lastRespone": "Agent"
          },
          "matchingColumns": [
            "idTicket"
          ],
          "schema": [
            {
              "id": "idTicket",
              "displayName": "idTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "numberTicket",
              "displayName": "numberTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agentName",
              "displayName": "agentName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agenEmail",
              "displayName": "agenEmail",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "lastRespone",
              "displayName": "lastRespone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nameClient",
              "displayName": "nameClient",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "subjectTicket",
              "displayName": "subjectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "statusTicket",
              "displayName": "statusTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "typeTicket",
              "displayName": "typeTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "projectTicket",
              "displayName": "projectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ]
        },
        "options": {}
      },
      "id": "bd6e6bad-53d8-498e-a8f9-3ce1189b202b",
      "name": "Phuong7",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        4380,
        5840
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 2073353188,
          "mode": "list",
          "cachedResultName": "Chi",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=2073353188"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "idTicket": "={{ $json.ticket.idTicket }}",
            "numberTicket": "={{ $json.ticket.numberTicket }}",
            "agentName": "={{ $json.ticket.agentName }}",
            "agenEmail": "={{ $json.ticket.agentEmail }}",
            "nameClient": "={{ $json.ticket.nameClient }}",
            "subjectTicket": "={{ $json.ticket.subjectTicket }}",
            "statusTicket": "={{ $json.ticket.statusTicket }}",
            "typeTicket": "={{ $json.ticket.typeTicket }}",
            "projectTicket": "={{ $json.ticket.projectTicket }}",
            "lastRespone": "Agent"
          },
          "matchingColumns": [
            "idTicket"
          ],
          "schema": [
            {
              "id": "idTicket",
              "displayName": "idTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "numberTicket",
              "displayName": "numberTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agentName",
              "displayName": "agentName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agenEmail",
              "displayName": "agenEmail",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "lastRespone",
              "displayName": "lastRespone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nameClient",
              "displayName": "nameClient",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "subjectTicket",
              "displayName": "subjectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "statusTicket",
              "displayName": "statusTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "typeTicket",
              "displayName": "typeTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "projectTicket",
              "displayName": "projectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ]
        },
        "options": {}
      },
      "id": "b2ba7a3e-84b9-4382-a59e-63b2121371e1",
      "name": "Chi7",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        4400,
        6040
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 548962283,
          "mode": "list",
          "cachedResultName": "Chau",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=548962283"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "idTicket": "={{ $json.ticket.idTicket }}",
            "numberTicket": "={{ $json.ticket.numberTicket }}",
            "agentName": "={{ $json.ticket.agentName }}",
            "agenEmail": "={{ $json.ticket.agentEmail }}",
            "nameClient": "={{ $json.ticket.nameClient }}",
            "subjectTicket": "={{ $json.ticket.subjectTicket }}",
            "statusTicket": "={{ $json.ticket.statusTicket }}",
            "typeTicket": "={{ $json.ticket.typeTicket }}",
            "projectTicket": "={{ $json.ticket.projectTicket }}",
            "lastRespone": "Agent"
          },
          "matchingColumns": [
            "idTicket"
          ],
          "schema": [
            {
              "id": "idTicket",
              "displayName": "idTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "numberTicket",
              "displayName": "numberTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agentName",
              "displayName": "agentName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agenEmail",
              "displayName": "agenEmail",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "lastRespone",
              "displayName": "lastRespone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nameClient",
              "displayName": "nameClient",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "subjectTicket",
              "displayName": "subjectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "statusTicket",
              "displayName": "statusTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "typeTicket",
              "displayName": "typeTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "projectTicket",
              "displayName": "projectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ]
        },
        "options": {}
      },
      "id": "2c2a0b39-f36f-45dd-b292-a0a97e28bbac",
      "name": "Chau7",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        4380,
        6240
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "2a75c8aa-0ad9-4171-b215-7ddea1d07bd8",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "phuong.nt@netbasejsc.com",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Phuong"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "c01ba01c-39bd-41c7-82c6-cc9a876741d2",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "huy.nhd@netbasejsc.com",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Huy"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "7add08a8-dffe-44d7-b27c-73344547b865",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "chi.hu@netbasejsc.com",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Chi"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "1591f407-008f-43ca-b641-27b4d699617d",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "chau.lt@netbasejsc.com",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Chau"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "b33cb102-6f78-4a4d-9e88-5b2725a64274",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "",
                    "operator": {
                      "type": "string",
                      "operation": "notEmpty",
                      "singleValue": true
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "default"
            }
          ]
        },
        "options": {}
      },
      "id": "9e949a46-6029-4969-913b-c4e58e0e17db",
      "name": "Switch6",
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        4040,
        6000
      ]
    },
    {
      "parameters": {
        "jsCode": "const currentDate = new Date();  // Ngày hiện tại\nconst daysLimit = 15;  // Số ngày bạn muốn so sánh\nconst filteredItems = [];\n\n// Lặp qua từng item trong $input.all() và kiểm tra update_at\nfor (const item of $input.all()) {\n  const updateDate = new Date(item?.json?.replies[0]?.updated_at);  // Ngày cập nhật của item\n  const diffTime = currentDate - updateDate; // Tính sự khác biệt giữa ngày hiện tại và ngày update_at\n  const diffDays = diffTime / (1000 * 3600 * 24); // Chuyển từ milliseconds sang ngày\n  const idTicket = item?.json?.ticket?.idTicket\n  const idClient = item?.json?.ticket?.idClient\n  const clientTicket = item?.json?.ticket?.nameClient\n  const numberTicket = item?.json?.ticket?.numberTicket\n  const subjectTicket = item?.json?.ticket?.subjectTicket\n  const statusTicket = item?.json?.ticket?.statusTicket\n  const typeTicket = item?.json?.ticket?.typeTicket\n  const projectTicket = item?.json?.ticket?.projectTicket\n  const agentNameTicket = item?.json?.ticket?.agentName\n  const agentEmailTicket = item?.json?.ticket?.agentEmail\n  \n  if (diffDays > daysLimit) {\n    item.json.ticket = {idTicket: idTicket,\n                        idClient: idClient,\n                        nameClient: clientTicket,\n                        numberTicket: numberTicket,\n                        subjectTicket: subjectTicket,\n                        statusTicket: statusTicket,\n                        typeTicket: typeTicket,\n                        projectTicket: projectTicket,\n                        agentName: agentNameTicket,\n                        agentEmail: agentEmailTicket\n                       }\n    filteredItems.push(item);  // Thêm item vào danh sách nếu update_at sau 15 ngày\n  }\n}\n\nreturn filteredItems;  // Trả về các item thỏa mãn điều kiện\n"
      },
      "id": "bfc521e0-0a1c-4691-91cb-7736c3b1e2ff",
      "name": "Ticket 15 days4",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -1500,
        8360
      ]
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 1298489612,
          "mode": "list",
          "cachedResultName": "Phuong",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=1298489612"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "idTicket": "={{ $json.ticket.idTicket }}",
            "agenEmail": "={{ $json.ticket.agentEmail }}",
            "numberTicket": "={{ $json.ticket.numberTicket }}",
            "agentName": "={{ $json.ticket.agentName }}",
            "nameClient": "={{ $json.ticket.nameClient }}",
            "typeTicket": "={{ $json.ticket.typeTicket }}",
            "subjectTicket": "={{ $json.ticket.subjectTicket }}",
            "statusTicket": "={{ $json.ticket.statusTicket }}",
            "projectTicket": "={{ $json.ticket.projectTicket }}",
            "lastRespone": "Agent"
          },
          "matchingColumns": [
            "idTicket"
          ],
          "schema": [
            {
              "id": "idTicket",
              "displayName": "idTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "numberTicket",
              "displayName": "numberTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agentName",
              "displayName": "agentName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agenEmail",
              "displayName": "agenEmail",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "lastRespone",
              "displayName": "lastRespone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nameClient",
              "displayName": "nameClient",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "subjectTicket",
              "displayName": "subjectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "statusTicket",
              "displayName": "statusTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "typeTicket",
              "displayName": "typeTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "projectTicket",
              "displayName": "projectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ]
        },
        "options": {}
      },
      "id": "93724234-d85f-4a50-936f-fc8fd640ca6e",
      "name": "Phuong8",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        4520,
        7900
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 2073353188,
          "mode": "list",
          "cachedResultName": "Chi",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=2073353188"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "idTicket": "={{ $json.ticket.idTicket }}",
            "numberTicket": "={{ $json.ticket.numberTicket }}",
            "agentName": "={{ $json.ticket.agentName }}",
            "agenEmail": "={{ $json.ticket.agentEmail }}",
            "nameClient": "={{ $json.ticket.nameClient }}",
            "subjectTicket": "={{ $json.ticket.subjectTicket }}",
            "statusTicket": "={{ $json.ticket.statusTicket }}",
            "typeTicket": "={{ $json.ticket.typeTicket }}",
            "projectTicket": "={{ $json.ticket.projectTicket }}",
            "lastRespone": "Agent"
          },
          "matchingColumns": [
            "idTicket"
          ],
          "schema": [
            {
              "id": "idTicket",
              "displayName": "idTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "numberTicket",
              "displayName": "numberTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agentName",
              "displayName": "agentName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agenEmail",
              "displayName": "agenEmail",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "lastRespone",
              "displayName": "lastRespone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nameClient",
              "displayName": "nameClient",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "subjectTicket",
              "displayName": "subjectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "statusTicket",
              "displayName": "statusTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "typeTicket",
              "displayName": "typeTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "projectTicket",
              "displayName": "projectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ]
        },
        "options": {}
      },
      "id": "f92edcc5-5a3c-4eec-9735-2d00d1987db3",
      "name": "Chi8",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        4540,
        8100
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 548962283,
          "mode": "list",
          "cachedResultName": "Chau",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=548962283"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "idTicket": "={{ $json.ticket.idTicket }}",
            "numberTicket": "={{ $json.ticket.numberTicket }}",
            "agentName": "={{ $json.ticket.agentName }}",
            "agenEmail": "={{ $json.ticket.agentEmail }}",
            "nameClient": "={{ $json.ticket.nameClient }}",
            "subjectTicket": "={{ $json.ticket.subjectTicket }}",
            "statusTicket": "={{ $json.ticket.statusTicket }}",
            "typeTicket": "={{ $json.ticket.typeTicket }}",
            "projectTicket": "={{ $json.ticket.projectTicket }}",
            "lastRespone": "Agent"
          },
          "matchingColumns": [
            "idTicket"
          ],
          "schema": [
            {
              "id": "idTicket",
              "displayName": "idTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "numberTicket",
              "displayName": "numberTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agentName",
              "displayName": "agentName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agenEmail",
              "displayName": "agenEmail",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "lastRespone",
              "displayName": "lastRespone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nameClient",
              "displayName": "nameClient",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "subjectTicket",
              "displayName": "subjectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "statusTicket",
              "displayName": "statusTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "typeTicket",
              "displayName": "typeTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "projectTicket",
              "displayName": "projectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ]
        },
        "options": {}
      },
      "id": "802dd6b9-4026-4519-8cd7-1ee5b05a9e9c",
      "name": "Chau8",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        4520,
        8300
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "url": "=https://erp-amz.cloodo.com/v4/tickets/{{ $json.data.id }}/replies",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "cloodoApi",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "limit",
              "value": "10"
            }
          ]
        },
        "options": {}
      },
      "id": "d68ab448-b536-4784-9f2c-29747d94a2d4",
      "name": "Get replies8",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1220,
        7860
      ],
      "credentials": {
        "cloodoApi": {
          "id": "nP7U7wKTbfdSeafq",
          "name": "Cmsmart Worksuite account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "796ab7b7-b19f-4a08-938e-16c2e40a9325",
              "name": "replies",
              "value": "={{ $json.data }}",
              "type": "array"
            },
            {
              "id": "377ffdcb-97b2-4ab7-b211-3376a7437855",
              "name": "ticket",
              "value": "={{ $('Get Ticket6').item.json.data }}",
              "type": "object"
            }
          ]
        },
        "options": {}
      },
      "id": "047d0c25-a8f8-48e5-a11a-5bc8cdd3b306",
      "name": "Replies and Ticket8",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1460,
        7860
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "6dc6657f-526c-4633-a42e-591e9f2e964d",
              "leftValue": "={{ $json.replies[0].user.id }}",
              "rightValue": "={{ $json.ticket.idClient }}",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "844dfb37-08aa-4bad-84f7-495e0e77fcf0",
      "name": "Requester Replies7",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -1720,
        8360
      ]
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "2a75c8aa-0ad9-4171-b215-7ddea1d07bd8",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "phuong.nt@netbasejsc.com",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Phuong"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "c01ba01c-39bd-41c7-82c6-cc9a876741d2",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "huy.nhd@netbasejsc.com",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Huy"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "7add08a8-dffe-44d7-b27c-73344547b865",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "chi.hu@netbasejsc.com",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Chi"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "1591f407-008f-43ca-b641-27b4d699617d",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "chau.lt@netbasejsc.com",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Chau"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "b33cb102-6f78-4a4d-9e88-5b2725a64274",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "",
                    "operator": {
                      "type": "string",
                      "operation": "notEmpty",
                      "singleValue": true
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "default"
            }
          ]
        },
        "options": {}
      },
      "id": "1e950c5e-bcb7-492e-955b-d69db100b6bb",
      "name": "Switch7",
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        4180,
        8060
      ]
    },
    {
      "parameters": {
        "operation": "minus",
        "user_id": "={{ $('Ticket 15d').item.json.replies[0].user.id }}",
        "points": "=5",
        "note": "=QCM 83-84: {{ $('Ticket 15d').item.json.ticket.agentName }} -5 points Ticket no closed or Ticket no reply Client: https://worksuite.cloodo.com/apps/tickets/all-tickets/{{ $('Ticket 15d').item.json.ticket.idTicket }}"
      },
      "id": "9b60f054-22a9-4091-a1aa-ea1e9914ad3e",
      "name": "Cloodo Point9",
      "type": "@cloodo/n8n-nodes-cloodo-point.cloodoPoint",
      "typeVersion": 1,
      "position": [
        3040,
        7860
      ],
      "credentials": {
        "cloodoApi2": {
          "id": "82nsSr6jMyGAQbyu",
          "name": "Cmsmart Point API Key"
        }
      }
    },
    {
      "parameters": {
        "operation": "search",
        "keyword": "=QCM 83-84: {{ $('Ticket 15d').item.json.ticket.agentName }} -5 points Ticket no closed or Ticket no reply Client: https://worksuite.cloodo.com/apps/tickets/all-tickets/{{ $('Ticket 15d').item.json.ticket.idTicket }}",
        "max_limit_record": 50,
        "status_record": 0
      },
      "id": "14944d1d-73bb-4da8-8c45-09bb041194f2",
      "name": "Cloodo Point10",
      "type": "@cloodo/n8n-nodes-cloodo-point.cloodoPoint",
      "typeVersion": 1,
      "position": [
        2280,
        7880
      ],
      "credentials": {
        "cloodoApi2": {
          "id": "82nsSr6jMyGAQbyu",
          "name": "Cmsmart Point API Key"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.cloodo.com/mautic.php",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {}
          ]
        },
        "sendBody": true,
        "contentType": "multipart-form-data",
        "bodyParameters": {
          "parameters": [
            {
              "name": "email",
              "value": "={{ $('Ticket 15d').item.json.ticket.agentEmail }}"
            },
            {
              "name": "uname",
              "value": "={{ $('Ticket 15d').item.json.ticket.agentName }}"
            },
            {
              "name": "subject",
              "value": "=Respond to tickets when customers respond"
            },
            {
              "name": "send_mail",
              "value": "cmsmart"
            },
            {
              "name": "email_id",
              "value": "111"
            },
            {
              "name": "content",
              "value": "=<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Ticket Closure Reminder</title>\n</head>\n\n<body style=\"font-family: Arial, sans-serif; color: #333; line-height: 1.6; margin: 0;\">\n    <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"background-color: #fff;\">\n        <!-- Content -->\n        <tr>\n            <td style=\"font-size: 14px; color: black\">\n                <p>Dear {{ $('Ticket 15d').item.json.ticket.agentName }},</p>\n<p>I hope this message finds you well.</p>\n<p>This is a friendly reminder to please ensure that all customer tickets are responded to in a timely manner. Once a customer responds, it is important to follow up within 24 hours. Failure to do so will result in points being deducted from the CmsMart Admin system.</p>\n\n<p>Key points to remember:</p>\n\n<ul>\n<li>Ensure timely responses to customer feedback.</li>\n<li>Reply within 24 hours to avoid penalties.</li>\n<li>Points will be deducted from the CmsMart Admin for slow responses.</li>\n</ul>\n\n<p>We appreciate your cooperation and concern for this issue.</p>\n\n<p>Here is the ticket you need to respond to:</p>\n\n                <table width=\"100%\" cellpadding=\"5\" cellspacing=\"0\" style=\"border-collapse: collapse;\">\n                    <tr>\n                        <th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Ticket ID</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Subject</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Client</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Status</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Type</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Project</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Agent</th>\n                      \n                    </tr>\n\n                <tr>\n                    <td style=\"border-bottom: 1px solid #ddd; padding: 8px;\"><a href=\"https://worksuite.cloodo.com/apps/tickets/all-tickets/{{ $('Ticket 15d').item.json.ticket.idTicket }}\" style=\"color: #007bff; text-decoration: none;\">Ticket </a></td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">{{ $('Ticket 15d').item.json.ticket.subjectTicket }}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">{{ $('Ticket 15d').item.json.ticket.nameClient }}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">{{ $('Ticket 15d').item.json.ticket.statusTicket }}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">{{ $('Ticket 15d').item.json.ticket.typeTicket }}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">{{ $('Ticket 15d').item.json.ticket.projectTicket }}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">{{ $('Ticket 15d').item.json.ticket.agentName }}</td>\n                </tr>\n                </table>\n\n                <p>Best regards,</p>\n                <p>Cms Admin</p>\n            </td>\n        </tr>\n    </table>\n</body>\n\n</html>\n"
            }
          ]
        },
        "options": {}
      },
      "id": "5f3408b9-8693-482d-bc3e-a52b66c908d6",
      "name": "Send mail Reply Ticket",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2740,
        7860
      ]
    },
    {
      "parameters": {
        "options": {}
      },
      "id": "1a002234-688e-437e-893f-82a90031cc15",
      "name": "Loop Over Items2",
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        1960,
        7860
      ]
    },
    {
      "parameters": {
        "jsCode": "const currentDate = new Date();  // Ngày hiện tại\nconst daysLimit = 15;  // Số ngày bạn muốn so sánh\nconst filteredItems = [];\n\n// Lặp qua từng item trong $input.all() và kiểm tra update_at\nfor (const item of $input.all()) {\n  const updateDate = new Date(item?.json?.replies[0]?.created_at);  // Ngày cập nhật của item\n  const diffTime = currentDate - updateDate; // Tính sự khác biệt giữa ngày hiện tại và ngày update_at\n  const diffDays = diffTime / (1000 * 3600 * 24); // Chuyển từ milliseconds sang ngày\n  const idTicket = item?.json?.ticket?.id\n  const idClient = item?.json?.ticket?.requester?.id\n  const clientTicket = item?.json?.ticket?.requester?.name\n  const numberTicket = item?.json?.ticket?.ticket_number\n  const subjectTicket = item?.json?.ticket?.subject\n  const statusTicket = item?.json?.ticket?.status\n  const typeTicket = item?.json?.ticket?.type?.type\n  const projectTicket = item?.json?.ticket?.projects?.name\n  const agentNameTicket = item?.json?.ticket?.agent?.user?.name\n  const agentEmailTicket = item?.json?.ticket?.agent?.user?.email\n  \n  if (diffDays > daysLimit) {\n    item.json.ticket = {idTicket: idTicket,\n                        idClient: idClient,\n                        nameClient: clientTicket,\n                        numberTicket: numberTicket,\n                        subjectTicket: subjectTicket,\n                        statusTicket: statusTicket,\n                        typeTicket: typeTicket,\n                        projectTicket: projectTicket,\n                        agentName: agentNameTicket,\n                        agentEmail: agentEmailTicket\n                       }\n    filteredItems.push(item);  // Thêm item vào danh sách nếu update_at sau 15 ngày\n  }\n}\n\nreturn filteredItems;  // Trả về các item thỏa mãn điều kiện\n"
      },
      "id": "59fb47f1-ab40-4b9e-9706-02e16ae3bbba",
      "name": "Ticket 15d",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1700,
        7860
      ],
      "executeOnce": true
    },
    {
      "parameters": {
        "url": "=https://erp-amz.cloodo.com/v4/tickets/{{ $json.data.id }}/replies",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "cloodoApi",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "limit",
              "value": "10"
            }
          ]
        },
        "options": {}
      },
      "id": "8d84f513-60ad-4fda-94f3-304557b8935f",
      "name": "Get replies9",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1340,
        9300
      ],
      "credentials": {
        "cloodoApi": {
          "id": "nP7U7wKTbfdSeafq",
          "name": "Cmsmart Worksuite account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "796ab7b7-b19f-4a08-938e-16c2e40a9325",
              "name": "replies",
              "value": "={{ $json.data }}",
              "type": "array"
            },
            {
              "id": "377ffdcb-97b2-4ab7-b211-3376a7437855",
              "name": "ticket",
              "value": "={{ $('Get Ticket6').item.json.data }}",
              "type": "object"
            }
          ]
        },
        "options": {}
      },
      "id": "b9b8c9cf-12ca-45ae-a03f-7a1431c73460",
      "name": "Replies and Ticket9",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1580,
        9300
      ]
    },
    {
      "parameters": {
        "options": {}
      },
      "id": "576550e4-8825-4567-b8e4-d18a3ae05348",
      "name": "Loop Over Items3",
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        2080,
        9300
      ]
    },
    {
      "parameters": {
        "jsCode": "const currentDate = new Date();  // Ngày hiện tại\nconst daysLimit = 15;  // Số ngày bạn muốn so sánh\nconst filteredItems = [];\n\n// Lặp qua từng item trong $input.all() và kiểm tra update_at\nfor (const item of $input.all()) {\n  const updateDate = new Date(item?.json?.replies[0]?.created_at);  // Ngày cập nhật của item\n  const diffTime = currentDate - updateDate; // Tính sự khác biệt giữa ngày hiện tại và ngày update_at\n  const diffDays = diffTime / (1000 * 3600 * 24); // Chuyển từ milliseconds sang ngày\n  const idTicket = item?.json?.ticket?.id\n  const idClient = item?.json?.ticket?.requester?.id\n  const clientTicket = item?.json?.ticket?.requester?.name\n  const numberTicket = item?.json?.ticket?.ticket_number\n  const subjectTicket = item?.json?.ticket?.subject\n  const statusTicket = item?.json?.ticket?.status\n  const typeTicket = item?.json?.ticket?.type?.type\n  const projectTicket = item?.json?.ticket?.projects?.name\n  const agentNameTicket = item?.json?.ticket?.agent?.user?.name\n  const agentEmailTicket = item?.json?.ticket?.agent?.user?.email\n  \n  if (diffDays > daysLimit) {\n    item.json.ticket = {idTicket: idTicket,\n                        idClient: idClient,\n                        nameClient: clientTicket,\n                        numberTicket: numberTicket,\n                        subjectTicket: subjectTicket,\n                        statusTicket: statusTicket,\n                        typeTicket: typeTicket,\n                        projectTicket: projectTicket,\n                        agentName: agentNameTicket,\n                        agentEmail: agentEmailTicket\n                       }\n    filteredItems.push(item);  // Thêm item vào danh sách nếu update_at sau 15 ngày\n  }\n}\n\nreturn filteredItems;  // Trả về các item thỏa mãn điều kiện\n"
      },
      "id": "3b8f4a0f-5cff-4716-a98b-9b695a6e4d10",
      "name": "Ticket 15d1",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1820,
        9300
      ],
      "executeOnce": true
    },
    {
      "parameters": {
        "conditions": {
          "number": [
            {
              "value1": "={{ $json.total_records }}",
              "operation": "equal"
            }
          ]
        }
      },
      "id": "ed36f074-b973-4cc8-aec0-8c1042eadccf",
      "name": "IF not found4",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        2600,
        9320
      ]
    },
    {
      "parameters": {
        "operation": "minus",
        "user_id": "={{ $('Ticket 15d1').item.json.replies[0].user.id }}",
        "points": "=5",
        "note": "=QCM 83-84: {{ $('Ticket 15d1').item.json.ticket.agentName }} -5 points Ticket no closed or Ticket no reply Client: https://worksuite.cloodo.com/apps/tickets/all-tickets/{{ $('Ticket 15d1').item.json.ticket.idTicket }}"
      },
      "id": "c9300f06-034c-4910-92e7-5a0d3b19d05b",
      "name": "Cloodo Point11",
      "type": "@cloodo/n8n-nodes-cloodo-point.cloodoPoint",
      "typeVersion": 1,
      "position": [
        2940,
        9300
      ],
      "credentials": {
        "cloodoApi2": {
          "id": "82nsSr6jMyGAQbyu",
          "name": "Cmsmart Point API Key"
        }
      }
    },
    {
      "parameters": {
        "operation": "search",
        "keyword": "=QCM 83-84: {{ $('Ticket 15d1').item.json.ticket.agentName }} -5 points Ticket no closed or Ticket no reply Client: https://worksuite.cloodo.com/apps/tickets/all-tickets/{{ $('Ticket 15d1').item.json.ticket.idTicket }}",
        "max_limit_record": 50
      },
      "id": "4456a8e8-b191-456b-9c50-7fd5972f065e",
      "name": "Cloodo Point12",
      "type": "@cloodo/n8n-nodes-cloodo-point.cloodoPoint",
      "typeVersion": 1,
      "position": [
        2380,
        9320
      ],
      "credentials": {
        "cloodoApi2": {
          "id": "82nsSr6jMyGAQbyu",
          "name": "Cmsmart Point API Key"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "number": [
            {
              "value1": "={{ $json.total_records }}",
              "operation": "equal"
            }
          ]
        }
      },
      "id": "a17197f8-f374-4439-a346-43d165dabed1",
      "name": "IF not found",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        3400,
        4960
      ]
    },
    {
      "parameters": {
        "operation": "minus",
        "user_id": "={{ $('Ticket 8h1').item.json.replies[0].user.id }}",
        "points": "={{ $('Cloodo Point14')?.item?.json?.data.length > 0 ? Math.min(...$('Cloodo Point14')?.item?.json?.data?.map(item => item?.point)?.map(Number)) * -1 + 5 : 5  }}",
        "note": "=QCM 83-84: {{ $('Ticket 8h1').item.json.ticket.agentName }} -{{ $('Cloodo Point14')?.item?.json?.data.length > 0 ? Math.min(...$('Cloodo Point14')?.item?.json?.data?.map(item => item?.point)?.map(Number)) * -1 + 5 : 5  }} points Ticket no closed or Ticket no reply Client: https://worksuite.cloodo.com/apps/tickets/all-tickets/{{ $('Ticket 8h1').item.json.ticket.idTicket }}"
      },
      "id": "1f395c76-fe5b-4ce3-ad56-257ef9ff4bd7",
      "name": "Cloodo Point13",
      "type": "@cloodo/n8n-nodes-cloodo-point.cloodoPoint",
      "typeVersion": 1,
      "position": [
        3340,
        5640
      ],
      "credentials": {
        "cloodoApi2": {
          "id": "82nsSr6jMyGAQbyu",
          "name": "Cmsmart Point API Key"
        }
      }
    },
    {
      "parameters": {
        "operation": "search",
        "keyword": "=https://worksuite.cloodo.com/apps/tickets/all-tickets/{{ $('Ticket 8h1').item.json.ticket.idTicket }}",
        "max_limit_record": 50,
        "status_record": -1
      },
      "id": "75b61de8-7467-41c9-af92-63f5a029cd92",
      "name": "Cloodo Point14",
      "type": "@cloodo/n8n-nodes-cloodo-point.cloodoPoint",
      "typeVersion": 1,
      "position": [
        2820,
        5640
      ],
      "credentials": {
        "cloodoApi2": {
          "id": "82nsSr6jMyGAQbyu",
          "name": "Cmsmart Point API Key"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.cloodo.com/mautic.php",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {}
          ]
        },
        "sendBody": true,
        "contentType": "multipart-form-data",
        "bodyParameters": {
          "parameters": [
            {
              "name": "email",
              "value": "={{ $('Ticket 8h1').item.json.ticket.agentEmail }}"
            },
            {
              "name": "uname",
              "value": "={{ $('Ticket 8h1').item.json.ticket.agentName }}"
            },
            {
              "name": "subject",
              "value": "=Respond to tickets when customers respond"
            },
            {
              "name": "send_mail",
              "value": "cmsmart"
            },
            {
              "name": "email_id",
              "value": "111"
            },
            {
              "name": "content",
              "value": "=<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Ticket Closure Reminder</title>\n</head>\n\n<body style=\"font-family: Arial, sans-serif; color: #333; line-height: 1.6; margin: 0;\">\n    <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"background-color: #fff;\">\n        <!-- Content -->\n        <tr>\n            <td style=\"font-size: 14px; color: black\">\n                <p>Dear {{ $('Ticket 8h1').item.json.ticket.agentName }},</p>\n<p>I hope this message finds you well.</p>\n<p>This is a friendly reminder to please ensure that all customer tickets are responded to in a timely manner. Once a customer responds, it is important to follow up within 24 hours. Failure to do so will result in points being deducted from the CmsMart Admin system.</p>\n\n<p>Key points to remember:</p>\n\n<ul>\n<li>Ensure timely responses to customer feedback.</li>\n<li>Reply within 24 hours to avoid penalties.</li>\n<li>Points will be deducted from the CmsMart Admin for slow responses.</li>\n</ul>\n\n<p>We appreciate your cooperation and concern for this issue.</p>\n\n<p>Here is the ticket you need to respond to:</p>\n\n                <table width=\"100%\" cellpadding=\"5\" cellspacing=\"0\" style=\"border-collapse: collapse;\">\n                    <tr>\n                        <th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Ticket ID</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Subject</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Client</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Status</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Type</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Project</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Agent</th>\n                      \n                    </tr>\n\n                <tr>\n                    <td style=\"border-bottom: 1px solid #ddd; padding: 8px;\"><a href=\"https://worksuite.cloodo.com/apps/tickets/all-tickets/{{ $('Ticket 8h1').item.json.ticket.idTicket }}\" style=\"color: #007bff; text-decoration: none;\">Ticket </a></td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">{{ $('Ticket 8h1').item.json.ticket.subjectTicket }}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">{{ $('Ticket 8h1').item.json.ticket.nameClient }}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">{{ $('Ticket 8h1').item.json.ticket.statusTicket }}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">{{ $('Ticket 8h1').item.json.ticket.typeTicket }}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">{{ $('Ticket 8h1').item.json.ticket.projectTicket }}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">{{ $('Ticket 8h1').item.json.ticket.agentName }}</td>\n                </tr>\n                </table>\n\n                <p>Best regards,</p>\n                <p>Cms Admin</p>\n            </td>\n        </tr>\n    </table>\n</body>\n\n</html>\n"
            }
          ]
        },
        "options": {}
      },
      "id": "18774847-6174-40a7-b225-8d75e47f3070",
      "name": "Send mail Reply Ticket11",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        3080,
        5640
      ]
    },
    {
      "parameters": {
        "options": {}
      },
      "id": "8a8a6e97-292a-4934-959f-6f49d282c726",
      "name": "Loop Over Items4",
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        2500,
        5620
      ]
    },
    {
      "parameters": {
        "conditions": {
          "number": [
            {
              "value1": "={{ $json.total_records }}",
              "operation": "equal"
            }
          ]
        }
      },
      "id": "bb18ef30-88a4-4615-9dd5-47260cfde176",
      "name": "IF not found5",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        3000,
        5960
      ]
    },
    {
      "parameters": {
        "operation": "minus",
        "user_id": "={{ $('Ticket 15d2').item.json.replies[0].user.id }}",
        "points": "=5",
        "note": "=QCM 83-84: {{ $('Ticket 15d2').item.json.ticket.agentName }} -5 points Ticket no closed or Ticket no reply Client: https://worksuite.cloodo.com/apps/tickets/all-tickets/{{ $('Ticket 15d2').item.json.ticket.idTicket }}"
      },
      "id": "5135a02a-10e3-4fb5-b446-8d190337cbc6",
      "name": "Cloodo Point15",
      "type": "@cloodo/n8n-nodes-cloodo-point.cloodoPoint",
      "typeVersion": 1,
      "position": [
        3560,
        5940
      ],
      "credentials": {
        "cloodoApi2": {
          "id": "82nsSr6jMyGAQbyu",
          "name": "Cmsmart Point API Key"
        }
      }
    },
    {
      "parameters": {
        "operation": "search",
        "keyword": "=QCM 83-84: {{ $('Ticket 15d2').item.json.ticket.agentName }} -5 points Ticket no closed or Ticket no reply Client: https://worksuite.cloodo.com/apps/tickets/all-tickets/{{ $('Ticket 15d2').item.json.ticket.idTicket }}",
        "max_limit_record": 50,
        "status_record": 0
      },
      "id": "c0d87b7d-b1fb-4c8f-ae92-50fb021cd53c",
      "name": "Cloodo Point16",
      "type": "@cloodo/n8n-nodes-cloodo-point.cloodoPoint",
      "typeVersion": 1,
      "position": [
        2800,
        5960
      ],
      "credentials": {
        "cloodoApi2": {
          "id": "82nsSr6jMyGAQbyu",
          "name": "Cmsmart Point API Key"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.cloodo.com/mautic.php",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {}
          ]
        },
        "sendBody": true,
        "contentType": "multipart-form-data",
        "bodyParameters": {
          "parameters": [
            {
              "name": "email",
              "value": "={{ $('Ticket 15d2').item.json.ticket.agentEmail }}"
            },
            {
              "name": "uname",
              "value": "={{ $('Ticket 15d2').item.json.ticket.agentName }}"
            },
            {
              "name": "subject",
              "value": "=Respond to tickets when customers respond"
            },
            {
              "name": "send_mail",
              "value": "cmsmart"
            },
            {
              "name": "email_id",
              "value": "111"
            },
            {
              "name": "content",
              "value": "=<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Ticket Closure Reminder</title>\n</head>\n\n<body style=\"font-family: Arial, sans-serif; color: #333; line-height: 1.6; margin: 0;\">\n    <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"background-color: #fff;\">\n        <!-- Content -->\n        <tr>\n            <td style=\"font-size: 14px; color: black\">\n                <p>Dear {{ $('Ticket 15d2').item.json.ticket.agentName }},</p>\n<p>I hope this message finds you well.</p>\n<p>This is a friendly reminder to please ensure that all customer tickets are responded to in a timely manner. Once a customer responds, it is important to follow up within 24 hours. Failure to do so will result in points being deducted from the CmsMart Admin system.</p>\n\n<p>Key points to remember:</p>\n\n<ul>\n<li>Ensure timely responses to customer feedback.</li>\n<li>Reply within 24 hours to avoid penalties.</li>\n<li>Points will be deducted from the CmsMart Admin for slow responses.</li>\n</ul>\n\n<p>We appreciate your cooperation and concern for this issue.</p>\n\n<p>Here is the ticket you need to respond to:</p>\n\n                <table width=\"100%\" cellpadding=\"5\" cellspacing=\"0\" style=\"border-collapse: collapse;\">\n                    <tr>\n                        <th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Ticket ID</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Subject</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Client</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Status</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Type</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Project</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Agent</th>\n                      \n                    </tr>\n\n                <tr>\n                    <td style=\"border-bottom: 1px solid #ddd; padding: 8px;\"><a href=\"https://worksuite.cloodo.com/apps/tickets/all-tickets/{{ $('Ticket 15d2').item.json.ticket.idTicket }}\" style=\"color: #007bff; text-decoration: none;\">Ticket </a></td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">{{ $('Ticket 15d2').item.json.ticket.subjectTicket }}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">{{ $('Ticket 15d2').item.json.ticket.nameClient }}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">{{ $('Ticket 15d2').item.json.ticket.statusTicket }}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">{{ $('Ticket 15d2').item.json.ticket.typeTicket }}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">{{ $('Ticket 15d2').item.json.ticket.projectTicket }}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">{{ $('Ticket 15d2').item.json.ticket.agentName }}</td>\n                </tr>\n                </table>\n\n                <p>Best regards,</p>\n                <p>Cms Admin</p>\n            </td>\n        </tr>\n    </table>\n</body>\n\n</html>\n"
            }
          ]
        },
        "options": {}
      },
      "id": "2cde5ff9-7900-48fc-9cf9-f30008988746",
      "name": "Send mail Reply Ticket6",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        3260,
        5940
      ]
    },
    {
      "parameters": {
        "options": {}
      },
      "id": "5ffd8d60-a9c8-4bd1-bbd5-8c8efffc717c",
      "name": "Loop Over Items5",
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        2480,
        5940
      ]
    },
    {
      "parameters": {
        "jsCode": "const currentDate = new Date();  // Ngày hiện tại\nconst daysLimit = 8;  // Số ngày bạn muốn so sánh\nconst filteredItems = [];\n\n// Lặp qua từng item trong $input.all() và kiểm tra update_at\nfor (const item of $input.all()) {\n  const updateDate = new Date(item?.json?.replies[0]?.updated_at);  // Ngày cập nhật của item\n  const diffTime = currentDate - updateDate; // Tính sự khác biệt giữa ngày hiện tại và ngày update_at\n  const diffDays = diffTime / (1000 * 3600); // Chuyển từ milliseconds sang ngày\n  const idTicket = item?.json?.ticket?.id\n  const idClient = item?.json?.ticket?.requester?.id\n  const clientTicket = item?.json?.ticket?.requester?.name\n  const numberTicket = item?.json?.ticket?.ticket_number\n  const subjectTicket = item?.json?.ticket?.subject\n  const statusTicket = item?.json?.ticket?.status\n  const typeTicket = item?.json?.ticket?.type?.type\n  const projectTicket = item?.json?.ticket?.projects?.name\n  const agentNameTicket = item?.json?.ticket?.agent?.user?.name\n  const agentEmailTicket = item?.json?.ticket?.agent?.user?.email\n  \n  if (diffDays > daysLimit) {\n    item.json.ticket = {idTicket: idTicket,\n                        idClient: idClient,\n                        nameClient: clientTicket,\n                        numberTicket: numberTicket,\n                        subjectTicket: subjectTicket,\n                        statusTicket: statusTicket,\n                        typeTicket: typeTicket,\n                        projectTicket: projectTicket,\n                        agentName: agentNameTicket,\n                        agentEmail: agentEmailTicket\n                       }\n    filteredItems.push(item);  // Thêm item vào danh sách nếu update_at sau 15 ngày\n  }\n}\n\nreturn filteredItems;  // Trả về các item thỏa mãn điều kiện\n"
      },
      "id": "0f8d5d23-c8e3-4c7d-b269-aaf430b62538",
      "name": "Ticket 8h1",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1780,
        5640
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "6dc6657f-526c-4633-a42e-591e9f2e964d",
              "leftValue": "={{ $json.replies[0].user.id }}",
              "rightValue": "={{ $json.ticket.idClient }}",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "6e3aab83-3741-4c6a-89de-68822192a959",
      "name": "Requester Replies8",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1980,
        6520
      ]
    },
    {
      "parameters": {
        "operation": "minus",
        "user_id": "={{ $('Ticket 24h2').item.json.replies[0].user.id }}",
        "points": "={{ Math.min(...$('Cloodo Point18').item.json.data?.map(item => item?.point).map(Number)) * -1 }}",
        "note": "=QCM 83-84: {{ $('Ticket 24h2').item.json.ticket.agentName }} -{{ Math.min(...$('Cloodo Point18').item.json.data?.map(item => item?.point).map(Number)) * -1 }} points Ticket no closed or Ticket no reply Client: https://worksuite.cloodo.com/apps/tickets/all-tickets/{{ $('Ticket 24h2').item.json.ticket.idTicket }}"
      },
      "id": "853c82a5-4829-4eb7-b23d-eb03d83a7983",
      "name": "Cloodo Point17",
      "type": "@cloodo/n8n-nodes-cloodo-point.cloodoPoint",
      "typeVersion": 1,
      "position": [
        3040,
        6400
      ],
      "credentials": {
        "cloodoApi2": {
          "id": "82nsSr6jMyGAQbyu",
          "name": "Cmsmart Point API Key"
        }
      }
    },
    {
      "parameters": {
        "operation": "search",
        "keyword": "=https://worksuite.cloodo.com/apps/tickets/all-tickets/{{ $('Ticket 24h2').item.json.ticket.idTicket }}",
        "max_limit_record": 50,
        "status_record": 0
      },
      "id": "7717d599-eba3-44aa-a3d2-f8b33248cb3f",
      "name": "Cloodo Point18",
      "type": "@cloodo/n8n-nodes-cloodo-point.cloodoPoint",
      "typeVersion": 1,
      "position": [
        2740,
        6400
      ],
      "credentials": {
        "cloodoApi2": {
          "id": "82nsSr6jMyGAQbyu",
          "name": "Cmsmart Point API Key"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "id": "23d2753e-9322-42ae-89b6-efb88494ed6f",
      "name": "Loop Over Items6",
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        2480,
        6380
      ]
    },
    {
      "parameters": {
        "options": {}
      },
      "id": "00c6f18d-de08-4031-bc2f-c3f2e9ddecbd",
      "name": "Loop Over Items7",
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        2540,
        6760
      ]
    },
    {
      "parameters": {
        "conditions": {
          "number": [
            {
              "value1": "={{ $json.total_records }}",
              "operation": "equal"
            }
          ]
        }
      },
      "id": "baf5374e-38dd-4cb9-8c6c-088eb197912d",
      "name": "IF not found6",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        3060,
        6780
      ]
    },
    {
      "parameters": {
        "operation": "minus",
        "user_id": "={{ $('Ticket 15d3').item.json.replies[0].user.id }}",
        "points": "=5",
        "note": "=QCM 83-84: {{ $('Ticket 15d3').item.json.ticket.agentName }} -5 points Ticket no closed or Ticket no reply Client: https://worksuite.cloodo.com/apps/tickets/all-tickets/{{ $('Ticket 15d3').item.json.ticket.idTicket }}"
      },
      "id": "19de1597-b990-49df-8324-4a4c48c8de20",
      "name": "Cloodo Point19",
      "type": "@cloodo/n8n-nodes-cloodo-point.cloodoPoint",
      "typeVersion": 1,
      "position": [
        3400,
        6760
      ],
      "credentials": {
        "cloodoApi2": {
          "id": "82nsSr6jMyGAQbyu",
          "name": "Cmsmart Point API Key"
        }
      }
    },
    {
      "parameters": {
        "operation": "search",
        "keyword": "=QCM 83-84: {{ $('Ticket 15d3').item.json.ticket.agentName }} -5 points Ticket no closed or Ticket no reply Client: https://worksuite.cloodo.com/apps/tickets/all-tickets/{{ $('Ticket 15d3').item.json.ticket.idTicket }}",
        "max_limit_record": 50
      },
      "id": "6568de7e-68c1-4a15-94b3-3d4adc0a7dbc",
      "name": "Cloodo Point20",
      "type": "@cloodo/n8n-nodes-cloodo-point.cloodoPoint",
      "typeVersion": 1,
      "position": [
        2840,
        6780
      ],
      "credentials": {
        "cloodoApi2": {
          "id": "82nsSr6jMyGAQbyu",
          "name": "Cmsmart Point API Key"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const currentDate = new Date();  // Ngày hiện tại\nconst daysLimit = 15;  // Số ngày bạn muốn so sánh\nconst filteredItems = [];\n\n// Lặp qua từng item trong $input.all() và kiểm tra update_at\nfor (const item of $input.all()) {\n  const updateDate = new Date(item?.json?.replies[0]?.updated_at);  // Ngày cập nhật của item\n  const diffTime = currentDate - updateDate; // Tính sự khác biệt giữa ngày hiện tại và ngày update_at\n  const diffDays = diffTime / (1000 * 3600 * 24); // Chuyển từ milliseconds sang ngày\n  const idTicket = item?.json?.ticket?.idTicket\n  const idClient = item?.json?.ticket?.idClient\n  const clientTicket = item?.json?.ticket?.nameClient\n  const numberTicket = item?.json?.ticket?.numberTicket\n  const subjectTicket = item?.json?.ticket?.subjectTicket\n  const statusTicket = item?.json?.ticket?.statusTicket\n  const typeTicket = item?.json?.ticket?.typeTicket\n  const projectTicket = item?.json?.ticket?.projectTicket\n  const agentNameTicket = item?.json?.ticket?.agentName\n  const agentEmailTicket = item?.json?.ticket?.agentEmail\n  \n  if (diffDays > daysLimit) {\n    item.json.ticket = {idTicket: idTicket,\n                        idClient: idClient,\n                        nameClient: clientTicket,\n                        numberTicket: numberTicket,\n                        subjectTicket: subjectTicket,\n                        statusTicket: statusTicket,\n                        typeTicket: typeTicket,\n                        projectTicket: projectTicket,\n                        agentName: agentNameTicket,\n                        agentEmail: agentEmailTicket\n                       }\n    filteredItems.push(item);  // Thêm item vào danh sách nếu update_at sau 15 ngày\n  }\n}\n\nreturn filteredItems;  // Trả về các item thỏa mãn điều kiện\n"
      },
      "id": "ee0b5f34-6bff-4d5e-a00a-0e9ca37f8ee3",
      "name": "Ticket 15d2",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2260,
        5940
      ]
    },
    {
      "parameters": {
        "jsCode": "const currentDate = new Date();  // Ngày hiện tại\nconst daysLimit = 15;  // Số ngày bạn muốn so sánh\nconst filteredItems = [];\n\n// Lặp qua từng item trong $input.all() và kiểm tra update_at\nfor (const item of $input.all()) {\n  const updateDate = new Date(item?.json?.replies[0]?.updated_at);  // Ngày cập nhật của item\n  const diffTime = currentDate - updateDate; // Tính sự khác biệt giữa ngày hiện tại và ngày update_at\n  const diffDays = diffTime / (1000 * 3600 * 24); // Chuyển từ milliseconds sang ngày\n  const idTicket = item?.json?.ticket?.idTicket\n  const idClient = item?.json?.ticket?.idClient\n  const clientTicket = item?.json?.ticket?.nameClient\n  const numberTicket = item?.json?.ticket?.numberTicket\n  const subjectTicket = item?.json?.ticket?.subjectTicket\n  const statusTicket = item?.json?.ticket?.statusTicket\n  const typeTicket = item?.json?.ticket?.typeTicket\n  const projectTicket = item?.json?.ticket?.projectTicket\n  const agentNameTicket = item?.json?.ticket?.agentName\n  const agentEmailTicket = item?.json?.ticket?.agentEmail\n  \n  if (diffDays > daysLimit) {\n    item.json.ticket = {idTicket: idTicket,\n                        idClient: idClient,\n                        nameClient: clientTicket,\n                        numberTicket: numberTicket,\n                        subjectTicket: subjectTicket,\n                        statusTicket: statusTicket,\n                        typeTicket: typeTicket,\n                        projectTicket: projectTicket,\n                        agentName: agentNameTicket,\n                        agentEmail: agentEmailTicket\n                       }\n    filteredItems.push(item);  // Thêm item vào danh sách nếu update_at sau 15 ngày\n  }\n}\n\nreturn filteredItems;  // Trả về các item thỏa mãn điều kiện\n"
      },
      "id": "67bb218e-fc05-40d7-8cbb-067416fbb42e",
      "name": "Ticket 15d3",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2260,
        6760
      ]
    }
  ],
  "pinData": {},
  "connections": {
    "Ticket Pending": {
      "main": [
        [
          {
            "node": "Item Lists",
            "type": "main",
            "index": 0
          },
          {
            "node": "IF6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Item Lists": {
      "main": [
        [
          {
            "node": "Get Ticket",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get replies": {
      "main": [
        [
          {
            "node": "Replies and Ticket",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Ticket": {
      "main": [
        [
          {
            "node": "Get replies",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Replies and Ticket": {
      "main": [
        [
          {
            "node": "Ticket 15 days",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Ticket 15 days": {
      "main": [
        [
          {
            "node": "Requester Replies",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch": {
      "main": [
        [
          {
            "node": "Vy",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Phuong",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Huy",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Chi",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Chau",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Default",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch1": {
      "main": [
        [
          {
            "node": "Vy1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Phuong1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Huy1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Chi1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Chau1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Default1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Default2": {
      "main": [
        [
          {
            "node": "Code",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate2": {
      "main": [
        [
          {
            "node": "Send mail closed ticket8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Phuong2": {
      "main": [
        [
          {
            "node": "Check Agent Reply1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate4": {
      "main": [
        [
          {
            "node": "Send mail closed ticket2",
            "type": "main",
            "index": 0
          },
          {
            "node": "Send mail closed ticket7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate5": {
      "main": [
        [
          {
            "node": "Send mail Reply Ticket2",
            "type": "main",
            "index": 0
          },
          {
            "node": "Send mail Reply Ticket7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Huy2": {
      "main": [
        [
          {
            "node": "Check Agent Reply2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate6": {
      "main": [
        [
          {
            "node": "Send mail closed ticket3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate7": {
      "main": [
        [
          {
            "node": "Send mail Reply Ticket3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Chi2": {
      "main": [
        [
          {
            "node": "Check Agent Reply3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate8": {
      "main": [
        [
          {
            "node": "Send mail closed ticket4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate9": {
      "main": [
        [
          {
            "node": "Send mail Reply Ticket4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Chau2": {
      "main": [
        [
          {
            "node": "Check Agent Reply4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Item Lists1": {
      "main": [
        [
          {
            "node": "Get Ticket1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Ticket Pending1": {
      "main": [
        [
          {
            "node": "Item Lists1",
            "type": "main",
            "index": 0
          },
          {
            "node": "IF",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get replies1": {
      "main": [
        [
          {
            "node": "Replies and Ticket1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Ticket1": {
      "main": [
        [
          {
            "node": "Get replies1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Replies and Ticket1": {
      "main": [
        [
          {
            "node": "Ticket 24h",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Ticket 24h": {
      "main": [
        [
          {
            "node": "Requester Replies1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Requester Replies1": {
      "main": [
        [
          {
            "node": "Switch1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Requester Replies": {
      "main": [
        [
          {
            "node": "Switch",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check Agent Reply2": {
      "main": [
        [
          {
            "node": "Aggregate4",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Aggregate5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check Agent Reply3": {
      "main": [
        [
          {
            "node": "Aggregate6",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Aggregate7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check Agent Reply1": {
      "main": [
        [
          {
            "node": "Aggregate2",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Aggregate3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check Agent Reply4": {
      "main": [
        [
          {
            "node": "Aggregate8",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Aggregate9",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Item Lists2": {
      "main": [
        [
          {
            "node": "Get Ticket2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Ticket Pending2": {
      "main": [
        [
          {
            "node": "Item Lists2",
            "type": "main",
            "index": 0
          },
          {
            "node": "IF7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get replies2": {
      "main": [
        [
          {
            "node": "Replies and Ticket2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Ticket2": {
      "main": [
        [
          {
            "node": "Get replies2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Replies and Ticket2": {
      "main": [
        [
          {
            "node": "Ticket 15 days1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Ticket 15 days1": {
      "main": [
        [
          {
            "node": "Requester Replies2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Requester Replies2": {
      "main": [
        [
          {
            "node": "Switch2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch2": {
      "main": [
        [
          {
            "node": "Vy2",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Phuong3",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Huy3",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Chi3",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Chau3",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Default3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Item Lists3": {
      "main": [
        [
          {
            "node": "Get Ticket3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Ticket Pending3": {
      "main": [
        [
          {
            "node": "Item Lists3",
            "type": "main",
            "index": 0
          },
          {
            "node": "IF1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get replies3": {
      "main": [
        [
          {
            "node": "Replies and Ticket3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Ticket3": {
      "main": [
        [
          {
            "node": "Get replies3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Replies and Ticket3": {
      "main": [
        [
          {
            "node": "Ticket 24h1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Requester Replies3": {
      "main": [
        [
          {
            "node": "Switch3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Ticket 24h1": {
      "main": [
        [
          {
            "node": "Requester Replies3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "IF7": {
      "main": [
        [
          {
            "node": "Ticket Pending2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "IF1": {
      "main": [
        [
          {
            "node": "Ticket Pending3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code": {
      "main": [
        [
          {
            "node": "Cloodo CRM",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Item Lists4": {
      "main": [
        [
          {
            "node": "Get Ticket4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Ticket Pending4": {
      "main": [
        [
          {
            "node": "Item Lists4",
            "type": "main",
            "index": 0
          },
          {
            "node": "IF8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get replies4": {
      "main": [
        [
          {
            "node": "Replies and Ticket4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Ticket4": {
      "main": [
        [
          {
            "node": "Get replies4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Replies and Ticket4": {
      "main": [
        [
          {
            "node": "Ticket 8h1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Item Lists5": {
      "main": [
        [
          {
            "node": "Get Ticket5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Ticket Pending5": {
      "main": [
        [
          {
            "node": "Item Lists5",
            "type": "main",
            "index": 0
          },
          {
            "node": "IF2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get replies5": {
      "main": [
        [
          {
            "node": "Replies and Ticket5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Ticket5": {
      "main": [
        [
          {
            "node": "Get replies5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Replies and Ticket5": {
      "main": [
        [
          {
            "node": "Ticket 24h2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Item Lists6": {
      "main": [
        [
          {
            "node": "Get Ticket6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get replies6": {
      "main": [
        [
          {
            "node": "Replies and Ticket6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Ticket6": {
      "main": [
        [
          {
            "node": "Check client send",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Replies and Ticket6": {
      "main": [
        [
          {
            "node": "Ticket 8h",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Item Lists7": {
      "main": [
        [
          {
            "node": "Get Ticket7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get replies7": {
      "main": [
        [
          {
            "node": "Replies and Ticket7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Replies and Ticket7": {
      "main": [
        [
          {
            "node": "Ticket 24h3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "IF6": {
      "main": [
        [
          {
            "node": "Ticket Pending",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "IF": {
      "main": [
        [
          {
            "node": "Ticket Pending1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Ticket 24h2": {
      "main": [
        [
          {
            "node": "Requester Replies8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Ticket 24h3": {
      "main": [
        [
          {
            "node": "Requester Replies5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Cloodo Point3": {
      "main": [
        [
          {
            "node": "IF not found1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "IF not found1": {
      "main": [
        [
          {
            "node": "Cloodo Point2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Cloodo Point5": {
      "main": [
        [
          {
            "node": "Send mail Reply Ticket10",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Ticket 8h": {
      "main": [
        [
          {
            "node": "Requester Replies4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send mail Reply Ticket10": {
      "main": [
        [
          {
            "node": "Cloodo Point4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Ticket7": {
      "main": [
        [
          {
            "node": "Check client send1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Ticket Open": {
      "main": [
        [
          {
            "node": "Item Lists7",
            "type": "main",
            "index": 0
          },
          {
            "node": "IF3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Ticket Open1": {
      "main": [
        [
          {
            "node": "Item Lists6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Cloodo Point7": {
      "main": [
        [
          {
            "node": "Cloodo Point6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items": {
      "main": [
        [],
        [
          {
            "node": "Cloodo Point5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Cloodo Point4": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items1": {
      "main": [
        [],
        [
          {
            "node": "Cloodo Point7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check client send": {
      "main": [
        [
          {
            "node": "Get replies6",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get replies8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch3": {
      "main": [
        [
          {
            "node": "Vy3",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Phuong4",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Huy4",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Chi4",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Chau4",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Default4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch4": {
      "main": [
        [
          {
            "node": "Phuong5",
            "type": "main",
            "index": 0
          }
        ],
        [],
        [
          {
            "node": "Chi5",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Chau5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check client send1": {
      "main": [
        [
          {
            "node": "Get replies7",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get replies9",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Requester Replies6": {
      "main": [
        [
          {
            "node": "Loop Over Items4",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Ticket 15d2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch5": {
      "main": [
        [
          {
            "node": "Phuong6",
            "type": "main",
            "index": 0
          }
        ],
        [],
        [
          {
            "node": "Chi6",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Chau6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch6": {
      "main": [
        [
          {
            "node": "Phuong7",
            "type": "main",
            "index": 0
          }
        ],
        [],
        [
          {
            "node": "Chi7",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Chau7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get replies8": {
      "main": [
        [
          {
            "node": "Replies and Ticket8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Replies and Ticket8": {
      "main": [
        [
          {
            "node": "Ticket 15d",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch7": {
      "main": [
        [
          {
            "node": "Phuong8",
            "type": "main",
            "index": 0
          }
        ],
        [],
        [
          {
            "node": "Chi8",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Chau8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Requester Replies4": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Cloodo Point9": {
      "main": [
        [
          {
            "node": "Loop Over Items2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Cloodo Point10": {
      "main": [
        [
          {
            "node": "IF not found3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send mail Reply Ticket": {
      "main": [
        [
          {
            "node": "Cloodo Point9",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items2": {
      "main": [
        [],
        [
          {
            "node": "Cloodo Point10",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Requester Replies5": {
      "main": [
        [
          {
            "node": "Loop Over Items1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Cloodo Point6": {
      "main": [
        [
          {
            "node": "Loop Over Items1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Ticket 15d": {
      "main": [
        [
          {
            "node": "Loop Over Items2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "IF not found3": {
      "main": [
        [
          {
            "node": "Send mail Reply Ticket",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Loop Over Items2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get replies9": {
      "main": [
        [
          {
            "node": "Replies and Ticket9",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Replies and Ticket9": {
      "main": [
        [
          {
            "node": "Ticket 15d1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Ticket 15d1": {
      "main": [
        [
          {
            "node": "Loop Over Items3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "IF not found4": {
      "main": [
        [
          {
            "node": "Cloodo Point11",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Loop Over Items3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Cloodo Point12": {
      "main": [
        [
          {
            "node": "IF not found4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items3": {
      "main": [
        [],
        [
          {
            "node": "Cloodo Point12",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Cloodo Point11": {
      "main": [
        [
          {
            "node": "Loop Over Items3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Cloodo Point13": {
      "main": [
        [
          {
            "node": "Loop Over Items4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Cloodo Point14": {
      "main": [
        [
          {
            "node": "Send mail Reply Ticket11",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send mail Reply Ticket11": {
      "main": [
        [
          {
            "node": "Cloodo Point13",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items4": {
      "main": [
        [],
        [
          {
            "node": "Cloodo Point14",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "IF not found5": {
      "main": [
        [
          {
            "node": "Send mail Reply Ticket6",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Loop Over Items5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Cloodo Point15": {
      "main": [
        [
          {
            "node": "Loop Over Items5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Cloodo Point16": {
      "main": [
        [
          {
            "node": "IF not found5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send mail Reply Ticket6": {
      "main": [
        [
          {
            "node": "Cloodo Point15",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items5": {
      "main": [
        [],
        [
          {
            "node": "Cloodo Point16",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Ticket 8h1": {
      "main": [
        [
          {
            "node": "Requester Replies6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "When clicking ‘Test workflow’": {
      "main": [
        [
          {
            "node": "Ticket Pending5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Cloodo Point17": {
      "main": [
        [
          {
            "node": "Loop Over Items6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Cloodo Point18": {
      "main": [
        [
          {
            "node": "Cloodo Point17",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items6": {
      "main": [
        [],
        [
          {
            "node": "Cloodo Point18",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Requester Replies8": {
      "main": [
        [
          {
            "node": "Loop Over Items6",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Ticket 15d3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items7": {
      "main": [
        [],
        [
          {
            "node": "Cloodo Point20",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "IF not found6": {
      "main": [
        [
          {
            "node": "Cloodo Point19",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Loop Over Items7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Cloodo Point19": {
      "main": [
        [
          {
            "node": "Loop Over Items7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Cloodo Point20": {
      "main": [
        [
          {
            "node": "IF not found6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Ticket 15d2": {
      "main": [
        [
          {
            "node": "Loop Over Items5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Ticket 15d3": {
      "main": [
        [
          {
            "node": "Loop Over Items7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "6add64f7-4146-4ad0-b4eb-4bc75a567410",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "3909475c03ca6926b6e6edc6a6f06c1feb448ce7ac700d69b17002085d9011f8"
  },
  "id": "O99uf09H7CE1Gd4z",
  "tags": []
}