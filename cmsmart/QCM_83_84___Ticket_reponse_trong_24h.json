{
  "name": "QCM 83 84 - Ticket reponse trong 24h",
  "nodes": [
    {
      "parameters": {},
      "id": "3ed93264-2702-45eb-9b99-3f0abca71327",
      "name": "When clicking ‘Test workflow’",
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        4400,
        4060
      ]
    },
    {
      "parameters": {
        "aggregate": "aggregateAllItemData",
        "options": {}
      },
      "id": "725215c5-3c8d-4103-9925-c34628d8e1c5",
      "name": "Aggregate2",
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        5280,
        3820
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "a652141b-108c-48b9-801a-56a259585aaa",
              "leftValue": "={{ $json.lastRespone }}",
              "rightValue": "Agent",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "557f92f4-6838-40f6-8f29-019c928abff8",
      "name": "Check Agent Reply1",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        5060,
        3940
      ]
    },
    {
      "parameters": {
        "aggregate": "aggregateAllItemData",
        "options": {}
      },
      "id": "da3eec36-58a7-4f47-90b6-bec6b3a9468d",
      "name": "Aggregate3",
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        5300,
        4060
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.cloodo.com/mautic.php",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {}
          ]
        },
        "sendBody": true,
        "contentType": "multipart-form-data",
        "bodyParameters": {
          "parameters": [
            {
              "name": "email",
              "value": "={{ $json.data[0].agenEmail }}"
            },
            {
              "name": "uname",
              "value": "={{ $json.data[0].agentName }}"
            },
            {
              "name": "subject",
              "value": "=Respond to tickets when customers respond"
            },
            {
              "name": "send_mail",
              "value": "cmsmart"
            },
            {
              "name": "email_id",
              "value": "109"
            },
            {
              "name": "content",
              "value": "=<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Ticket Closure Reminder</title>\n</head>\n\n<body style=\"font-family: Arial, sans-serif; color: #333; line-height: 1.6; margin: 0;\">\n    <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"background-color: #fff;\">\n        <!-- Content -->\n        <tr>\n            <td style=\"font-size: 14px; color: black\">\n                <p>Dear {{ $json.data[0].agentName }},</p>\n<p>I hope this message finds you well.</p>\n<p>This is a friendly reminder to please ensure that all customer tickets are responded to in a timely manner. Once a customer responds, it is important to follow up within 24 hours. Failure to do so will result in points being deducted from the CmsMart Admin system.</p>\n\n<p>Key points to remember:</p>\n\n<ul>\n<li>Ensure timely responses to customer feedback.</li>\n<li>Reply within 24 hours to avoid penalties.</li>\n<li>Points will be deducted from the CmsMart Admin for slow responses.</li>\n</ul>\n\n<p>We appreciate your cooperation and concern for this issue.</p>\n\n<p>Here is the ticket you need to respond to:</p>\n\n                <table width=\"100%\" cellpadding=\"5\" cellspacing=\"0\" style=\"border-collapse: collapse;\">\n                    <tr>\n                        <th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Ticket ID</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Subject</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Client</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Status</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Type</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Project</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Agent</th>\n                      \n                    </tr>\n\n               {{ $json[\"data\"].map(item => `\n                <tr>\n                    <td style=\"border-bottom: 1px solid #ddd; padding: 8px;\"><a href=\"https://worksuite.cloodo.com/apps/tickets/all-tickets/${item.idTicket}\" style=\"color: #007bff; text-decoration: none;\">Ticket${item.numberTicket}</a></td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.subjectTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.nameClient}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.statusTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.typeTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.projectTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.agentName}</td>\n                </tr>\n                `).join('') }}\n                </table>\n\n                <p>Best regards,</p>\n                <p>Cms Admin</p>\n            </td>\n        </tr>\n    </table>\n</body>\n\n</html>\n"
            }
          ]
        },
        "options": {}
      },
      "id": "a454e1d0-7f76-443b-a29b-26e0b0581d8b",
      "name": "Send mail Reply Ticket1",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        5520,
        4060
      ]
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 1298489612,
          "mode": "list",
          "cachedResultName": "Phuong",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=1298489612"
        },
        "options": {}
      },
      "id": "adaf7971-3298-470d-8778-7e6f9ca06276",
      "name": "Phuong2",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        4860,
        3940
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "aggregate": "aggregateAllItemData",
        "options": {}
      },
      "id": "d204c443-7f92-46f5-be5e-e1061708c04d",
      "name": "Aggregate4",
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        5280,
        3320
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.cloodo.com/mautic.php",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {}
          ]
        },
        "sendBody": true,
        "contentType": "multipart-form-data",
        "bodyParameters": {
          "parameters": [
            {
              "name": "email",
              "value": "={{ $json.data[0].agenEmail }}"
            },
            {
              "name": "uname",
              "value": "={{ $json.data[0].agentName }}"
            },
            {
              "name": "subject",
              "value": "=Closed Ticket Client No Replies"
            },
            {
              "name": "send_mail",
              "value": "cmsmart"
            },
            {
              "name": "email_id",
              "value": "109"
            },
            {
              "name": "content",
              "value": "=<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Ticket Closure Reminder</title>\n</head>\n\n<body style=\"font-family: Arial, sans-serif; color: #333; line-height: 1.6; margin: 0;\">\n    <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"background-color: #fff;\">\n        <!-- Content -->\n        <tr>\n            <td style=\"font-size: 14px; color: black\">\n                <p>Dear {{ $json.data[0].agentName }},</p>\n\n                <p>Here is a friendly reminder about closing tickets:</p>\n\n                <ul>\n                    <li>Tickets must be closed within 15 days of the customer not responding.</li>\n                    <li>If the ticket is not closed after 24 hours, points will be deducted from the CmsMart Admin account.</li>\n                </ul>\n\n                <p>Please ensure that all tickets are properly managed and closed within the specified time frame.</p>\n\n                <p>Thank you for your attention to this matter.</p>\n                <p>Here are the links to the tickets you need to close:</p>\n\n                <table width=\"100%\" cellpadding=\"5\" cellspacing=\"0\" style=\"border-collapse: collapse;\">\n                    <tr>\n                        <th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Ticket ID</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Subject</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Client</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Status</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Type</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Project</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Agent</th>\n                      \n                    </tr>\n\n               {{ $json[\"data\"].map(item => `\n                <tr>\n                    <td style=\"border-bottom: 1px solid #ddd; padding: 8px;\"><a href=\"https://worksuite.cloodo.com/apps/tickets/all-tickets/${item.idTicket}\" style=\"color: #007bff; text-decoration: none;\">Ticket${item.numberTicket}</a></td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.subjectTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.nameClient}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.statusTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.typeTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.projectTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.agentName}</td>\n                </tr>\n                `).join('') }}\n                \n\n                </table>\n\n                <p>Best regards,</p>\n                <p>Cms Admin</p>\n            </td>\n        </tr>\n    </table>\n</body>\n\n</html>\n"
            }
          ]
        },
        "options": {}
      },
      "id": "94fd1c77-355f-4edd-abfb-1c7a6f1ad0b6",
      "name": "Send mail closed ticket2",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        5460,
        3320
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "a652141b-108c-48b9-801a-56a259585aaa",
              "leftValue": "={{ $json.lastRespone }}",
              "rightValue": "Agent",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "158a93a7-e594-48bc-bf6c-3ec501cd6ce8",
      "name": "Check Agent Reply2",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        5020,
        3420
      ]
    },
    {
      "parameters": {
        "aggregate": "aggregateAllItemData",
        "options": {}
      },
      "id": "90b9bf18-efff-49b8-9a0a-45325cf0df28",
      "name": "Aggregate5",
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        5260,
        3580
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.cloodo.com/mautic.php",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {}
          ]
        },
        "sendBody": true,
        "contentType": "multipart-form-data",
        "bodyParameters": {
          "parameters": [
            {
              "name": "email",
              "value": "={{ $json.data[0].agenEmail }}"
            },
            {
              "name": "uname",
              "value": "={{ $json.data[0].agentName }}"
            },
            {
              "name": "subject",
              "value": "=Respond to tickets when customers respond"
            },
            {
              "name": "send_mail",
              "value": "cmsmart"
            },
            {
              "name": "email_id",
              "value": "109"
            },
            {
              "name": "content",
              "value": "=<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Ticket Closure Reminder</title>\n</head>\n\n<body style=\"font-family: Arial, sans-serif; color: #333; line-height: 1.6; margin: 0;\">\n    <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"background-color: #fff;\">\n        <!-- Content -->\n        <tr>\n            <td style=\"font-size: 14px; color: black\">\n                <p>Dear {{ $json.data[0].agentName }},</p>\n<p>I hope this message finds you well.</p>\n<p>This is a friendly reminder to please ensure that all customer tickets are responded to in a timely manner. Once a customer responds, it is important to follow up within 24 hours. Failure to do so will result in points being deducted from the CmsMart Admin system.</p>\n\n<p>Key points to remember:</p>\n\n<ul>\n<li>Ensure timely responses to customer feedback.</li>\n<li>Reply within 24 hours to avoid penalties.</li>\n<li>Points will be deducted from the CmsMart Admin for slow responses.</li>\n</ul>\n\n<p>We appreciate your cooperation and concern for this issue.</p>\n\n<p>Here is the ticket you need to respond to:</p>\n\n                <table width=\"100%\" cellpadding=\"5\" cellspacing=\"0\" style=\"border-collapse: collapse;\">\n                    <tr>\n                        <th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Ticket ID</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Subject</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Client</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Status</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Type</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Project</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Agent</th>\n                      \n                    </tr>\n\n               {{ $json[\"data\"].map(item => `\n                <tr>\n                    <td style=\"border-bottom: 1px solid #ddd; padding: 8px;\"><a href=\"https://worksuite.cloodo.com/apps/tickets/all-tickets/${item.idTicket}\" style=\"color: #007bff; text-decoration: none;\">Ticket${item.numberTicket}</a></td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.subjectTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.nameClient}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.statusTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.typeTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.projectTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.agentName}</td>\n                </tr>\n                `).join('') }}\n                </table>\n\n                <p>Best regards,</p>\n                <p>Cms Admin</p>\n            </td>\n        </tr>\n    </table>\n</body>\n\n</html>\n"
            }
          ]
        },
        "options": {}
      },
      "id": "b320f35f-4e16-44ab-a098-d99b48ba7901",
      "name": "Send mail Reply Ticket2",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        5440,
        3580
      ]
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 1289877611,
          "mode": "list",
          "cachedResultName": "Huy",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=1289877611"
        },
        "options": {}
      },
      "id": "5e471658-a083-4acd-837d-92be08ec0f36",
      "name": "Huy2",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        4840,
        3420
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "aggregate": "aggregateAllItemData",
        "options": {}
      },
      "id": "d37a9a2e-89bc-4ef8-ae0f-762ed49c6183",
      "name": "Aggregate6",
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        5280,
        4300
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.cloodo.com/mautic.php",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {}
          ]
        },
        "sendBody": true,
        "contentType": "multipart-form-data",
        "bodyParameters": {
          "parameters": [
            {
              "name": "email",
              "value": "={{ $json.data[0].agenEmail }}"
            },
            {
              "name": "uname",
              "value": "={{ $json.data[0].agentName }}"
            },
            {
              "name": "subject",
              "value": "=Closed Ticket Client No Replies"
            },
            {
              "name": "send_mail",
              "value": "cmsmart"
            },
            {
              "name": "email_id",
              "value": "111"
            },
            {
              "name": "content",
              "value": "=<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Ticket Closure Reminder</title>\n</head>\n\n<body style=\"font-family: Arial, sans-serif; color: #333; line-height: 1.6; margin: 0;\">\n    <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"background-color: #fff;\">\n        <!-- Content -->\n        <tr>\n            <td style=\"font-size: 14px; color: black\">\n                <p>Dear {{ $json.data[0].agentName }},</p>\n\n                <p>Here is a friendly reminder about closing tickets:</p>\n\n                <ul>\n                    <li>Tickets must be closed within 15 days of the customer not responding.</li>\n                    <li>If the ticket is not closed after 24 hours, points will be deducted from the CmsMart Admin account.</li>\n                </ul>\n\n                <p>Please ensure that all tickets are properly managed and closed within the specified time frame.</p>\n\n                <p>Thank you for your attention to this matter.</p>\n                <p>Here are the links to the tickets you need to close:</p>\n\n                <table width=\"100%\" cellpadding=\"5\" cellspacing=\"0\" style=\"border-collapse: collapse;\">\n                    <tr>\n                        <th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Ticket ID</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Subject</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Client</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Status</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Type</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Project</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Agent</th>\n                      \n                    </tr>\n\n               {{ $json[\"data\"].map(item => `\n                <tr>\n                    <td style=\"border-bottom: 1px solid #ddd; padding: 8px;\"><a href=\"https://worksuite.cloodo.com/apps/tickets/all-tickets/${item.idTicket}\" style=\"color: #007bff; text-decoration: none;\">Ticket${item.numberTicket}</a></td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.subjectTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.nameClient}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.statusTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.typeTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.projectTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.agentName}</td>\n                </tr>\n                `).join('') }}\n                \n\n                </table>\n\n                <p>Best regards,</p>\n                <p>Cms Admin</p>\n            </td>\n        </tr>\n    </table>\n</body>\n\n</html>\n"
            }
          ]
        },
        "options": {}
      },
      "id": "4d040ffd-87ee-446f-a0b6-8832e9f7684a",
      "name": "Send mail closed ticket3",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        5500,
        4300
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "a652141b-108c-48b9-801a-56a259585aaa",
              "leftValue": "={{ $json.lastRespone }}",
              "rightValue": "Agent",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "4ccdfdfa-8fb9-486a-a63f-1cb549a7f593",
      "name": "Check Agent Reply3",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        5080,
        4400
      ]
    },
    {
      "parameters": {
        "aggregate": "aggregateAllItemData",
        "options": {}
      },
      "id": "65318f81-868a-4021-9a21-393c6ad8e773",
      "name": "Aggregate7",
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        5260,
        4500
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.cloodo.com/mautic.php",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {}
          ]
        },
        "sendBody": true,
        "contentType": "multipart-form-data",
        "bodyParameters": {
          "parameters": [
            {
              "name": "email",
              "value": "={{ $json.data[0].agenEmail }}"
            },
            {
              "name": "uname",
              "value": "={{ $json.data[0].agentName }}"
            },
            {
              "name": "subject",
              "value": "=Respond to tickets when customers respond"
            },
            {
              "name": "send_mail",
              "value": "cmsmart"
            },
            {
              "name": "email_id",
              "value": "109"
            },
            {
              "name": "content",
              "value": "=<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Ticket Closure Reminder</title>\n</head>\n\n<body style=\"font-family: Arial, sans-serif; color: #333; line-height: 1.6; margin: 0;\">\n    <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"background-color: #fff;\">\n        <!-- Content -->\n        <tr>\n            <td style=\"font-size: 14px; color: black\">\n                <p>Dear {{ $json.data[0].agentName }},</p>\n<p>I hope this message finds you well.</p>\n<p>This is a friendly reminder to please ensure that all customer tickets are responded to in a timely manner. Once a customer responds, it is important to follow up within 24 hours. Failure to do so will result in points being deducted from the CmsMart Admin system.</p>\n\n<p>Key points to remember:</p>\n\n<ul>\n<li>Ensure timely responses to customer feedback.</li>\n<li>Reply within 24 hours to avoid penalties.</li>\n<li>Points will be deducted from the CmsMart Admin for slow responses.</li>\n</ul>\n\n<p>We appreciate your cooperation and concern for this issue.</p>\n\n<p>Here is the ticket you need to respond to:</p>\n\n                <table width=\"100%\" cellpadding=\"5\" cellspacing=\"0\" style=\"border-collapse: collapse;\">\n                    <tr>\n                        <th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Ticket ID</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Subject</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Client</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Status</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Type</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Project</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Agent</th>\n                      \n                    </tr>\n\n               {{ $json[\"data\"].map(item => `\n                <tr>\n                    <td style=\"border-bottom: 1px solid #ddd; padding: 8px;\"><a href=\"https://worksuite.cloodo.com/apps/tickets/all-tickets/${item.idTicket}\" style=\"color: #007bff; text-decoration: none;\">Ticket${item.numberTicket}</a></td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.subjectTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.nameClient}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.statusTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.typeTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.projectTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.agentName}</td>\n                </tr>\n                `).join('') }}\n                </table>\n\n                <p>Best regards,</p>\n                <p>Cms Admin</p>\n            </td>\n        </tr>\n    </table>\n</body>\n\n</html>\n"
            }
          ]
        },
        "options": {}
      },
      "id": "9312a3d1-ac68-4106-8b1a-b0a088a492fa",
      "name": "Send mail Reply Ticket3",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        5500,
        4500
      ]
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 2073353188,
          "mode": "list",
          "cachedResultName": "Chi",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=2073353188"
        },
        "options": {}
      },
      "id": "b36a9a7e-c30d-4285-bdd5-7d707c01d014",
      "name": "Chi2",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        4900,
        4400
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "aggregate": "aggregateAllItemData",
        "options": {}
      },
      "id": "af6d61c8-ab9b-4d7a-81b6-37339ecffc09",
      "name": "Aggregate8",
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        5340,
        4720
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.cloodo.com/mautic.php",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {}
          ]
        },
        "sendBody": true,
        "contentType": "multipart-form-data",
        "bodyParameters": {
          "parameters": [
            {
              "name": "email",
              "value": "={{ $json.data[0].agenEmail }}"
            },
            {
              "name": "uname",
              "value": "={{ $json.data[0].agentName }}"
            },
            {
              "name": "subject",
              "value": "=Closed Ticket Client No Replies"
            },
            {
              "name": "send_mail",
              "value": "cmsmart"
            },
            {
              "name": "email_id",
              "value": "109"
            },
            {
              "name": "content",
              "value": "=<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Ticket Closure Reminder</title>\n</head>\n\n<body style=\"font-family: Arial, sans-serif; color: #333; line-height: 1.6; margin: 0;\">\n    <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"background-color: #fff;\">\n        <!-- Content -->\n        <tr>\n            <td style=\"font-size: 14px; color: black\">\n                <p>Dear {{ $json.data[0].agentName }},</p>\n\n                <p>Here is a friendly reminder about closing tickets:</p>\n\n                <ul>\n                    <li>Tickets must be closed within 15 days of the customer not responding.</li>\n                    <li>If the ticket is not closed after 24 hours, points will be deducted from the CmsMart Admin account.</li>\n                </ul>\n\n                <p>Please ensure that all tickets are properly managed and closed within the specified time frame.</p>\n\n                <p>Thank you for your attention to this matter.</p>\n                <p>Here are the links to the tickets you need to close:</p>\n\n                <table width=\"100%\" cellpadding=\"5\" cellspacing=\"0\" style=\"border-collapse: collapse;\">\n                    <tr>\n                        <th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Ticket ID</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Subject</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Client</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Status</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Type</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Project</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Agent</th>\n                      \n                    </tr>\n\n               {{ $json[\"data\"].map(item => `\n                <tr>\n                    <td style=\"border-bottom: 1px solid #ddd; padding: 8px;\"><a href=\"https://worksuite.cloodo.com/apps/tickets/all-tickets/${item.idTicket}\" style=\"color: #007bff; text-decoration: none;\">Ticket${item.numberTicket}</a></td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.subjectTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.nameClient}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.statusTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.typeTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.projectTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.agentName}</td>\n                </tr>\n                `).join('') }}\n                \n\n                </table>\n\n                <p>Best regards,</p>\n                <p>Cms Admin</p>\n            </td>\n        </tr>\n    </table>\n</body>\n\n</html>\n"
            }
          ]
        },
        "options": {}
      },
      "id": "8741e64e-bbd1-4c3c-97ba-58b4ee2d3fe8",
      "name": "Send mail closed ticket4",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        5560,
        4720
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "a652141b-108c-48b9-801a-56a259585aaa",
              "leftValue": "={{ $json.lastRespone }}",
              "rightValue": "Agent",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "10ee0a67-4207-4fa3-b28d-280bc85e344e",
      "name": "Check Agent Reply4",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        5100,
        4820
      ]
    },
    {
      "parameters": {
        "aggregate": "aggregateAllItemData",
        "options": {}
      },
      "id": "0257218a-09e8-43db-b107-42314b37d80a",
      "name": "Aggregate9",
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        5360,
        4920
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.cloodo.com/mautic.php",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {}
          ]
        },
        "sendBody": true,
        "contentType": "multipart-form-data",
        "bodyParameters": {
          "parameters": [
            {
              "name": "email",
              "value": "={{ $json.data[0].agenEmail }}"
            },
            {
              "name": "uname",
              "value": "={{ $json.data[0].agentName }}"
            },
            {
              "name": "subject",
              "value": "=Respond to tickets when customers respond"
            },
            {
              "name": "send_mail",
              "value": "cmsmart"
            },
            {
              "name": "email_id",
              "value": "109"
            },
            {
              "name": "content",
              "value": "=<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Ticket Closure Reminder</title>\n</head>\n\n<body style=\"font-family: Arial, sans-serif; color: #333; line-height: 1.6; margin: 0;\">\n    <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"background-color: #fff;\">\n        <!-- Content -->\n        <tr>\n            <td style=\"font-size: 14px; color: black\">\n                <p>Dear {{ $json.data[0].agentName }},</p>\n<p>I hope this message finds you well.</p>\n<p>This is a friendly reminder to please ensure that all customer tickets are responded to in a timely manner. Once a customer responds, it is important to follow up within 24 hours. Failure to do so will result in points being deducted from the CmsMart Admin system.</p>\n\n<p>Key points to remember:</p>\n\n<ul>\n<li>Ensure timely responses to customer feedback.</li>\n<li>Reply within 24 hours to avoid penalties.</li>\n<li>Points will be deducted from the CmsMart Admin for slow responses.</li>\n</ul>\n\n<p>We appreciate your cooperation and concern for this issue.</p>\n\n<p>Here is the ticket you need to respond to:</p>\n\n                <table width=\"100%\" cellpadding=\"5\" cellspacing=\"0\" style=\"border-collapse: collapse;\">\n                    <tr>\n                        <th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Ticket ID</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Subject</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Client</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Status</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Type</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Project</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Agent</th>\n                      \n                    </tr>\n\n               {{ $json[\"data\"].map(item => `\n                <tr>\n                    <td style=\"border-bottom: 1px solid #ddd; padding: 8px;\"><a href=\"https://worksuite.cloodo.com/apps/tickets/all-tickets/${item.idTicket}\" style=\"color: #007bff; text-decoration: none;\">Ticket${item.numberTicket}</a></td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.subjectTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.nameClient}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.statusTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.typeTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.projectTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.agentName}</td>\n                </tr>\n                `).join('') }}\n                </table>\n\n                <p>Best regards,</p>\n                <p>Cms Admin</p>\n            </td>\n        </tr>\n    </table>\n</body>\n\n</html>\n"
            }
          ]
        },
        "options": {}
      },
      "id": "115ec530-e170-407e-931f-8f19e3bfa840",
      "name": "Send mail Reply Ticket4",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        5560,
        4920
      ]
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 548962283,
          "mode": "list",
          "cachedResultName": "Chau",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=548962283"
        },
        "options": {}
      },
      "id": "55568a65-79b5-4ed3-8e38-364f19dc7138",
      "name": "Chau2",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        4920,
        4820
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.cloodo.com/mautic.php",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {}
          ]
        },
        "sendBody": true,
        "contentType": "multipart-form-data",
        "bodyParameters": {
          "parameters": [
            {
              "name": "email",
              "value": "={{ $json.data[0].agenEmail }}"
            },
            {
              "name": "uname",
              "value": "={{ $json.data[0].agentName }}"
            },
            {
              "name": "subject",
              "value": "=Closed Ticket Client No Replies"
            },
            {
              "name": "send_mail",
              "value": "cmsmart"
            },
            {
              "name": "email_id",
              "value": "111"
            },
            {
              "name": "content",
              "value": "=<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Ticket Closure Reminder</title>\n</head>\n\n<body style=\"font-family: Arial, sans-serif; color: #333; line-height: 1.6; margin: 0;\">\n    <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"background-color: #fff;\">\n        <!-- Content -->\n        <tr>\n            <td style=\"font-size: 14px; color: black\">\n                <p>Dear {{ $json.data[0].agentName }},</p>\n\n                <p>Here is a friendly reminder about closing tickets:</p>\n\n                <ul>\n                    <li>Tickets must be closed within 15 days of the customer not responding.</li>\n                    <li>If the ticket is not closed after 24 hours, points will be deducted from the CmsMart Admin account.</li>\n                </ul>\n\n                <p>Please ensure that all tickets are properly managed and closed within the specified time frame.</p>\n\n                <p>Thank you for your attention to this matter.</p>\n                <p>Here are the links to the tickets you need to close:</p>\n\n                <table width=\"100%\" cellpadding=\"5\" cellspacing=\"0\" style=\"border-collapse: collapse;\">\n                    <tr>\n                        <th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Ticket ID</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Subject</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Client</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Status</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Type</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Project</th>\n<th style=\"border-bottom: 1px solid #ddd; text-align: left;\">Agent</th>\n                      \n                    </tr>\n\n               {{ $json[\"data\"].map(item => `\n                <tr>\n                    <td style=\"border-bottom: 1px solid #ddd; padding: 8px;\"><a href=\"https://worksuite.cloodo.com/apps/tickets/all-tickets/${item.idTicket}\" style=\"color: #007bff; text-decoration: none;\">Ticket${item.numberTicket}</a></td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.subjectTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.nameClient}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.statusTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.typeTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.projectTicket}</td>\n<td style=\"border-bottom: 1px solid #ddd; padding: 8px;\">${item.agentName}</td>\n                </tr>\n                `).join('') }}\n                \n\n                </table>\n\n                <p>Best regards,</p>\n                <p>Cms Admin</p>\n            </td>\n        </tr>\n    </table>\n</body>\n\n</html>\n"
            }
          ]
        },
        "options": {}
      },
      "id": "fa581c7b-d999-430e-805b-657591374803",
      "name": "Send mail closed ticket8",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        5480,
        3820
      ]
    },
    {
      "parameters": {
        "fieldToSplitOut": "data",
        "options": {}
      },
      "id": "1e4613fc-e807-4a2c-ae97-d50b37c02c7b",
      "name": "Item Lists4",
      "type": "n8n-nodes-base.itemLists",
      "typeVersion": 3,
      "position": [
        780,
        5640
      ]
    },
    {
      "parameters": {
        "url": "https://erp-amz.cloodo.com/v4/tickets",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "cloodoApi",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "limit",
              "value": "100"
            },
            {
              "name": "date_from",
              "value": "2025-01-01"
            },
            {
              "name": "date_to",
              "value": "={{ $now.toDateTime() }}"
            },
            {
              "name": "sort",
              "value": "desc"
            },
            {
              "name": "status",
              "value": "pending"
            },
            {
              "name": "cursor",
              "value": "={{ $json.meta.next_cursor }}"
            }
          ]
        },
        "options": {}
      },
      "id": "7ceaecb9-36e4-4c11-8f14-fe05bcb6e95f",
      "name": "Ticket Pending4",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        480,
        5640
      ],
      "credentials": {
        "cloodoApi": {
          "id": "nP7U7wKTbfdSeafq",
          "name": "Cmsmart Worksuite account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $json.meta.next_cursor }}",
              "operation": "isNotEmpty"
            }
          ]
        }
      },
      "id": "9cdaa552-3a42-43e4-abe7-1f0419c4b405",
      "name": "IF8",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        680,
        5820
      ]
    },
    {
      "parameters": {
        "url": "=https://erp-amz.cloodo.com/v4/tickets/{{ $json.data.id }}/replies",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "cloodoApi",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "limit",
              "value": "10"
            }
          ]
        },
        "options": {}
      },
      "id": "175aa7d0-a864-472f-a6c8-d33536d0636f",
      "name": "Get replies4",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1300,
        5640
      ],
      "credentials": {
        "cloodoApi": {
          "id": "nP7U7wKTbfdSeafq",
          "name": "Cmsmart Worksuite account"
        }
      }
    },
    {
      "parameters": {
        "resource": "engagement",
        "ID": "={{ $json.id }}",
        "requestOptions": {}
      },
      "id": "5dd2ee53-23c5-4db1-9c5b-80ddcf146a5f",
      "name": "Get Ticket4",
      "type": "@cloodo/n8n-nodes-cloodo-crm.CloodoLeads",
      "typeVersion": 1,
      "position": [
        1040,
        5640
      ],
      "credentials": {
        "cloodoApi": {
          "id": "nP7U7wKTbfdSeafq",
          "name": "Cmsmart Worksuite account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "796ab7b7-b19f-4a08-938e-16c2e40a9325",
              "name": "replies",
              "value": "={{ $json.data }}",
              "type": "array"
            },
            {
              "id": "377ffdcb-97b2-4ab7-b211-3376a7437855",
              "name": "ticket",
              "value": "={{ $('Get Ticket4').item.json.data }}",
              "type": "object"
            }
          ]
        },
        "options": {}
      },
      "id": "7ede3467-8f2e-47c0-a9d8-7de535ee333f",
      "name": "Replies and Ticket4",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1540,
        5640
      ]
    },
    {
      "parameters": {
        "fieldToSplitOut": "data",
        "options": {}
      },
      "id": "40d919c7-299a-4a40-8505-3e65729a1e90",
      "name": "Item Lists5",
      "type": "n8n-nodes-base.itemLists",
      "typeVersion": 3,
      "position": [
        700,
        6380
      ]
    },
    {
      "parameters": {
        "url": "https://erp-amz.cloodo.com/v4/tickets",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "cloodoApi",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "limit",
              "value": "100"
            },
            {
              "name": "date_from",
              "value": "2025-01-01"
            },
            {
              "name": "date_to",
              "value": "={{ $now.toDateTime() }}"
            },
            {
              "name": "sort",
              "value": "desc"
            },
            {
              "name": "status",
              "value": "pending"
            },
            {
              "name": "cursor",
              "value": "={{ $json.meta.next_cursor }}"
            }
          ]
        },
        "options": {}
      },
      "id": "bf975231-bd67-4e4a-9735-88cb0489b83b",
      "name": "Ticket Pending5",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        440,
        6380
      ],
      "credentials": {
        "cloodoApi": {
          "id": "nP7U7wKTbfdSeafq",
          "name": "Cmsmart Worksuite account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $json.meta.next_cursor }}",
              "operation": "isNotEmpty"
            }
          ]
        }
      },
      "id": "33e3f8e8-efa2-40e9-bac2-edf686aa678d",
      "name": "IF2",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        640,
        6560
      ]
    },
    {
      "parameters": {
        "url": "=https://erp-amz.cloodo.com/v4/tickets/{{ $json.data.id }}/replies",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "cloodoApi",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "limit",
              "value": "10"
            }
          ]
        },
        "options": {}
      },
      "id": "57de30f9-49ef-4db2-ae9a-96998d466a32",
      "name": "Get replies5",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1200,
        6380
      ],
      "credentials": {
        "cloodoApi": {
          "id": "nP7U7wKTbfdSeafq",
          "name": "Cmsmart Worksuite account"
        }
      }
    },
    {
      "parameters": {
        "resource": "engagement",
        "ID": "={{ $json.id }}",
        "requestOptions": {}
      },
      "id": "3da29af4-a766-4d5e-a5fb-85133e195e8d",
      "name": "Get Ticket5",
      "type": "@cloodo/n8n-nodes-cloodo-crm.CloodoLeads",
      "typeVersion": 1,
      "position": [
        960,
        6380
      ],
      "credentials": {
        "cloodoApi": {
          "id": "nP7U7wKTbfdSeafq",
          "name": "Cmsmart Worksuite account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "796ab7b7-b19f-4a08-938e-16c2e40a9325",
              "name": "replies",
              "value": "={{ $json.data }}",
              "type": "array"
            },
            {
              "id": "377ffdcb-97b2-4ab7-b211-3376a7437855",
              "name": "ticket",
              "value": "={{ $('Get Ticket5').item.json.data }}",
              "type": "object"
            }
          ]
        },
        "options": {}
      },
      "id": "2a3d7bed-280d-492a-b063-23e1d2b56277",
      "name": "Replies and Ticket5",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1460,
        6380
      ]
    },
    {
      "parameters": {
        "jsCode": "const currentDate = new Date();  // Ngày hiện tại\nconst daysLimit = 24;  // Số ngày bạn muốn so sánh\nconst filteredItems = [];\n\n// Lặp qua từng item trong $input.all() và kiểm tra update_at\nfor (const item of $input.all()) {\n  const updateDate = new Date(item?.json?.replies[0]?.updated_at);  // Ngày cập nhật của item\n  const diffTime = currentDate - updateDate; // Tính sự khác biệt giữa ngày hiện tại và ngày update_at\n  const diffDays = diffTime / (1000 * 3600); // Chuyển từ milliseconds sang ngày\n  const idTicket = item?.json?.ticket?.id\n  const idClient = item?.json?.ticket?.requester?.id\n  const clientTicket = item?.json?.ticket?.requester?.name\n  const numberTicket = item?.json?.ticket?.ticket_number\n  const subjectTicket = item?.json?.ticket?.subject\n  const statusTicket = item?.json?.ticket?.status\n  const typeTicket = item?.json?.ticket?.type?.type\n  const projectTicket = item?.json?.ticket?.projects?.name\n  const agentNameTicket = item?.json?.ticket?.agent?.user?.name\n  const agentEmailTicket = item?.json?.ticket?.agent?.user?.email\n  \n  if (diffDays > daysLimit) {\n    item.json.ticket = {idTicket: idTicket,\n                        idClient: idClient,\n                        nameClient: clientTicket,\n                        numberTicket: numberTicket,\n                        subjectTicket: subjectTicket,\n                        statusTicket: statusTicket,\n                        typeTicket: typeTicket,\n                        projectTicket: projectTicket,\n                        agentName: agentNameTicket,\n                        agentEmail: agentEmailTicket\n                       }\n    filteredItems.push(item);  // Thêm item vào danh sách nếu update_at sau 15 ngày\n  }\n}\n\nreturn filteredItems;  // Trả về các item thỏa mãn điều kiện\n"
      },
      "id": "0d732970-3053-468e-9f9f-85a3f48b9cf4",
      "name": "Ticket 24h2",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1700,
        6380
      ]
    },
    {
      "parameters": {
        "fieldToSplitOut": "data",
        "options": {}
      },
      "id": "6cfd26b9-2235-4185-bbeb-48a0e9faf669",
      "name": "Item Lists6",
      "type": "n8n-nodes-base.itemLists",
      "typeVersion": 3,
      "position": [
        760,
        7080
      ]
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $json.meta.next_cursor }}",
              "operation": "isNotEmpty"
            }
          ]
        }
      },
      "id": "5e79b461-340f-4198-a9c8-702cabd96815",
      "name": "IF9",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        660,
        7360
      ]
    },
    {
      "parameters": {
        "url": "=https://erp-amz.cloodo.com/v4/tickets/{{ $json.data.id }}/replies",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "cloodoApi",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "limit",
              "value": "10"
            }
          ]
        },
        "options": {}
      },
      "id": "18ab209f-00ba-4088-ac70-96735e622682",
      "name": "Get replies6",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1520,
        7060
      ],
      "credentials": {
        "cloodoApi": {
          "id": "nP7U7wKTbfdSeafq",
          "name": "Cmsmart Worksuite account"
        }
      }
    },
    {
      "parameters": {
        "resource": "engagement",
        "ID": "={{ $json.id }}",
        "requestOptions": {}
      },
      "id": "857fb503-0356-4819-887e-fb9093d42161",
      "name": "Get Ticket6",
      "type": "@cloodo/n8n-nodes-cloodo-crm.CloodoLeads",
      "typeVersion": 1,
      "position": [
        1000,
        7080
      ],
      "executeOnce": false,
      "credentials": {
        "cloodoApi": {
          "id": "nP7U7wKTbfdSeafq",
          "name": "Cmsmart Worksuite account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "796ab7b7-b19f-4a08-938e-16c2e40a9325",
              "name": "replies",
              "value": "={{ $json.data }}",
              "type": "array"
            },
            {
              "id": "377ffdcb-97b2-4ab7-b211-3376a7437855",
              "name": "ticket",
              "value": "={{ $('Get Ticket6').item.json.data }}",
              "type": "object"
            }
          ]
        },
        "options": {}
      },
      "id": "8bf3130f-53b8-4757-9cd8-42f73a21199b",
      "name": "Replies and Ticket6",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1760,
        7060
      ]
    },
    {
      "parameters": {
        "fieldToSplitOut": "data",
        "options": {}
      },
      "id": "ae3317a5-01fb-4e8f-bf09-2590a93bb236",
      "name": "Item Lists7",
      "type": "n8n-nodes-base.itemLists",
      "typeVersion": 3,
      "position": [
        880,
        7880
      ]
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $json.meta.next_cursor }}",
              "operation": "isNotEmpty"
            }
          ]
        }
      },
      "id": "74ab07c8-4c80-48dd-9142-7a89129a04ea",
      "name": "IF3",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        720,
        8200
      ]
    },
    {
      "parameters": {
        "url": "=https://erp-amz.cloodo.com/v4/tickets/{{ $json.data.id }}/replies",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "cloodoApi",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "limit",
              "value": "10"
            }
          ]
        },
        "options": {}
      },
      "id": "2d7bf9c1-dae8-4df0-9208-ae80f048278c",
      "name": "Get replies7",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1680,
        7860
      ],
      "credentials": {
        "cloodoApi": {
          "id": "nP7U7wKTbfdSeafq",
          "name": "Cmsmart Worksuite account"
        }
      }
    },
    {
      "parameters": {
        "resource": "engagement",
        "ID": "={{ $json.id }}",
        "requestOptions": {}
      },
      "id": "2b70ebed-f0d4-42b4-bc40-ac5600c6c8eb",
      "name": "Get Ticket7",
      "type": "@cloodo/n8n-nodes-cloodo-crm.CloodoLeads",
      "typeVersion": 1,
      "position": [
        1140,
        7880
      ],
      "executeOnce": true,
      "credentials": {
        "cloodoApi": {
          "id": "nP7U7wKTbfdSeafq",
          "name": "Cmsmart Worksuite account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "796ab7b7-b19f-4a08-938e-16c2e40a9325",
              "name": "replies",
              "value": "={{ $json.data }}",
              "type": "array"
            },
            {
              "id": "377ffdcb-97b2-4ab7-b211-3376a7437855",
              "name": "ticket",
              "value": "={{ $('Get Ticket7').item.json.data }}",
              "type": "object"
            }
          ]
        },
        "options": {}
      },
      "id": "822d0dd1-18bc-4a18-afac-29ca608b26fa",
      "name": "Replies and Ticket7",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1900,
        7860
      ]
    },
    {
      "parameters": {
        "jsCode": "const currentDate = new Date();  // Ngày hiện tại\nconst daysLimit = 24;  // Số ngày bạn muốn so sánh\nconst filteredItems = [];\n\n// Lặp qua từng item trong $input.all() và kiểm tra update_at\nfor (const item of $input.all()) {\n  const updateDate = new Date(item?.json?.replies[0]?.created_at);  // Ngày cập nhật của item\n  const diffTime = currentDate - updateDate; // Tính sự khác biệt giữa ngày hiện tại và ngày update_at\n  const diffDays = diffTime / (1000 * 3600); // Chuyển từ milliseconds sang ngày\n  const idTicket = item?.json?.ticket?.id\n  const idClient = item?.json?.ticket?.requester?.id\n  const clientTicket = item?.json?.ticket?.requester?.name\n  const numberTicket = item?.json?.ticket?.ticket_number\n  const subjectTicket = item?.json?.ticket?.subject\n  const statusTicket = item?.json?.ticket?.status\n  const typeTicket = item?.json?.ticket?.type?.type\n  const projectTicket = item?.json?.ticket?.projects?.name\n  const agentNameTicket = item?.json?.ticket?.agent?.user?.name\n  const agentEmailTicket = item?.json?.ticket?.agent?.user?.email\n  \n  if (diffDays > daysLimit) {\n    item.json.ticket = {idTicket: idTicket,\n                        idClient: idClient,\n                        nameClient: clientTicket,\n                        numberTicket: numberTicket,\n                        subjectTicket: subjectTicket,\n                        statusTicket: statusTicket,\n                        typeTicket: typeTicket,\n                        projectTicket: projectTicket,\n                        agentName: agentNameTicket,\n                        agentEmail: agentEmailTicket\n                       }\n    filteredItems.push(item);  // Thêm item vào danh sách nếu update_at sau 15 ngày\n  }\n}\n\nreturn filteredItems;  // Trả về các item thỏa mãn điều kiện\n"
      },
      "id": "fd07ac8b-63b8-4245-a68d-fece5ceaccec",
      "name": "Ticket 24h3",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2120,
        7860
      ]
    },
    {
      "parameters": {
        "operation": "minus",
        "user_id": "={{ $('Ticket 8h').item.json.replies[0].user.id }}",
        "points": "={{ $('Cloodo Point5')?.item?.json?.data.length > 0 ? Math.min(...$('Cloodo Point5')?.item?.json?.data?.map(item => item?.point)?.map(Number)) * -1 + 5 : 5  }}",
        "note": "=QCM 83-84: {{ $('Ticket 8h').item.json.ticket.agentName }} -{{ $('Cloodo Point5')?.item?.json?.data.length > 0 ? Math.min(...$('Cloodo Point5')?.item?.json?.data?.map(item => item?.point)?.map(Number)) * -1 + 5 : 5  }} points Ticket no closed or Ticket no reply Client: https://worksuite.cloodo.com/apps/tickets/all-tickets/{{ $('Ticket 8h').item.json.ticket.idTicket }}"
      },
      "id": "46199e97-5bd4-42bb-9646-a012f23b1d80",
      "name": "Cloodo Point4",
      "type": "@cloodo/n8n-nodes-cloodo-point.cloodoPoint",
      "typeVersion": 1,
      "position": [
        3260,
        7060
      ],
      "credentials": {
        "cloodoApi2": {
          "id": "82nsSr6jMyGAQbyu",
          "name": "Cmsmart Point API Key"
        }
      }
    },
    {
      "parameters": {
        "operation": "search",
        "keyword": "=https://worksuite.cloodo.com/apps/tickets/all-tickets/{{ $('Ticket 8h').item.json.ticket.idTicket }}",
        "max_limit_record": 50,
        "status_record": -1
      },
      "id": "1936e5bb-781e-4d6c-8d65-5466ea9cc405",
      "name": "Cloodo Point5",
      "type": "@cloodo/n8n-nodes-cloodo-point.cloodoPoint",
      "typeVersion": 1,
      "position": [
        2960,
        7060
      ],
      "credentials": {
        "cloodoApi2": {
          "id": "82nsSr6jMyGAQbyu",
          "name": "Cmsmart Point API Key"
        }
      }
    },
    {
      "parameters": {
        "operation": "minus",
        "user_id": "={{ $('Ticket 24h3').item.json.replies[0].user.id }}",
        "points": "={{ Math.min(...$('Cloodo Point7').item.json.data?.map(item => item?.point).map(Number)) * -1 }}",
        "note": "=QCM 83-84: {{ $('Ticket 24h3').item.json.ticket.agentName }} -{{ Math.min(...$('Cloodo Point7').item.json.data?.map(item => item?.point).map(Number)) * -1 }} points Ticket no closed or Ticket no reply Client: https://worksuite.cloodo.com/apps/tickets/all-tickets/{{ $('Ticket 24h3').item.json.ticket.idTicket }}"
      },
      "id": "55b6894e-d20a-4dd9-b828-4e0e8b0590fa",
      "name": "Cloodo Point6",
      "type": "@cloodo/n8n-nodes-cloodo-point.cloodoPoint",
      "typeVersion": 1,
      "position": [
        3260,
        7860
      ],
      "credentials": {
        "cloodoApi2": {
          "id": "82nsSr6jMyGAQbyu",
          "name": "Cmsmart Point API Key"
        }
      }
    },
    {
      "parameters": {
        "operation": "search",
        "keyword": "=https://worksuite.cloodo.com/apps/tickets/all-tickets/{{ $('Ticket 24h3').item.json.ticket.idTicket }}",
        "max_limit_record": 50,
        "status_record": 0
      },
      "id": "7f643211-da32-4af5-b53a-911172757400",
      "name": "Cloodo Point7",
      "type": "@cloodo/n8n-nodes-cloodo-point.cloodoPoint",
      "typeVersion": 1,
      "position": [
        2960,
        7860
      ],
      "credentials": {
        "cloodoApi2": {
          "id": "82nsSr6jMyGAQbyu",
          "name": "Cmsmart Point API Key"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const currentDate = new Date();  // Ngày hiện tại\nconst daysLimit = 8;  // Số ngày bạn muốn so sánh\nconst filteredItems = [];\n\n// Lặp qua từng item trong $input.all() và kiểm tra update_at\nfor (const item of $input.all()) {\n  const updateDate = new Date(item?.json?.replies[0]?.created_at);  // Ngày cập nhật của item\n  const diffTime = currentDate - updateDate; // Tính sự khác biệt giữa ngày hiện tại và ngày update_at\n  const diffDays = diffTime / (1000 * 3600); // Chuyển từ milliseconds sang ngày\n  const idTicket = item?.json?.ticket?.id\n  const idClient = item?.json?.ticket?.requester?.id\n  const clientTicket = item?.json?.ticket?.requester?.name\n  const numberTicket = item?.json?.ticket?.ticket_number\n  const subjectTicket = item?.json?.ticket?.subject\n  const statusTicket = item?.json?.ticket?.status\n  const typeTicket = item?.json?.ticket?.type?.type\n  const projectTicket = item?.json?.ticket?.projects?.name\n  const agentNameTicket = item?.json?.ticket?.agent?.user?.name\n  const agentEmailTicket = item?.json?.ticket?.agent?.user?.email\n  \n  if (diffDays > daysLimit) {\n    item.json.ticket = {idTicket: idTicket,\n                        idClient: idClient,\n                        nameClient: clientTicket,\n                        numberTicket: numberTicket,\n                        subjectTicket: subjectTicket,\n                        statusTicket: statusTicket,\n                        typeTicket: typeTicket,\n                        projectTicket: projectTicket,\n                        agentName: agentNameTicket,\n                        agentEmail: agentEmailTicket\n                       }\n    filteredItems.push(item);  // Thêm item vào danh sách nếu update_at sau 15 ngày\n  }\n}\n\nreturn filteredItems;  // Trả về các item thỏa mãn điều kiện\n"
      },
      "id": "9be8e008-0f82-472b-9a58-2325ebff634a",
      "name": "Ticket 8h",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2000,
        7060
      ],
      "executeOnce": true
    },
    {
      "parameters": {
        "conditions": {
          "number": [
            {
              "value1": "={{ $json.total_records }}",
              "operation": "equal"
            }
          ]
        }
      },
      "id": "63635e57-769e-4058-8cb1-4699e32dfb6c",
      "name": "IF not found3",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        3140,
        7440
      ]
    },
    {
      "parameters": {
        "url": "https://erp-amz.cloodo.com/v4/tickets",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "cloodoApi",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "limit",
              "value": "100"
            },
            {
              "name": "date_from",
              "value": "2025-01-01"
            },
            {
              "name": "date_to",
              "value": "={{ $now.toDateTime() }}"
            },
            {
              "name": "sort",
              "value": "desc"
            },
            {
              "name": "status",
              "value": "open"
            },
            {
              "name": "cursor",
              "value": "={{ $json.meta.next_cursor }}"
            }
          ]
        },
        "options": {}
      },
      "id": "311973c7-3088-423f-93eb-fc1f38d28b58",
      "name": "Ticket Open",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        580,
        7880
      ],
      "credentials": {
        "cloodoApi": {
          "id": "nP7U7wKTbfdSeafq",
          "name": "Cmsmart Worksuite account"
        }
      }
    },
    {
      "parameters": {
        "url": "https://erp-amz.cloodo.com/v4/tickets",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "cloodoApi",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "limit",
              "value": "100"
            },
            {
              "name": "date_from",
              "value": "2025-01-01"
            },
            {
              "name": "date_to",
              "value": "={{ $now.toDateTime() }}"
            },
            {
              "name": "sort",
              "value": "desc"
            },
            {
              "name": "status",
              "value": "open"
            },
            {
              "name": "cursor",
              "value": "={{ $json.meta.next_cursor }}"
            }
          ]
        },
        "options": {}
      },
      "id": "286751fc-e0f4-4d5f-b3c6-fb83205186cd",
      "name": "Ticket Open1",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        460,
        7080
      ],
      "credentials": {
        "cloodoApi": {
          "id": "nP7U7wKTbfdSeafq",
          "name": "Cmsmart Worksuite account"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "id": "1fada74d-d135-4d4a-8f52-c35e90c73138",
      "name": "Loop Over Items",
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        2640,
        7040
      ]
    },
    {
      "parameters": {
        "options": {}
      },
      "id": "5281c4a7-7ff7-4c90-af6d-22ab5f84b0fd",
      "name": "Loop Over Items1",
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        2700,
        7840
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "9ab35c59-58f9-43a8-8026-b499641ff4cd",
              "leftValue": "={{ $json.data.requester.email }}",
              "rightValue": "={{ $json.data.create_by.email }}",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "dfdea424-b2bf-433a-807e-16bceec84362",
      "name": "Check client send",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1220,
        7080
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "6dc6657f-526c-4633-a42e-591e9f2e964d",
              "leftValue": "={{ $json.replies[0].user.id }}",
              "rightValue": "={{ $json.ticket.idClient }}",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "8133449b-cc51-4082-96fa-3034a166f7f7",
      "name": "Requester Replies4",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        2240,
        7060
      ]
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 1298489612,
          "mode": "list",
          "cachedResultName": "Phuong",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=1298489612"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "idTicket": "={{ $json.ticket.idTicket }}",
            "agenEmail": "={{ $json.ticket.agentEmail }}",
            "numberTicket": "={{ $json.ticket.numberTicket }}",
            "agentName": "={{ $json.ticket.agentName }}",
            "lastRespone": "Client",
            "nameClient": "={{ $json.ticket.nameClient }}",
            "typeTicket": "={{ $json.ticket.typeTicket }}",
            "subjectTicket": "={{ $json.ticket.subjectTicket }}",
            "statusTicket": "={{ $json.ticket.statusTicket }}",
            "projectTicket": "={{ $json.ticket.projectTicket }}"
          },
          "matchingColumns": [
            "idTicket"
          ],
          "schema": [
            {
              "id": "idTicket",
              "displayName": "idTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "numberTicket",
              "displayName": "numberTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agentName",
              "displayName": "agentName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agenEmail",
              "displayName": "agenEmail",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "lastRespone",
              "displayName": "lastRespone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nameClient",
              "displayName": "nameClient",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "subjectTicket",
              "displayName": "subjectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "statusTicket",
              "displayName": "statusTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "typeTicket",
              "displayName": "typeTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "projectTicket",
              "displayName": "projectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ]
        },
        "options": {}
      },
      "id": "8c3cbe90-4d9a-4a59-800c-0691e492df0a",
      "name": "Phuong5",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        3880,
        4120
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 2073353188,
          "mode": "list",
          "cachedResultName": "Chi",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=2073353188"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "idTicket": "={{ $json.ticket.idTicket }}",
            "numberTicket": "={{ $json.ticket.numberTicket }}",
            "agentName": "={{ $json.ticket.agentName }}",
            "agenEmail": "={{ $json.ticket.agentEmail }}",
            "lastRespone": "Client",
            "nameClient": "={{ $json.ticket.nameClient }}",
            "subjectTicket": "={{ $json.ticket.subjectTicket }}",
            "statusTicket": "={{ $json.ticket.statusTicket }}",
            "typeTicket": "={{ $json.ticket.typeTicket }}",
            "projectTicket": "={{ $json.ticket.projectTicket }}"
          },
          "matchingColumns": [
            "idTicket"
          ],
          "schema": [
            {
              "id": "idTicket",
              "displayName": "idTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "numberTicket",
              "displayName": "numberTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agentName",
              "displayName": "agentName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agenEmail",
              "displayName": "agenEmail",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "lastRespone",
              "displayName": "lastRespone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nameClient",
              "displayName": "nameClient",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "subjectTicket",
              "displayName": "subjectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "statusTicket",
              "displayName": "statusTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "typeTicket",
              "displayName": "typeTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "projectTicket",
              "displayName": "projectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ]
        },
        "options": {}
      },
      "id": "1e1910f6-3343-470e-9456-683fb32695b0",
      "name": "Chi5",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        3880,
        4440
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 548962283,
          "mode": "list",
          "cachedResultName": "Chau",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=548962283"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "idTicket": "={{ $json.ticket.idTicket }}",
            "numberTicket": "={{ $json.ticket.numberTicket }}",
            "agentName": "={{ $json.ticket.agentName }}",
            "agenEmail": "={{ $json.ticket.agentEmail }}",
            "lastRespone": "Client",
            "nameClient": "={{ $json.ticket.nameClient }}",
            "subjectTicket": "={{ $json.ticket.subjectTicket }}",
            "statusTicket": "={{ $json.ticket.statusTicket }}",
            "typeTicket": "={{ $json.ticket.typeTicket }}",
            "projectTicket": "={{ $json.ticket.projectTicket }}"
          },
          "matchingColumns": [
            "idTicket"
          ],
          "schema": [
            {
              "id": "idTicket",
              "displayName": "idTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "numberTicket",
              "displayName": "numberTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agentName",
              "displayName": "agentName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agenEmail",
              "displayName": "agenEmail",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "lastRespone",
              "displayName": "lastRespone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nameClient",
              "displayName": "nameClient",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "subjectTicket",
              "displayName": "subjectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "statusTicket",
              "displayName": "statusTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "typeTicket",
              "displayName": "typeTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "projectTicket",
              "displayName": "projectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ]
        },
        "options": {}
      },
      "id": "03576651-3c8e-4c3f-a312-473df15f981d",
      "name": "Chau5",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        3860,
        4640
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "9ab35c59-58f9-43a8-8026-b499641ff4cd",
              "leftValue": "={{ $json.data.requester.email }}",
              "rightValue": "={{ $json.data.create_by.email }}",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "6ad68853-4f01-4a27-b893-e87dbe312b0e",
      "name": "Check client send1",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1400,
        7880
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "6dc6657f-526c-4633-a42e-591e9f2e964d",
              "leftValue": "={{ $json.replies[0].user.id }}",
              "rightValue": "={{ $json.ticket.idClient }}",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "8b3f1962-962a-4399-97a1-260df1f40b6b",
      "name": "Requester Replies5",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        2380,
        7860
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "6dc6657f-526c-4633-a42e-591e9f2e964d",
              "leftValue": "={{ $json.replies[0].user.id }}",
              "rightValue": "={{ $json.ticket.idClient }}",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "c31acbd8-0516-42e0-b09b-77b403e49424",
      "name": "Requester Replies6",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        2040,
        5640
      ]
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "2a75c8aa-0ad9-4171-b215-7ddea1d07bd8",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "phuong.nt@netbasejsc.com",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Phuong"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "c01ba01c-39bd-41c7-82c6-cc9a876741d2",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "huy.nhd@netbasejsc.com",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Huy"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "7add08a8-dffe-44d7-b27c-73344547b865",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "chi.hu@netbasejsc.com",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Chi"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "1591f407-008f-43ca-b641-27b4d699617d",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "chau.lt@netbasejsc.com",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Chau"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "b33cb102-6f78-4a4d-9e88-5b2725a64274",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "",
                    "operator": {
                      "type": "string",
                      "operation": "notEmpty",
                      "singleValue": true
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "default"
            }
          ]
        },
        "options": {}
      },
      "id": "ef865d4a-3798-48e6-82dd-352d2aed5207",
      "name": "Switch5",
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        3420,
        3120
      ]
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 1298489612,
          "mode": "list",
          "cachedResultName": "Phuong",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=1298489612"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "idTicket": "={{ $json.ticket.idTicket }}",
            "agenEmail": "={{ $json.ticket.agentEmail }}",
            "numberTicket": "={{ $json.ticket.numberTicket }}",
            "agentName": "={{ $json.ticket.agentName }}",
            "lastRespone": "Client",
            "nameClient": "={{ $json.ticket.nameClient }}",
            "typeTicket": "={{ $json.ticket.typeTicket }}",
            "subjectTicket": "={{ $json.ticket.subjectTicket }}",
            "statusTicket": "={{ $json.ticket.statusTicket }}",
            "projectTicket": "={{ $json.ticket.projectTicket }}"
          },
          "matchingColumns": [
            "idTicket"
          ],
          "schema": [
            {
              "id": "idTicket",
              "displayName": "idTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "numberTicket",
              "displayName": "numberTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agentName",
              "displayName": "agentName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agenEmail",
              "displayName": "agenEmail",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "lastRespone",
              "displayName": "lastRespone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nameClient",
              "displayName": "nameClient",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "subjectTicket",
              "displayName": "subjectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "statusTicket",
              "displayName": "statusTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "typeTicket",
              "displayName": "typeTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "projectTicket",
              "displayName": "projectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ]
        },
        "options": {}
      },
      "id": "150043cf-b59b-46a1-8a4f-586360e58157",
      "name": "Phuong6",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        3740,
        2940
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 2073353188,
          "mode": "list",
          "cachedResultName": "Chi",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=2073353188"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "idTicket": "={{ $json.ticket.idTicket }}",
            "numberTicket": "={{ $json.ticket.numberTicket }}",
            "agentName": "={{ $json.ticket.agentName }}",
            "agenEmail": "={{ $json.ticket.agentEmail }}",
            "lastRespone": "Client",
            "nameClient": "={{ $json.ticket.nameClient }}",
            "subjectTicket": "={{ $json.ticket.subjectTicket }}",
            "statusTicket": "={{ $json.ticket.statusTicket }}",
            "typeTicket": "={{ $json.ticket.typeTicket }}",
            "projectTicket": "={{ $json.ticket.projectTicket }}"
          },
          "matchingColumns": [
            "idTicket"
          ],
          "schema": [
            {
              "id": "idTicket",
              "displayName": "idTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "numberTicket",
              "displayName": "numberTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agentName",
              "displayName": "agentName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agenEmail",
              "displayName": "agenEmail",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "lastRespone",
              "displayName": "lastRespone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nameClient",
              "displayName": "nameClient",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "subjectTicket",
              "displayName": "subjectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "statusTicket",
              "displayName": "statusTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "typeTicket",
              "displayName": "typeTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "projectTicket",
              "displayName": "projectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ]
        },
        "options": {}
      },
      "id": "b465f466-aec6-41ea-8914-8bf65ab32db4",
      "name": "Chi6",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        3780,
        3160
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 548962283,
          "mode": "list",
          "cachedResultName": "Chau",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=548962283"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "idTicket": "={{ $json.ticket.idTicket }}",
            "numberTicket": "={{ $json.ticket.numberTicket }}",
            "agentName": "={{ $json.ticket.agentName }}",
            "agenEmail": "={{ $json.ticket.agentEmail }}",
            "lastRespone": "Client",
            "nameClient": "={{ $json.ticket.nameClient }}",
            "subjectTicket": "={{ $json.ticket.subjectTicket }}",
            "statusTicket": "={{ $json.ticket.statusTicket }}",
            "typeTicket": "={{ $json.ticket.typeTicket }}",
            "projectTicket": "={{ $json.ticket.projectTicket }}"
          },
          "matchingColumns": [
            "idTicket"
          ],
          "schema": [
            {
              "id": "idTicket",
              "displayName": "idTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "numberTicket",
              "displayName": "numberTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agentName",
              "displayName": "agentName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agenEmail",
              "displayName": "agenEmail",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "lastRespone",
              "displayName": "lastRespone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nameClient",
              "displayName": "nameClient",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "subjectTicket",
              "displayName": "subjectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "statusTicket",
              "displayName": "statusTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "typeTicket",
              "displayName": "typeTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "projectTicket",
              "displayName": "projectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ]
        },
        "options": {}
      },
      "id": "df750726-e131-4212-a765-7e063b72e090",
      "name": "Chau6",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        3760,
        3360
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 1298489612,
          "mode": "list",
          "cachedResultName": "Phuong",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=1298489612"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "idTicket": "={{ $json.ticket.idTicket }}",
            "agenEmail": "={{ $json.ticket.agentEmail }}",
            "numberTicket": "={{ $json.ticket.numberTicket }}",
            "agentName": "={{ $json.ticket.agentName }}",
            "nameClient": "={{ $json.ticket.nameClient }}",
            "typeTicket": "={{ $json.ticket.typeTicket }}",
            "subjectTicket": "={{ $json.ticket.subjectTicket }}",
            "statusTicket": "={{ $json.ticket.statusTicket }}",
            "projectTicket": "={{ $json.ticket.projectTicket }}",
            "lastRespone": "Agent"
          },
          "matchingColumns": [
            "idTicket"
          ],
          "schema": [
            {
              "id": "idTicket",
              "displayName": "idTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "numberTicket",
              "displayName": "numberTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agentName",
              "displayName": "agentName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agenEmail",
              "displayName": "agenEmail",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "lastRespone",
              "displayName": "lastRespone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nameClient",
              "displayName": "nameClient",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "subjectTicket",
              "displayName": "subjectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "statusTicket",
              "displayName": "statusTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "typeTicket",
              "displayName": "typeTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "projectTicket",
              "displayName": "projectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ]
        },
        "options": {}
      },
      "id": "bd6e6bad-53d8-498e-a8f9-3ce1189b202b",
      "name": "Phuong7",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        3900,
        3520
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 548962283,
          "mode": "list",
          "cachedResultName": "Chau",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=548962283"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "idTicket": "={{ $json.ticket.idTicket }}",
            "numberTicket": "={{ $json.ticket.numberTicket }}",
            "agentName": "={{ $json.ticket.agentName }}",
            "agenEmail": "={{ $json.ticket.agentEmail }}",
            "nameClient": "={{ $json.ticket.nameClient }}",
            "subjectTicket": "={{ $json.ticket.subjectTicket }}",
            "statusTicket": "={{ $json.ticket.statusTicket }}",
            "typeTicket": "={{ $json.ticket.typeTicket }}",
            "projectTicket": "={{ $json.ticket.projectTicket }}",
            "lastRespone": "Agent"
          },
          "matchingColumns": [
            "idTicket"
          ],
          "schema": [
            {
              "id": "idTicket",
              "displayName": "idTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "numberTicket",
              "displayName": "numberTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agentName",
              "displayName": "agentName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agenEmail",
              "displayName": "agenEmail",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "lastRespone",
              "displayName": "lastRespone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nameClient",
              "displayName": "nameClient",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "subjectTicket",
              "displayName": "subjectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "statusTicket",
              "displayName": "statusTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "typeTicket",
              "displayName": "typeTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "projectTicket",
              "displayName": "projectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ]
        },
        "options": {}
      },
      "id": "2c2a0b39-f36f-45dd-b292-a0a97e28bbac",
      "name": "Chau7",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        3900,
        3920
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "2a75c8aa-0ad9-4171-b215-7ddea1d07bd8",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "phuong.nt@netbasejsc.com",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Phuong"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "c01ba01c-39bd-41c7-82c6-cc9a876741d2",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "huy.nhd@netbasejsc.com",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Huy"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "7add08a8-dffe-44d7-b27c-73344547b865",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "chi.hu@netbasejsc.com",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Chi"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "1591f407-008f-43ca-b641-27b4d699617d",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "chau.lt@netbasejsc.com",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Chau"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "b33cb102-6f78-4a4d-9e88-5b2725a64274",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "",
                    "operator": {
                      "type": "string",
                      "operation": "notEmpty",
                      "singleValue": true
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "default"
            }
          ]
        },
        "options": {}
      },
      "id": "9e949a46-6029-4969-913b-c4e58e0e17db",
      "name": "Switch6",
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        3560,
        3680
      ]
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 1298489612,
          "mode": "list",
          "cachedResultName": "Phuong",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=1298489612"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "idTicket": "={{ $json.ticket.idTicket }}",
            "agenEmail": "={{ $json.ticket.agentEmail }}",
            "numberTicket": "={{ $json.ticket.numberTicket }}",
            "agentName": "={{ $json.ticket.agentName }}",
            "nameClient": "={{ $json.ticket.nameClient }}",
            "typeTicket": "={{ $json.ticket.typeTicket }}",
            "subjectTicket": "={{ $json.ticket.subjectTicket }}",
            "statusTicket": "={{ $json.ticket.statusTicket }}",
            "projectTicket": "={{ $json.ticket.projectTicket }}",
            "lastRespone": "Agent"
          },
          "matchingColumns": [
            "idTicket"
          ],
          "schema": [
            {
              "id": "idTicket",
              "displayName": "idTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "numberTicket",
              "displayName": "numberTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agentName",
              "displayName": "agentName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agenEmail",
              "displayName": "agenEmail",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "lastRespone",
              "displayName": "lastRespone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nameClient",
              "displayName": "nameClient",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "subjectTicket",
              "displayName": "subjectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "statusTicket",
              "displayName": "statusTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "typeTicket",
              "displayName": "typeTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "projectTicket",
              "displayName": "projectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ]
        },
        "options": {}
      },
      "id": "93724234-d85f-4a50-936f-fc8fd640ca6e",
      "name": "Phuong8",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        3640,
        4800
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 2073353188,
          "mode": "list",
          "cachedResultName": "Chi",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=2073353188"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "idTicket": "={{ $json.ticket.idTicket }}",
            "numberTicket": "={{ $json.ticket.numberTicket }}",
            "agentName": "={{ $json.ticket.agentName }}",
            "agenEmail": "={{ $json.ticket.agentEmail }}",
            "nameClient": "={{ $json.ticket.nameClient }}",
            "subjectTicket": "={{ $json.ticket.subjectTicket }}",
            "statusTicket": "={{ $json.ticket.statusTicket }}",
            "typeTicket": "={{ $json.ticket.typeTicket }}",
            "projectTicket": "={{ $json.ticket.projectTicket }}",
            "lastRespone": "Agent"
          },
          "matchingColumns": [
            "idTicket"
          ],
          "schema": [
            {
              "id": "idTicket",
              "displayName": "idTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "numberTicket",
              "displayName": "numberTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agentName",
              "displayName": "agentName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agenEmail",
              "displayName": "agenEmail",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "lastRespone",
              "displayName": "lastRespone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nameClient",
              "displayName": "nameClient",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "subjectTicket",
              "displayName": "subjectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "statusTicket",
              "displayName": "statusTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "typeTicket",
              "displayName": "typeTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "projectTicket",
              "displayName": "projectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ]
        },
        "options": {}
      },
      "id": "f92edcc5-5a3c-4eec-9735-2d00d1987db3",
      "name": "Chi8",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        3640,
        5000
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 548962283,
          "mode": "list",
          "cachedResultName": "Chau",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=548962283"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "idTicket": "={{ $json.ticket.idTicket }}",
            "numberTicket": "={{ $json.ticket.numberTicket }}",
            "agentName": "={{ $json.ticket.agentName }}",
            "agenEmail": "={{ $json.ticket.agentEmail }}",
            "nameClient": "={{ $json.ticket.nameClient }}",
            "subjectTicket": "={{ $json.ticket.subjectTicket }}",
            "statusTicket": "={{ $json.ticket.statusTicket }}",
            "typeTicket": "={{ $json.ticket.typeTicket }}",
            "projectTicket": "={{ $json.ticket.projectTicket }}",
            "lastRespone": "Agent"
          },
          "matchingColumns": [
            "idTicket"
          ],
          "schema": [
            {
              "id": "idTicket",
              "displayName": "idTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "numberTicket",
              "displayName": "numberTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agentName",
              "displayName": "agentName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agenEmail",
              "displayName": "agenEmail",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "lastRespone",
              "displayName": "lastRespone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nameClient",
              "displayName": "nameClient",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "subjectTicket",
              "displayName": "subjectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "statusTicket",
              "displayName": "statusTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "typeTicket",
              "displayName": "typeTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "projectTicket",
              "displayName": "projectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ]
        },
        "options": {}
      },
      "id": "802dd6b9-4026-4519-8cd7-1ee5b05a9e9c",
      "name": "Chau8",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        3640,
        5200
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "url": "=https://erp-amz.cloodo.com/v4/tickets/{{ $json.data.id }}/replies",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "cloodoApi",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "limit",
              "value": "10"
            }
          ]
        },
        "options": {}
      },
      "id": "d68ab448-b536-4784-9f2c-29747d94a2d4",
      "name": "Get replies8",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1400,
        7420
      ],
      "credentials": {
        "cloodoApi": {
          "id": "nP7U7wKTbfdSeafq",
          "name": "Cmsmart Worksuite account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "796ab7b7-b19f-4a08-938e-16c2e40a9325",
              "name": "replies",
              "value": "={{ $json.data }}",
              "type": "array"
            },
            {
              "id": "377ffdcb-97b2-4ab7-b211-3376a7437855",
              "name": "ticket",
              "value": "={{ $('Get Ticket6').item.json.data }}",
              "type": "object"
            }
          ]
        },
        "options": {}
      },
      "id": "047d0c25-a8f8-48e5-a11a-5bc8cdd3b306",
      "name": "Replies and Ticket8",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1640,
        7420
      ]
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "2a75c8aa-0ad9-4171-b215-7ddea1d07bd8",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "phuong.nt@netbasejsc.com",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Phuong"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "c01ba01c-39bd-41c7-82c6-cc9a876741d2",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "huy.nhd@netbasejsc.com",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Huy"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "7add08a8-dffe-44d7-b27c-73344547b865",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "chi.hu@netbasejsc.com",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Chi"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "1591f407-008f-43ca-b641-27b4d699617d",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "chau.lt@netbasejsc.com",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Chau"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "b33cb102-6f78-4a4d-9e88-5b2725a64274",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "",
                    "operator": {
                      "type": "string",
                      "operation": "notEmpty",
                      "singleValue": true
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "default"
            }
          ]
        },
        "options": {}
      },
      "id": "1e950c5e-bcb7-492e-955b-d69db100b6bb",
      "name": "Switch7",
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        3300,
        4960
      ]
    },
    {
      "parameters": {
        "operation": "minus",
        "user_id": "={{ $('Ticket 15d').item.json.replies[0].user.id }}",
        "points": "=5",
        "note": "=QCM 83-84: {{ $('Ticket 15d').item.json.ticket.agentName }} -5 points Ticket no closed or Ticket no reply Client: https://worksuite.cloodo.com/apps/tickets/all-tickets/{{ $('Ticket 15d').item.json.ticket.idTicket }}"
      },
      "id": "9b60f054-22a9-4091-a1aa-ea1e9914ad3e",
      "name": "Cloodo Point9",
      "type": "@cloodo/n8n-nodes-cloodo-point.cloodoPoint",
      "typeVersion": 1,
      "position": [
        3420,
        7420
      ],
      "credentials": {
        "cloodoApi2": {
          "id": "82nsSr6jMyGAQbyu",
          "name": "Cmsmart Point API Key"
        }
      }
    },
    {
      "parameters": {
        "operation": "search",
        "keyword": "=QCM 83-84: {{ $('Ticket 15d').item.json.ticket.agentName }} -5 points Ticket no closed or Ticket no reply Client: https://worksuite.cloodo.com/apps/tickets/all-tickets/{{ $('Ticket 15d').item.json.ticket.idTicket }}",
        "max_limit_record": 50,
        "status_record": 0
      },
      "id": "14944d1d-73bb-4da8-8c45-09bb041194f2",
      "name": "Cloodo Point10",
      "type": "@cloodo/n8n-nodes-cloodo-point.cloodoPoint",
      "typeVersion": 1,
      "position": [
        2940,
        7440
      ],
      "credentials": {
        "cloodoApi2": {
          "id": "82nsSr6jMyGAQbyu",
          "name": "Cmsmart Point API Key"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "id": "1a002234-688e-437e-893f-82a90031cc15",
      "name": "Loop Over Items2",
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        2620,
        7420
      ]
    },
    {
      "parameters": {
        "jsCode": "const currentDate = new Date();  // Ngày hiện tại\nconst daysLimit = 15;  // Số ngày bạn muốn so sánh\nconst filteredItems = [];\n\n// Lặp qua từng item trong $input.all() và kiểm tra update_at\nfor (const item of $input.all()) {\n  const updateDate = new Date(item?.json?.replies[0]?.created_at);  // Ngày cập nhật của item\n  const diffTime = currentDate - updateDate; // Tính sự khác biệt giữa ngày hiện tại và ngày update_at\n  const diffDays = diffTime / (1000 * 3600 * 24); // Chuyển từ milliseconds sang ngày\n  const idTicket = item?.json?.ticket?.id\n  const idClient = item?.json?.ticket?.requester?.id\n  const clientTicket = item?.json?.ticket?.requester?.name\n  const numberTicket = item?.json?.ticket?.ticket_number\n  const subjectTicket = item?.json?.ticket?.subject\n  const statusTicket = item?.json?.ticket?.status\n  const typeTicket = item?.json?.ticket?.type?.type\n  const projectTicket = item?.json?.ticket?.projects?.name\n  const agentNameTicket = item?.json?.ticket?.agent?.user?.name\n  const agentEmailTicket = item?.json?.ticket?.agent?.user?.email\n  \n  if (diffDays > daysLimit) {\n    item.json.ticket = {idTicket: idTicket,\n                        idClient: idClient,\n                        nameClient: clientTicket,\n                        numberTicket: numberTicket,\n                        subjectTicket: subjectTicket,\n                        statusTicket: statusTicket,\n                        typeTicket: typeTicket,\n                        projectTicket: projectTicket,\n                        agentName: agentNameTicket,\n                        agentEmail: agentEmailTicket\n                       }\n    filteredItems.push(item);  // Thêm item vào danh sách nếu update_at sau 15 ngày\n  }\n}\n\nreturn filteredItems;  // Trả về các item thỏa mãn điều kiện\n"
      },
      "id": "59fb47f1-ab40-4b9e-9706-02e16ae3bbba",
      "name": "Ticket 15d",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1880,
        7420
      ],
      "executeOnce": true
    },
    {
      "parameters": {
        "url": "=https://erp-amz.cloodo.com/v4/tickets/{{ $json.data.id }}/replies",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "cloodoApi",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "limit",
              "value": "10"
            }
          ]
        },
        "options": {}
      },
      "id": "8d84f513-60ad-4fda-94f3-304557b8935f",
      "name": "Get replies9",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1660,
        8200
      ],
      "credentials": {
        "cloodoApi": {
          "id": "nP7U7wKTbfdSeafq",
          "name": "Cmsmart Worksuite account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "796ab7b7-b19f-4a08-938e-16c2e40a9325",
              "name": "replies",
              "value": "={{ $json.data }}",
              "type": "array"
            },
            {
              "id": "377ffdcb-97b2-4ab7-b211-3376a7437855",
              "name": "ticket",
              "value": "={{ $('Get Ticket6').item.json.data }}",
              "type": "object"
            }
          ]
        },
        "options": {}
      },
      "id": "b9b8c9cf-12ca-45ae-a03f-7a1431c73460",
      "name": "Replies and Ticket9",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1900,
        8200
      ]
    },
    {
      "parameters": {
        "options": {}
      },
      "id": "576550e4-8825-4567-b8e4-d18a3ae05348",
      "name": "Loop Over Items3",
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        2400,
        8200
      ]
    },
    {
      "parameters": {
        "jsCode": "const currentDate = new Date();  // Ngày hiện tại\nconst daysLimit = 15;  // Số ngày bạn muốn so sánh\nconst filteredItems = [];\n\n// Lặp qua từng item trong $input.all() và kiểm tra update_at\nfor (const item of $input.all()) {\n  const updateDate = new Date(item?.json?.replies[0]?.created_at);  // Ngày cập nhật của item\n  const diffTime = currentDate - updateDate; // Tính sự khác biệt giữa ngày hiện tại và ngày update_at\n  const diffDays = diffTime / (1000 * 3600 * 24); // Chuyển từ milliseconds sang ngày\n  const idTicket = item?.json?.ticket?.id\n  const idClient = item?.json?.ticket?.requester?.id\n  const clientTicket = item?.json?.ticket?.requester?.name\n  const numberTicket = item?.json?.ticket?.ticket_number\n  const subjectTicket = item?.json?.ticket?.subject\n  const statusTicket = item?.json?.ticket?.status\n  const typeTicket = item?.json?.ticket?.type?.type\n  const projectTicket = item?.json?.ticket?.projects?.name\n  const agentNameTicket = item?.json?.ticket?.agent?.user?.name\n  const agentEmailTicket = item?.json?.ticket?.agent?.user?.email\n  \n  if (diffDays > daysLimit) {\n    item.json.ticket = {idTicket: idTicket,\n                        idClient: idClient,\n                        nameClient: clientTicket,\n                        numberTicket: numberTicket,\n                        subjectTicket: subjectTicket,\n                        statusTicket: statusTicket,\n                        typeTicket: typeTicket,\n                        projectTicket: projectTicket,\n                        agentName: agentNameTicket,\n                        agentEmail: agentEmailTicket\n                       }\n    filteredItems.push(item);  // Thêm item vào danh sách nếu update_at sau 15 ngày\n  }\n}\n\nreturn filteredItems;  // Trả về các item thỏa mãn điều kiện\n"
      },
      "id": "3b8f4a0f-5cff-4716-a98b-9b695a6e4d10",
      "name": "Ticket 15d1",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2140,
        8200
      ],
      "executeOnce": true
    },
    {
      "parameters": {
        "conditions": {
          "number": [
            {
              "value1": "={{ $json.total_records }}",
              "operation": "equal"
            }
          ]
        }
      },
      "id": "ed36f074-b973-4cc8-aec0-8c1042eadccf",
      "name": "IF not found4",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        2920,
        8220
      ]
    },
    {
      "parameters": {
        "operation": "minus",
        "user_id": "={{ $('Ticket 15d1').item.json.replies[0].user.id }}",
        "points": "=5",
        "note": "=QCM 83-84: {{ $('Ticket 15d1').item.json.ticket.agentName }} -5 points Ticket no closed or Ticket no reply Client: https://worksuite.cloodo.com/apps/tickets/all-tickets/{{ $('Ticket 15d1').item.json.ticket.idTicket }}"
      },
      "id": "c9300f06-034c-4910-92e7-5a0d3b19d05b",
      "name": "Cloodo Point11",
      "type": "@cloodo/n8n-nodes-cloodo-point.cloodoPoint",
      "typeVersion": 1,
      "position": [
        3260,
        8200
      ],
      "credentials": {
        "cloodoApi2": {
          "id": "82nsSr6jMyGAQbyu",
          "name": "Cmsmart Point API Key"
        }
      }
    },
    {
      "parameters": {
        "operation": "search",
        "keyword": "=QCM 83-84: {{ $('Ticket 15d1').item.json.ticket.agentName }} -5 points Ticket no closed or Ticket no reply Client: https://worksuite.cloodo.com/apps/tickets/all-tickets/{{ $('Ticket 15d1').item.json.ticket.idTicket }}",
        "max_limit_record": 50
      },
      "id": "4456a8e8-b191-456b-9c50-7fd5972f065e",
      "name": "Cloodo Point12",
      "type": "@cloodo/n8n-nodes-cloodo-point.cloodoPoint",
      "typeVersion": 1,
      "position": [
        2700,
        8220
      ],
      "credentials": {
        "cloodoApi2": {
          "id": "82nsSr6jMyGAQbyu",
          "name": "Cmsmart Point API Key"
        }
      }
    },
    {
      "parameters": {
        "operation": "minus",
        "user_id": "={{ $('Ticket 8h1').item.json.replies[0].user.id }}",
        "points": "={{ $('Cloodo Point14')?.item?.json?.data.length > 0 ? Math.min(...$('Cloodo Point14')?.item?.json?.data?.map(item => item?.point)?.map(Number)) * -1 + 5 : 5  }}",
        "note": "=QCM 83-84: {{ $('Ticket 8h1').item.json.ticket.agentName }} -{{ $('Cloodo Point14')?.item?.json?.data.length > 0 ? Math.min(...$('Cloodo Point14')?.item?.json?.data?.map(item => item?.point)?.map(Number)) * -1 + 5 : 5  }} points Ticket no closed or Ticket no reply Client: https://worksuite.cloodo.com/apps/tickets/all-tickets/{{ $('Ticket 8h1').item.json.ticket.idTicket }}"
      },
      "id": "1f395c76-fe5b-4ce3-ad56-257ef9ff4bd7",
      "name": "Cloodo Point13",
      "type": "@cloodo/n8n-nodes-cloodo-point.cloodoPoint",
      "typeVersion": 1,
      "position": [
        3060,
        5640
      ],
      "credentials": {
        "cloodoApi2": {
          "id": "82nsSr6jMyGAQbyu",
          "name": "Cmsmart Point API Key"
        }
      }
    },
    {
      "parameters": {
        "operation": "search",
        "keyword": "=https://worksuite.cloodo.com/apps/tickets/all-tickets/{{ $('Ticket 8h1').item.json.ticket.idTicket }}",
        "max_limit_record": 50,
        "status_record": -1
      },
      "id": "75b61de8-7467-41c9-af92-63f5a029cd92",
      "name": "Cloodo Point14",
      "type": "@cloodo/n8n-nodes-cloodo-point.cloodoPoint",
      "typeVersion": 1,
      "position": [
        2840,
        5640
      ],
      "credentials": {
        "cloodoApi2": {
          "id": "82nsSr6jMyGAQbyu",
          "name": "Cmsmart Point API Key"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "id": "8a8a6e97-292a-4934-959f-6f49d282c726",
      "name": "Loop Over Items4",
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        2580,
        5620
      ]
    },
    {
      "parameters": {
        "conditions": {
          "number": [
            {
              "value1": "={{ $json.total_records }}",
              "operation": "equal"
            }
          ]
        }
      },
      "id": "bb18ef30-88a4-4615-9dd5-47260cfde176",
      "name": "IF not found5",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        3100,
        6000
      ]
    },
    {
      "parameters": {
        "operation": "minus",
        "user_id": "={{ $('Ticket 15d2').item.json.replies[0].user.id }}",
        "points": "=5",
        "note": "=QCM 83-84: {{ $('Ticket 15d2').item.json.ticket.agentName }} -5 points Ticket no closed or Ticket no reply Client: https://worksuite.cloodo.com/apps/tickets/all-tickets/{{ $('Ticket 15d2').item.json.ticket.idTicket }}"
      },
      "id": "5135a02a-10e3-4fb5-b446-8d190337cbc6",
      "name": "Cloodo Point15",
      "type": "@cloodo/n8n-nodes-cloodo-point.cloodoPoint",
      "typeVersion": 1,
      "position": [
        3380,
        5980
      ],
      "credentials": {
        "cloodoApi2": {
          "id": "82nsSr6jMyGAQbyu",
          "name": "Cmsmart Point API Key"
        }
      }
    },
    {
      "parameters": {
        "operation": "search",
        "keyword": "=QCM 83-84: {{ $('Ticket 15d2').item.json.ticket.agentName }} -5 points Ticket no closed or Ticket no reply Client: https://worksuite.cloodo.com/apps/tickets/all-tickets/{{ $('Ticket 15d2').item.json.ticket.idTicket }}",
        "max_limit_record": 50,
        "status_record": 0
      },
      "id": "c0d87b7d-b1fb-4c8f-ae92-50fb021cd53c",
      "name": "Cloodo Point16",
      "type": "@cloodo/n8n-nodes-cloodo-point.cloodoPoint",
      "typeVersion": 1,
      "position": [
        2900,
        6000
      ],
      "credentials": {
        "cloodoApi2": {
          "id": "82nsSr6jMyGAQbyu",
          "name": "Cmsmart Point API Key"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "id": "5ffd8d60-a9c8-4bd1-bbd5-8c8efffc717c",
      "name": "Loop Over Items5",
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        2580,
        5980
      ]
    },
    {
      "parameters": {
        "jsCode": "const currentDate = new Date();  // Ngày hiện tại\nconst daysLimit = 8;  // Số ngày bạn muốn so sánh\nconst filteredItems = [];\n\n// Lặp qua từng item trong $input.all() và kiểm tra update_at\nfor (const item of $input.all()) {\n  const updateDate = new Date(item?.json?.replies[0]?.updated_at);  // Ngày cập nhật của item\n  const diffTime = currentDate - updateDate; // Tính sự khác biệt giữa ngày hiện tại và ngày update_at\n  const diffDays = diffTime / (1000 * 3600); // Chuyển từ milliseconds sang ngày\n  const idTicket = item?.json?.ticket?.id\n  const idClient = item?.json?.ticket?.requester?.id\n  const clientTicket = item?.json?.ticket?.requester?.name\n  const numberTicket = item?.json?.ticket?.ticket_number\n  const subjectTicket = item?.json?.ticket?.subject\n  const statusTicket = item?.json?.ticket?.status\n  const typeTicket = item?.json?.ticket?.type?.type\n  const projectTicket = item?.json?.ticket?.projects?.name\n  const agentNameTicket = item?.json?.ticket?.agent?.user?.name\n  const agentEmailTicket = item?.json?.ticket?.agent?.user?.email\n  \n  if (diffDays > daysLimit) {\n    item.json.ticket = {idTicket: idTicket,\n                        idClient: idClient,\n                        nameClient: clientTicket,\n                        numberTicket: numberTicket,\n                        subjectTicket: subjectTicket,\n                        statusTicket: statusTicket,\n                        typeTicket: typeTicket,\n                        projectTicket: projectTicket,\n                        agentName: agentNameTicket,\n                        agentEmail: agentEmailTicket\n                       }\n    filteredItems.push(item);  // Thêm item vào danh sách nếu update_at sau 15 ngày\n  }\n}\n\nreturn filteredItems;  // Trả về các item thỏa mãn điều kiện\n"
      },
      "id": "0f8d5d23-c8e3-4c7d-b269-aaf430b62538",
      "name": "Ticket 8h1",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1780,
        5640
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "6dc6657f-526c-4633-a42e-591e9f2e964d",
              "leftValue": "={{ $json.replies[0].user.id }}",
              "rightValue": "={{ $json.ticket.idClient }}",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "6e3aab83-3741-4c6a-89de-68822192a959",
      "name": "Requester Replies8",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1920,
        6380
      ]
    },
    {
      "parameters": {
        "operation": "minus",
        "user_id": "={{ $('Ticket 24h2').item.json.replies[0].user.id }}",
        "points": "={{ Math.min(...$('Cloodo Point18').item.json.data?.map(item => item?.point).map(Number)) * -1 }}",
        "note": "=QCM 83-84: {{ $('Ticket 24h2').item.json.ticket.agentName }} -{{ Math.min(...$('Cloodo Point18').item.json.data?.map(item => item?.point).map(Number)) * -1 }} points Ticket no closed or Ticket no reply Client: https://worksuite.cloodo.com/apps/tickets/all-tickets/{{ $('Ticket 24h2').item.json.ticket.idTicket }}"
      },
      "id": "853c82a5-4829-4eb7-b23d-eb03d83a7983",
      "name": "Cloodo Point17",
      "type": "@cloodo/n8n-nodes-cloodo-point.cloodoPoint",
      "typeVersion": 1,
      "position": [
        2880,
        6280
      ],
      "credentials": {
        "cloodoApi2": {
          "id": "82nsSr6jMyGAQbyu",
          "name": "Cmsmart Point API Key"
        }
      }
    },
    {
      "parameters": {
        "operation": "search",
        "keyword": "=https://worksuite.cloodo.com/apps/tickets/all-tickets/{{ $('Ticket 24h2').item.json.ticket.idTicket }}",
        "max_limit_record": 50,
        "status_record": 0
      },
      "id": "7717d599-eba3-44aa-a3d2-f8b33248cb3f",
      "name": "Cloodo Point18",
      "type": "@cloodo/n8n-nodes-cloodo-point.cloodoPoint",
      "typeVersion": 1,
      "position": [
        2580,
        6280
      ],
      "credentials": {
        "cloodoApi2": {
          "id": "82nsSr6jMyGAQbyu",
          "name": "Cmsmart Point API Key"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "id": "23d2753e-9322-42ae-89b6-efb88494ed6f",
      "name": "Loop Over Items6",
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        2320,
        6260
      ]
    },
    {
      "parameters": {
        "options": {}
      },
      "id": "00c6f18d-de08-4031-bc2f-c3f2e9ddecbd",
      "name": "Loop Over Items7",
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        2480,
        6620
      ]
    },
    {
      "parameters": {
        "conditions": {
          "number": [
            {
              "value1": "={{ $json.total_records }}",
              "operation": "equal"
            }
          ]
        }
      },
      "id": "baf5374e-38dd-4cb9-8c6c-088eb197912d",
      "name": "IF not found6",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        2980,
        6640
      ]
    },
    {
      "parameters": {
        "operation": "minus",
        "user_id": "={{ $('Ticket 15d3').item.json.replies[0].user.id }}",
        "points": "=5",
        "note": "=QCM 83-84: {{ $('Ticket 15d3').item.json.ticket.agentName }} -5 points Ticket no closed or Ticket no reply Client: https://worksuite.cloodo.com/apps/tickets/all-tickets/{{ $('Ticket 15d3').item.json.ticket.idTicket }}"
      },
      "id": "19de1597-b990-49df-8324-4a4c48c8de20",
      "name": "Cloodo Point19",
      "type": "@cloodo/n8n-nodes-cloodo-point.cloodoPoint",
      "typeVersion": 1,
      "position": [
        3260,
        6620
      ],
      "credentials": {
        "cloodoApi2": {
          "id": "82nsSr6jMyGAQbyu",
          "name": "Cmsmart Point API Key"
        }
      }
    },
    {
      "parameters": {
        "operation": "search",
        "keyword": "=QCM 83-84: {{ $('Ticket 15d3').item.json.ticket.agentName }} -5 points Ticket no closed or Ticket no reply Client: https://worksuite.cloodo.com/apps/tickets/all-tickets/{{ $('Ticket 15d3').item.json.ticket.idTicket }}",
        "max_limit_record": 50
      },
      "id": "6568de7e-68c1-4a15-94b3-3d4adc0a7dbc",
      "name": "Cloodo Point20",
      "type": "@cloodo/n8n-nodes-cloodo-point.cloodoPoint",
      "typeVersion": 1,
      "position": [
        2760,
        6640
      ],
      "credentials": {
        "cloodoApi2": {
          "id": "82nsSr6jMyGAQbyu",
          "name": "Cmsmart Point API Key"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const currentDate = new Date();  // Ngày hiện tại\nconst daysLimit = 15;  // Số ngày bạn muốn so sánh\nconst filteredItems = [];\n\n// Lặp qua từng item trong $input.all() và kiểm tra update_at\nfor (const item of $input.all()) {\n  const updateDate = new Date(item?.json?.replies[0]?.updated_at);  // Ngày cập nhật của item\n  const diffTime = currentDate - updateDate; // Tính sự khác biệt giữa ngày hiện tại và ngày update_at\n  const diffDays = diffTime / (1000 * 3600 * 24); // Chuyển từ milliseconds sang ngày\n  const idTicket = item?.json?.ticket?.idTicket\n  const idClient = item?.json?.ticket?.idClient\n  const clientTicket = item?.json?.ticket?.nameClient\n  const numberTicket = item?.json?.ticket?.numberTicket\n  const subjectTicket = item?.json?.ticket?.subjectTicket\n  const statusTicket = item?.json?.ticket?.statusTicket\n  const typeTicket = item?.json?.ticket?.typeTicket\n  const projectTicket = item?.json?.ticket?.projectTicket\n  const agentNameTicket = item?.json?.ticket?.agentName\n  const agentEmailTicket = item?.json?.ticket?.agentEmail\n  \n  if (diffDays > daysLimit) {\n    item.json.ticket = {idTicket: idTicket,\n                        idClient: idClient,\n                        nameClient: clientTicket,\n                        numberTicket: numberTicket,\n                        subjectTicket: subjectTicket,\n                        statusTicket: statusTicket,\n                        typeTicket: typeTicket,\n                        projectTicket: projectTicket,\n                        agentName: agentNameTicket,\n                        agentEmail: agentEmailTicket\n                       }\n    filteredItems.push(item);  // Thêm item vào danh sách nếu update_at sau 15 ngày\n  }\n}\n\nreturn filteredItems;  // Trả về các item thỏa mãn điều kiện\n"
      },
      "id": "ee0b5f34-6bff-4d5e-a00a-0e9ca37f8ee3",
      "name": "Ticket 15d2",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2260,
        5980
      ]
    },
    {
      "parameters": {
        "jsCode": "const currentDate = new Date();  // Ngày hiện tại\nconst daysLimit = 15;  // Số ngày bạn muốn so sánh\nconst filteredItems = [];\n\n// Lặp qua từng item trong $input.all() và kiểm tra update_at\nfor (const item of $input.all()) {\n  const updateDate = new Date(item?.json?.replies[0]?.updated_at);  // Ngày cập nhật của item\n  const diffTime = currentDate - updateDate; // Tính sự khác biệt giữa ngày hiện tại và ngày update_at\n  const diffDays = diffTime / (1000 * 3600 * 24); // Chuyển từ milliseconds sang ngày\n  const idTicket = item?.json?.ticket?.idTicket\n  const idClient = item?.json?.ticket?.idClient\n  const clientTicket = item?.json?.ticket?.nameClient\n  const numberTicket = item?.json?.ticket?.numberTicket\n  const subjectTicket = item?.json?.ticket?.subjectTicket\n  const statusTicket = item?.json?.ticket?.statusTicket\n  const typeTicket = item?.json?.ticket?.typeTicket\n  const projectTicket = item?.json?.ticket?.projectTicket\n  const agentNameTicket = item?.json?.ticket?.agentName\n  const agentEmailTicket = item?.json?.ticket?.agentEmail\n  \n  if (diffDays > daysLimit) {\n    item.json.ticket = {idTicket: idTicket,\n                        idClient: idClient,\n                        nameClient: clientTicket,\n                        numberTicket: numberTicket,\n                        subjectTicket: subjectTicket,\n                        statusTicket: statusTicket,\n                        typeTicket: typeTicket,\n                        projectTicket: projectTicket,\n                        agentName: agentNameTicket,\n                        agentEmail: agentEmailTicket\n                       }\n    filteredItems.push(item);  // Thêm item vào danh sách nếu update_at sau 15 ngày\n  }\n}\n\nreturn filteredItems;  // Trả về các item thỏa mãn điều kiện\n"
      },
      "id": "67bb218e-fc05-40d7-8cbb-067416fbb42e",
      "name": "Ticket 15d3",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2260,
        6620
      ]
    },
    {
      "parameters": {
        "fieldToSplitOut": "data",
        "options": {}
      },
      "id": "e594c972-bea9-4bce-a56e-327bc7ea7064",
      "name": "Item Lists",
      "type": "n8n-nodes-base.itemLists",
      "typeVersion": 3,
      "position": [
        1740,
        3360
      ]
    },
    {
      "parameters": {
        "url": "https://erp-amz.cloodo.com/v4/tickets",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "cloodoApi",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "limit",
              "value": "100"
            },
            {
              "name": "date_from",
              "value": "2025-01-01"
            },
            {
              "name": "date_to",
              "value": "={{ $now.toDateTime() }}"
            },
            {
              "name": "sort",
              "value": "desc"
            },
            {
              "name": "status",
              "value": "pending"
            },
            {
              "name": "cursor",
              "value": "={{ $json.meta.next_cursor }}"
            }
          ]
        },
        "options": {}
      },
      "id": "23a57455-7feb-4f69-bfc4-c1880ea0c80e",
      "name": "Ticket Pending",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1440,
        3360
      ],
      "credentials": {
        "cloodoApi": {
          "id": "nP7U7wKTbfdSeafq",
          "name": "Cmsmart Worksuite account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $json.meta.next_cursor }}",
              "operation": "isNotEmpty"
            }
          ]
        }
      },
      "id": "62a6fb3e-ea84-4c5f-9de6-13d934ba9929",
      "name": "IF",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        1640,
        3540
      ]
    },
    {
      "parameters": {
        "url": "=https://erp-amz.cloodo.com/v4/tickets/{{ $json.data.id }}/replies",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "cloodoApi",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "limit",
              "value": "10"
            }
          ]
        },
        "options": {}
      },
      "id": "78126d5a-b26c-4145-951a-cab8f0898fd2",
      "name": "Get replies",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2260,
        3360
      ],
      "credentials": {
        "cloodoApi": {
          "id": "nP7U7wKTbfdSeafq",
          "name": "Cmsmart Worksuite account"
        }
      }
    },
    {
      "parameters": {
        "resource": "engagement",
        "ID": "={{ $json.id }}",
        "requestOptions": {}
      },
      "id": "24c9cd12-1149-4b8a-9981-aab76061a0aa",
      "name": "Get Ticket",
      "type": "@cloodo/n8n-nodes-cloodo-crm.CloodoLeads",
      "typeVersion": 1,
      "position": [
        2000,
        3360
      ],
      "credentials": {
        "cloodoApi": {
          "id": "nP7U7wKTbfdSeafq",
          "name": "Cmsmart Worksuite account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "796ab7b7-b19f-4a08-938e-16c2e40a9325",
              "name": "replies",
              "value": "={{ $json.data }}",
              "type": "array"
            },
            {
              "id": "377ffdcb-97b2-4ab7-b211-3376a7437855",
              "name": "ticket",
              "value": "={{ $('Get Ticket').item.json.data }}",
              "type": "object"
            }
          ]
        },
        "options": {}
      },
      "id": "844ba43f-c3e0-481f-9b05-35d26d825993",
      "name": "Replies and Ticket",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        2500,
        3360
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "6dc6657f-526c-4633-a42e-591e9f2e964d",
              "leftValue": "={{ $json.replies[0].user.id }}",
              "rightValue": "={{ $json.ticket.idClient }}",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "f82c9a30-917e-41b7-a605-447537a56721",
      "name": "Requester Replies",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        3000,
        3360
      ]
    },
    {
      "parameters": {
        "jsCode": "const currentDate = new Date();  // Ngày hiện tại\nconst daysLimit = 8;  // Số ngày bạn muốn so sánh\nconst filteredItems = [];\n\n// Lặp qua từng item trong $input.all() và kiểm tra update_at\nfor (const item of $input.all()) {\n  const updateDate = new Date(item?.json?.replies[0]?.updated_at);  // Ngày cập nhật của item\n  const diffTime = currentDate - updateDate; // Tính sự khác biệt giữa ngày hiện tại và ngày update_at\n  const diffDays = diffTime / (1000 * 3600); // Chuyển từ milliseconds sang ngày\n  const idTicket = item?.json?.ticket?.id\n  const idClient = item?.json?.ticket?.requester?.id\n  const clientTicket = item?.json?.ticket?.requester?.name\n  const numberTicket = item?.json?.ticket?.ticket_number\n  const subjectTicket = item?.json?.ticket?.subject\n  const statusTicket = item?.json?.ticket?.status\n  const typeTicket = item?.json?.ticket?.type?.type\n  const projectTicket = item?.json?.ticket?.projects?.name\n  const agentNameTicket = item?.json?.ticket?.agent?.user?.name\n  const agentEmailTicket = item?.json?.ticket?.agent?.user?.email\n  \n  if (diffDays > daysLimit) {\n    item.json.ticket = {idTicket: idTicket,\n                        idClient: idClient,\n                        nameClient: clientTicket,\n                        numberTicket: numberTicket,\n                        subjectTicket: subjectTicket,\n                        statusTicket: statusTicket,\n                        typeTicket: typeTicket,\n                        projectTicket: projectTicket,\n                        agentName: agentNameTicket,\n                        agentEmail: agentEmailTicket\n                       }\n    filteredItems.push(item);  // Thêm item vào danh sách nếu update_at sau 15 ngày\n  }\n}\n\nreturn filteredItems;  // Trả về các item thỏa mãn điều kiện\n"
      },
      "id": "394b7832-5c7c-41a1-a5b0-dbdfd8cab0ee",
      "name": "Ticket 8h2",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2740,
        3360
      ]
    },
    {
      "parameters": {
        "jsCode": "const currentDate = new Date();  // Ngày hiện tại\nconst daysLimit = 15;  // Số ngày bạn muốn so sánh\nconst filteredItems = [];\n\n// Lặp qua từng item trong $input.all() và kiểm tra update_at\nfor (const item of $input.all()) {\n  const updateDate = new Date(item?.json?.replies[0]?.updated_at);  // Ngày cập nhật của item\n  const diffTime = currentDate - updateDate; // Tính sự khác biệt giữa ngày hiện tại và ngày update_at\n  const diffDays = diffTime / (1000 * 3600 * 24); // Chuyển từ milliseconds sang ngày\n  const idTicket = item?.json?.ticket?.idTicket\n  const idClient = item?.json?.ticket?.idClient\n  const clientTicket = item?.json?.ticket?.nameClient\n  const numberTicket = item?.json?.ticket?.numberTicket\n  const subjectTicket = item?.json?.ticket?.subjectTicket\n  const statusTicket = item?.json?.ticket?.statusTicket\n  const typeTicket = item?.json?.ticket?.typeTicket\n  const projectTicket = item?.json?.ticket?.projectTicket\n  const agentNameTicket = item?.json?.ticket?.agentName\n  const agentEmailTicket = item?.json?.ticket?.agentEmail\n  \n  if (diffDays > daysLimit) {\n    item.json.ticket = {idTicket: idTicket,\n                        idClient: idClient,\n                        nameClient: clientTicket,\n                        numberTicket: numberTicket,\n                        subjectTicket: subjectTicket,\n                        statusTicket: statusTicket,\n                        typeTicket: typeTicket,\n                        projectTicket: projectTicket,\n                        agentName: agentNameTicket,\n                        agentEmail: agentEmailTicket\n                       }\n    filteredItems.push(item);  // Thêm item vào danh sách nếu update_at sau 15 ngày\n  }\n}\n\nreturn filteredItems;  // Trả về các item thỏa mãn điều kiện\n"
      },
      "id": "31a60cf3-ad0c-4900-b749-6ab93d873bd0",
      "name": "Ticket 15d4",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        3260,
        3700
      ]
    },
    {
      "parameters": {
        "fieldToSplitOut": "data",
        "options": {}
      },
      "id": "d0b0c011-a9fa-4eaa-8c2b-3ea64cbb5952",
      "name": "Item Lists8",
      "type": "n8n-nodes-base.itemLists",
      "typeVersion": 3,
      "position": [
        1720,
        4460
      ]
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $json.meta.next_cursor }}",
              "operation": "isNotEmpty"
            }
          ]
        }
      },
      "id": "11b1d421-32c3-4343-8ebc-ef08eb8dd304",
      "name": "IF10",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        1600,
        4780
      ]
    },
    {
      "parameters": {
        "url": "=https://erp-amz.cloodo.com/v4/tickets/{{ $json.data.id }}/replies",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "cloodoApi",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "limit",
              "value": "10"
            }
          ]
        },
        "options": {}
      },
      "id": "a24213c8-37b7-4992-b0e6-0e0ad236013a",
      "name": "Get replies10",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2480,
        4440
      ],
      "credentials": {
        "cloodoApi": {
          "id": "nP7U7wKTbfdSeafq",
          "name": "Cmsmart Worksuite account"
        }
      }
    },
    {
      "parameters": {
        "resource": "engagement",
        "ID": "={{ $json.id }}",
        "requestOptions": {}
      },
      "id": "41565d5a-e101-4a17-acae-1dd72674d2df",
      "name": "Get Ticket8",
      "type": "@cloodo/n8n-nodes-cloodo-crm.CloodoLeads",
      "typeVersion": 1,
      "position": [
        1960,
        4460
      ],
      "executeOnce": false,
      "credentials": {
        "cloodoApi": {
          "id": "nP7U7wKTbfdSeafq",
          "name": "Cmsmart Worksuite account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "796ab7b7-b19f-4a08-938e-16c2e40a9325",
              "name": "replies",
              "value": "={{ $json.data }}",
              "type": "array"
            },
            {
              "id": "377ffdcb-97b2-4ab7-b211-3376a7437855",
              "name": "ticket",
              "value": "={{ $('Get Ticket8').item.json.data }}",
              "type": "object"
            }
          ]
        },
        "options": {}
      },
      "id": "272d91fa-dd11-4d08-bfd6-a7eb947da9bd",
      "name": "Replies and Ticket10",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        2720,
        4440
      ]
    },
    {
      "parameters": {
        "jsCode": "const currentDate = new Date();  // Ngày hiện tại\nconst daysLimit = 8;  // Số ngày bạn muốn so sánh\nconst filteredItems = [];\n\n// Lặp qua từng item trong $input.all() và kiểm tra update_at\nfor (const item of $input.all()) {\n  const updateDate = new Date(item?.json?.replies[0]?.created_at);  // Ngày cập nhật của item\n  const diffTime = currentDate - updateDate; // Tính sự khác biệt giữa ngày hiện tại và ngày update_at\n  const diffDays = diffTime / (1000 * 3600); // Chuyển từ milliseconds sang ngày\n  const idTicket = item?.json?.ticket?.id\n  const idClient = item?.json?.ticket?.requester?.id\n  const clientTicket = item?.json?.ticket?.requester?.name\n  const numberTicket = item?.json?.ticket?.ticket_number\n  const subjectTicket = item?.json?.ticket?.subject\n  const statusTicket = item?.json?.ticket?.status\n  const typeTicket = item?.json?.ticket?.type?.type\n  const projectTicket = item?.json?.ticket?.projects?.name\n  const agentNameTicket = item?.json?.ticket?.agent?.user?.name\n  const agentEmailTicket = item?.json?.ticket?.agent?.user?.email\n  \n  if (diffDays > daysLimit) {\n    item.json.ticket = {idTicket: idTicket,\n                        idClient: idClient,\n                        nameClient: clientTicket,\n                        numberTicket: numberTicket,\n                        subjectTicket: subjectTicket,\n                        statusTicket: statusTicket,\n                        typeTicket: typeTicket,\n                        projectTicket: projectTicket,\n                        agentName: agentNameTicket,\n                        agentEmail: agentEmailTicket\n                       }\n    filteredItems.push(item);  // Thêm item vào danh sách nếu update_at sau 15 ngày\n  }\n}\n\nreturn filteredItems;  // Trả về các item thỏa mãn điều kiện\n"
      },
      "id": "ed5e484c-e7e7-4d94-9dd4-4e3b390bf504",
      "name": "Ticket 8h3",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2960,
        4440
      ],
      "executeOnce": true
    },
    {
      "parameters": {
        "url": "https://erp-amz.cloodo.com/v4/tickets",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "cloodoApi",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "limit",
              "value": "100"
            },
            {
              "name": "date_from",
              "value": "2025-01-01"
            },
            {
              "name": "date_to",
              "value": "={{ $now.toDateTime() }}"
            },
            {
              "name": "sort",
              "value": "desc"
            },
            {
              "name": "status",
              "value": "open"
            },
            {
              "name": "cursor",
              "value": "={{ $json.meta.next_cursor }}"
            }
          ]
        },
        "options": {}
      },
      "id": "c670bcff-717f-4bd3-af54-d5c776de82f5",
      "name": "Ticket Open2",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1420,
        4460
      ],
      "credentials": {
        "cloodoApi": {
          "id": "nP7U7wKTbfdSeafq",
          "name": "Cmsmart Worksuite account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "9ab35c59-58f9-43a8-8026-b499641ff4cd",
              "leftValue": "={{ $json.data.requester.email }}",
              "rightValue": "={{ $json.data.create_by.email }}",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "acfab89b-1779-4b88-9abd-349cc46c253e",
      "name": "Check client send2",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        2180,
        4460
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "6dc6657f-526c-4633-a42e-591e9f2e964d",
              "leftValue": "={{ $json.replies[0].user.id }}",
              "rightValue": "={{ $json.ticket.idClient }}",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "28d3248c-8f29-4b95-970e-f54a9f808d48",
      "name": "Requester Replies7",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        3200,
        4440
      ]
    },
    {
      "parameters": {
        "url": "=https://erp-amz.cloodo.com/v4/tickets/{{ $json.data.id }}/replies",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "cloodoApi",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "limit",
              "value": "10"
            }
          ]
        },
        "options": {}
      },
      "id": "e1092f4c-28a1-4496-9e91-afe8f4872833",
      "name": "Get replies11",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2440,
        4700
      ],
      "credentials": {
        "cloodoApi": {
          "id": "nP7U7wKTbfdSeafq",
          "name": "Cmsmart Worksuite account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "796ab7b7-b19f-4a08-938e-16c2e40a9325",
              "name": "replies",
              "value": "={{ $json.data }}",
              "type": "array"
            },
            {
              "id": "377ffdcb-97b2-4ab7-b211-3376a7437855",
              "name": "ticket",
              "value": "={{ $('Get Ticket8').item.json.data }}",
              "type": "object"
            }
          ]
        },
        "options": {}
      },
      "id": "6db9c427-3c84-4820-a948-a0040991708e",
      "name": "Replies and Ticket11",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        2680,
        4700
      ]
    },
    {
      "parameters": {
        "jsCode": "const currentDate = new Date();  // Ngày hiện tại\nconst daysLimit = 15;  // Số ngày bạn muốn so sánh\nconst filteredItems = [];\n\n// Lặp qua từng item trong $input.all() và kiểm tra update_at\nfor (const item of $input.all()) {\n  const updateDate = new Date(item?.json?.replies[0]?.created_at);  // Ngày cập nhật của item\n  const diffTime = currentDate - updateDate; // Tính sự khác biệt giữa ngày hiện tại và ngày update_at\n  const diffDays = diffTime / (1000 * 3600 * 24); // Chuyển từ milliseconds sang ngày\n  const idTicket = item?.json?.ticket?.id\n  const idClient = item?.json?.ticket?.requester?.id\n  const clientTicket = item?.json?.ticket?.requester?.name\n  const numberTicket = item?.json?.ticket?.ticket_number\n  const subjectTicket = item?.json?.ticket?.subject\n  const statusTicket = item?.json?.ticket?.status\n  const typeTicket = item?.json?.ticket?.type?.type\n  const projectTicket = item?.json?.ticket?.projects?.name\n  const agentNameTicket = item?.json?.ticket?.agent?.user?.name\n  const agentEmailTicket = item?.json?.ticket?.agent?.user?.email\n  \n  if (diffDays > daysLimit) {\n    item.json.ticket = {idTicket: idTicket,\n                        idClient: idClient,\n                        nameClient: clientTicket,\n                        numberTicket: numberTicket,\n                        subjectTicket: subjectTicket,\n                        statusTicket: statusTicket,\n                        typeTicket: typeTicket,\n                        projectTicket: projectTicket,\n                        agentName: agentNameTicket,\n                        agentEmail: agentEmailTicket\n                       }\n    filteredItems.push(item);  // Thêm item vào danh sách nếu update_at sau 15 ngày\n  }\n}\n\nreturn filteredItems;  // Trả về các item thỏa mãn điều kiện\n"
      },
      "id": "e2423fd5-2217-49ce-a0cd-b11aa695d1a7",
      "name": "Ticket 15d5",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2920,
        4700
      ],
      "executeOnce": true
    },
    {
      "parameters": {
        "content": "## Data 7AM",
        "height": 82.91852303373958,
        "width": 199.9385587801313
      },
      "id": "9770caf1-9400-4ccd-9e9e-2a35559634e7",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1260,
        3940
      ]
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 2073353188,
          "mode": "list",
          "cachedResultName": "Chi",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=2073353188"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "idTicket": "={{ $json.ticket.idTicket }}",
            "numberTicket": "={{ $json.ticket.numberTicket }}",
            "agentName": "={{ $json.ticket.agentName }}",
            "agenEmail": "={{ $json.ticket.agentEmail }}",
            "nameClient": "={{ $json.ticket.nameClient }}",
            "subjectTicket": "={{ $json.ticket.subjectTicket }}",
            "statusTicket": "={{ $json.ticket.statusTicket }}",
            "typeTicket": "={{ $json.ticket.typeTicket }}",
            "projectTicket": "={{ $json.ticket.projectTicket }}",
            "lastRespone": "Agent"
          },
          "matchingColumns": [
            "idTicket"
          ],
          "schema": [
            {
              "id": "idTicket",
              "displayName": "idTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "numberTicket",
              "displayName": "numberTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agentName",
              "displayName": "agentName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agenEmail",
              "displayName": "agenEmail",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "lastRespone",
              "displayName": "lastRespone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nameClient",
              "displayName": "nameClient",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "subjectTicket",
              "displayName": "subjectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "statusTicket",
              "displayName": "statusTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "typeTicket",
              "displayName": "typeTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "projectTicket",
              "displayName": "projectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ]
        },
        "options": {}
      },
      "id": "b16418f9-49f0-40b9-b7c1-da693fb91e00",
      "name": "Chi7",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        3920,
        3720
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "2a75c8aa-0ad9-4171-b215-7ddea1d07bd8",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "phuong.nt@netbasejsc.com",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Phuong"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "c01ba01c-39bd-41c7-82c6-cc9a876741d2",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "huy.nhd@netbasejsc.com",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Huy"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "7add08a8-dffe-44d7-b27c-73344547b865",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "chi.hu@netbasejsc.com",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Chi"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "1591f407-008f-43ca-b641-27b4d699617d",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "chau.lt@netbasejsc.com",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Chau"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "b33cb102-6f78-4a4d-9e88-5b2725a64274",
                    "leftValue": "={{ $json.ticket.agentEmail }}",
                    "rightValue": "",
                    "operator": {
                      "type": "string",
                      "operation": "notEmpty",
                      "singleValue": true
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "default"
            }
          ]
        },
        "options": {}
      },
      "id": "fca2cff1-5ad7-4f7a-bd55-cfc78a0ef6bb",
      "name": "Switch4",
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        3520,
        4400
      ]
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 1289877611,
          "mode": "list",
          "cachedResultName": "Huy",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=1289877611"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "idTicket": "={{ $json.ticket.idTicket }}",
            "agenEmail": "={{ $json.ticket.agentEmail }}",
            "numberTicket": "={{ $json.ticket.numberTicket }}",
            "agentName": "={{ $json.ticket.agentName }}",
            "lastRespone": "Client",
            "nameClient": "={{ $json.ticket.nameClient }}",
            "typeTicket": "={{ $json.ticket.typeTicket }}",
            "subjectTicket": "={{ $json.ticket.subjectTicket }}",
            "statusTicket": "={{ $json.ticket.statusTicket }}",
            "projectTicket": "={{ $json.ticket.projectTicket }}"
          },
          "matchingColumns": [
            "idTicket"
          ],
          "schema": [
            {
              "id": "idTicket",
              "displayName": "idTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "numberTicket",
              "displayName": "numberTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agentName",
              "displayName": "agentName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "agenEmail",
              "displayName": "agenEmail",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "lastRespone",
              "displayName": "lastRespone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nameClient",
              "displayName": "nameClient",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "subjectTicket",
              "displayName": "subjectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "statusTicket",
              "displayName": "statusTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "typeTicket",
              "displayName": "typeTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "projectTicket",
              "displayName": "projectTicket",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ]
        },
        "options": {}
      },
      "id": "c5940c2b-bb6c-4c8a-a0ed-33b74aa88eca",
      "name": "Huy",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        3880,
        4280
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "content": "## SendMail 7:30AM",
        "height": 80,
        "width": 239.32079071092122,
        "color": 3
      },
      "id": "f452fc6b-c0a1-4498-89ab-379b1918e942",
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        4360,
        3780
      ]
    },
    {
      "parameters": {
        "content": "## Warning 8AM",
        "height": 80,
        "color": 5
      },
      "id": "48b7b96f-3127-4d4c-8e84-1938c64152a4",
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -1260,
        6460
      ]
    },
    {
      "parameters": {
        "content": "## Success 8PM",
        "height": 80,
        "color": 6
      },
      "id": "f09fc7de-13ed-4c60-a288-781c698c3826",
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -1260,
        6660
      ]
    },
    {
      "parameters": {
        "content": "## Delete Sheet 22PM",
        "height": 80,
        "width": 261.73469725052115,
        "color": 7
      },
      "id": "08df83ed-1953-4310-9b99-ce25f1ad13e3",
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        4380,
        5840
      ]
    },
    {
      "parameters": {
        "operation": "delete",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 1298489612,
          "mode": "list",
          "cachedResultName": "Phuong",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=1298489612"
        },
        "numberToDelete": 50
      },
      "id": "b4d3721b-0f1a-4d8b-a133-78903a14149f",
      "name": "Phuong",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        5320,
        6060
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "operation": "delete",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 1289877611,
          "mode": "list",
          "cachedResultName": "Huy",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=1289877611"
        },
        "numberToDelete": 50
      },
      "id": "48174f5b-c1a9-421c-87ea-e89fa1f4f408",
      "name": "Huy3",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        5320,
        5900
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "operation": "delete",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 2073353188,
          "mode": "list",
          "cachedResultName": "Chi",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=2073353188"
        },
        "numberToDelete": 50
      },
      "id": "2b004c43-f9fb-4f56-a9f3-05d01c51849e",
      "name": "Chi",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        5320,
        6240
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "operation": "delete",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 548962283,
          "mode": "list",
          "cachedResultName": "Chau",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1lM_TG2ExLdbs1YoBcaFzBFscVqB3MOEFjBFnvE9kAa0/edit#gid=548962283"
        },
        "numberToDelete": 50
      },
      "id": "091b7783-735f-401a-aa2b-c018156845e5",
      "name": "Chau",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        5340,
        6400
      ],
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "P5h6CdXmV7twphIt",
          "name": "Canh Google Sheets"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "Aggregate2": {
      "main": [
        [
          {
            "node": "Send mail closed ticket8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Phuong2": {
      "main": [
        [
          {
            "node": "Check Agent Reply1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate4": {
      "main": [
        [
          {
            "node": "Send mail closed ticket2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate5": {
      "main": [
        [
          {
            "node": "Send mail Reply Ticket2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Huy2": {
      "main": [
        [
          {
            "node": "Check Agent Reply2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate6": {
      "main": [
        [
          {
            "node": "Send mail closed ticket3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate7": {
      "main": [
        [
          {
            "node": "Send mail Reply Ticket3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Chi2": {
      "main": [
        [
          {
            "node": "Check Agent Reply3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate8": {
      "main": [
        [
          {
            "node": "Send mail closed ticket4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate9": {
      "main": [
        [
          {
            "node": "Send mail Reply Ticket4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Chau2": {
      "main": [
        [
          {
            "node": "Check Agent Reply4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check Agent Reply2": {
      "main": [
        [
          {
            "node": "Aggregate4",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Aggregate5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check Agent Reply3": {
      "main": [
        [
          {
            "node": "Aggregate6",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Aggregate7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check Agent Reply1": {
      "main": [
        [
          {
            "node": "Aggregate2",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Aggregate3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check Agent Reply4": {
      "main": [
        [
          {
            "node": "Aggregate8",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Aggregate9",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Item Lists4": {
      "main": [
        [
          {
            "node": "Get Ticket4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Ticket Pending4": {
      "main": [
        [
          {
            "node": "Item Lists4",
            "type": "main",
            "index": 0
          },
          {
            "node": "IF8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get replies4": {
      "main": [
        [
          {
            "node": "Replies and Ticket4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Ticket4": {
      "main": [
        [
          {
            "node": "Get replies4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Replies and Ticket4": {
      "main": [
        [
          {
            "node": "Ticket 8h1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Item Lists5": {
      "main": [
        [
          {
            "node": "Get Ticket5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Ticket Pending5": {
      "main": [
        [
          {
            "node": "Item Lists5",
            "type": "main",
            "index": 0
          },
          {
            "node": "IF2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get replies5": {
      "main": [
        [
          {
            "node": "Replies and Ticket5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Ticket5": {
      "main": [
        [
          {
            "node": "Get replies5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Replies and Ticket5": {
      "main": [
        [
          {
            "node": "Ticket 24h2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Item Lists6": {
      "main": [
        [
          {
            "node": "Get Ticket6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get replies6": {
      "main": [
        [
          {
            "node": "Replies and Ticket6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Ticket6": {
      "main": [
        [
          {
            "node": "Check client send",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Replies and Ticket6": {
      "main": [
        [
          {
            "node": "Ticket 8h",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Item Lists7": {
      "main": [
        [
          {
            "node": "Get Ticket7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get replies7": {
      "main": [
        [
          {
            "node": "Replies and Ticket7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Replies and Ticket7": {
      "main": [
        [
          {
            "node": "Ticket 24h3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Ticket 24h2": {
      "main": [
        [
          {
            "node": "Requester Replies8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Ticket 24h3": {
      "main": [
        [
          {
            "node": "Requester Replies5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Cloodo Point5": {
      "main": [
        [
          {
            "node": "Cloodo Point4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Ticket 8h": {
      "main": [
        [
          {
            "node": "Requester Replies4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Ticket7": {
      "main": [
        [
          {
            "node": "Check client send1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Ticket Open": {
      "main": [
        [
          {
            "node": "Item Lists7",
            "type": "main",
            "index": 0
          },
          {
            "node": "IF3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Ticket Open1": {
      "main": [
        [
          {
            "node": "Item Lists6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Cloodo Point7": {
      "main": [
        [
          {
            "node": "Cloodo Point6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items": {
      "main": [
        [],
        [
          {
            "node": "Cloodo Point5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Cloodo Point4": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items1": {
      "main": [
        [],
        [
          {
            "node": "Cloodo Point7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check client send": {
      "main": [
        [
          {
            "node": "Get replies6",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get replies8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check client send1": {
      "main": [
        [
          {
            "node": "Get replies7",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get replies9",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Requester Replies6": {
      "main": [
        [],
        [
          {
            "node": "Ticket 15d2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch5": {
      "main": [
        [
          {
            "node": "Phuong6",
            "type": "main",
            "index": 0
          }
        ],
        [],
        [
          {
            "node": "Chi6",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Chau6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch6": {
      "main": [
        [
          {
            "node": "Phuong7",
            "type": "main",
            "index": 0
          }
        ],
        [],
        [
          {
            "node": "Chi7",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Chau7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get replies8": {
      "main": [
        [
          {
            "node": "Replies and Ticket8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Replies and Ticket8": {
      "main": [
        [
          {
            "node": "Ticket 15d",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch7": {
      "main": [
        [
          {
            "node": "Phuong8",
            "type": "main",
            "index": 0
          }
        ],
        [],
        [
          {
            "node": "Chi8",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Chau8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Cloodo Point9": {
      "main": [
        [
          {
            "node": "Loop Over Items2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Cloodo Point10": {
      "main": [
        [
          {
            "node": "IF not found3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items2": {
      "main": [
        [],
        [
          {
            "node": "Cloodo Point10",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Requester Replies5": {
      "main": [
        [
          {
            "node": "Loop Over Items1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Cloodo Point6": {
      "main": [
        [
          {
            "node": "Loop Over Items1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "IF not found3": {
      "main": [
        [
          {
            "node": "Cloodo Point9",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Loop Over Items2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get replies9": {
      "main": [
        [
          {
            "node": "Replies and Ticket9",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Replies and Ticket9": {
      "main": [
        [
          {
            "node": "Ticket 15d1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Ticket 15d1": {
      "main": [
        [
          {
            "node": "Loop Over Items3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "IF not found4": {
      "main": [
        [
          {
            "node": "Cloodo Point11",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Loop Over Items3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Cloodo Point12": {
      "main": [
        [
          {
            "node": "IF not found4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items3": {
      "main": [
        [],
        [
          {
            "node": "Cloodo Point12",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Cloodo Point11": {
      "main": [
        [
          {
            "node": "Loop Over Items3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Cloodo Point13": {
      "main": [
        [
          {
            "node": "Loop Over Items4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Cloodo Point14": {
      "main": [
        [
          {
            "node": "Cloodo Point13",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items4": {
      "main": [
        [],
        [
          {
            "node": "Cloodo Point14",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "IF not found5": {
      "main": [
        [
          {
            "node": "Cloodo Point15",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Loop Over Items5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Cloodo Point15": {
      "main": [
        [
          {
            "node": "Loop Over Items5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Cloodo Point16": {
      "main": [
        [
          {
            "node": "IF not found5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items5": {
      "main": [
        [],
        [
          {
            "node": "Cloodo Point16",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Ticket 8h1": {
      "main": [
        [
          {
            "node": "Requester Replies6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "When clicking ‘Test workflow’": {
      "main": [
        [
          {
            "node": "Huy2",
            "type": "main",
            "index": 0
          },
          {
            "node": "Phuong2",
            "type": "main",
            "index": 0
          },
          {
            "node": "Chi2",
            "type": "main",
            "index": 0
          },
          {
            "node": "Chau2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Cloodo Point17": {
      "main": [
        [
          {
            "node": "Loop Over Items6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Cloodo Point18": {
      "main": [
        [
          {
            "node": "Cloodo Point17",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items6": {
      "main": [
        [],
        [
          {
            "node": "Cloodo Point18",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Requester Replies8": {
      "main": [
        [
          {
            "node": "Loop Over Items6",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Ticket 15d3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items7": {
      "main": [
        [],
        [
          {
            "node": "Cloodo Point20",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "IF not found6": {
      "main": [
        [
          {
            "node": "Cloodo Point19",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Loop Over Items7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Cloodo Point19": {
      "main": [
        [
          {
            "node": "Loop Over Items7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Cloodo Point20": {
      "main": [
        [
          {
            "node": "IF not found6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Ticket 15d3": {
      "main": [
        [
          {
            "node": "Loop Over Items7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate3": {
      "main": [
        [
          {
            "node": "Send mail Reply Ticket1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Item Lists": {
      "main": [
        [
          {
            "node": "Get Ticket",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Ticket Pending": {
      "main": [
        [
          {
            "node": "Item Lists",
            "type": "main",
            "index": 0
          },
          {
            "node": "IF",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get replies": {
      "main": [
        [
          {
            "node": "Replies and Ticket",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Ticket": {
      "main": [
        [
          {
            "node": "Get replies",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Replies and Ticket": {
      "main": [
        [
          {
            "node": "Ticket 8h2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Requester Replies": {
      "main": [
        [
          {
            "node": "Switch5",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Ticket 15d4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Ticket 8h2": {
      "main": [
        [
          {
            "node": "Requester Replies",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Item Lists8": {
      "main": [
        [
          {
            "node": "Get Ticket8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get replies10": {
      "main": [
        [
          {
            "node": "Replies and Ticket10",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Ticket8": {
      "main": [
        [
          {
            "node": "Check client send2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Replies and Ticket10": {
      "main": [
        [
          {
            "node": "Ticket 8h3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Ticket 8h3": {
      "main": [
        [
          {
            "node": "Requester Replies7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Ticket Open2": {
      "main": [
        [
          {
            "node": "Item Lists8",
            "type": "main",
            "index": 0
          },
          {
            "node": "IF10",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check client send2": {
      "main": [
        [
          {
            "node": "Get replies10",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get replies11",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get replies11": {
      "main": [
        [
          {
            "node": "Replies and Ticket11",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Replies and Ticket11": {
      "main": [
        [
          {
            "node": "Ticket 15d5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Ticket 15d4": {
      "main": [
        [
          {
            "node": "Switch6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Requester Replies7": {
      "main": [
        [
          {
            "node": "Switch4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Ticket 15d5": {
      "main": [
        [
          {
            "node": "Switch7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch4": {
      "main": [
        [
          {
            "node": "Phuong5",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Huy",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Chi5",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Chau5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "bb12d939-b350-43d6-85dd-090281dc5bc1",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "3909475c03ca6926b6e6edc6a6f06c1feb448ce7ac700d69b17002085d9011f8"
  },
  "id": "O99uf09H7CE1Gd4z",
  "tags": []
}